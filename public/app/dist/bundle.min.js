function saveLocal(n,e){localStorage[n]=JSON.stringify(e)}function getJSONLocal(n){var e=null;try{var t=localStorage[n];void 0!==t&&(e=JSON.parse(t))}catch(o){}return e}function deleteLocal(n){localStorage.removeItem(n)}function ClosureMessage(n){return function(e){return function(){e(n)}}}function emptyOrUndefined(n){return void 0==n||""===n}function RandPosition(n){var e=n||{min:0,max:100},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a]}function RandColor(n){var e=n||{min:0,max:1,fixed:2},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a,1]}function RandSize(n){var e=n||{min:.1,max:2,fixed:1},t=chance.floating(e);return[t,t,t]}function RandRotation(n){var e=Number(chance.bool()),t=Number(chance.bool()),o=Number(chance.bool());return{angle:chance.integer({min:0,max:360}),axis:[e,t,o]}}function generate(n){return function(){var e=chance.integer({min:0,max:100});return Array.apply(0,Array(e)).map(n)}}var app=angular.module("Application",["ui.router","ngResource","ngAnimate","ngMaterial","alexandra"]);!function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/main.html",'\n<md-toolbar class="md-accent md-whiteframe-1dp">\n    <div class="md-toolbar-tools">\n        <md-menu flex="5">\n            <md-button aria-label="Type Stats" class="md-icon-button button-stats" ng-click="openMenu($mdOpenMenu, $event)">\n                <md-icon md-menu-origin md-font-icon="mdi-chart-areaspline" class="mdi"></md-icon>\n            </md-button>\n            <md-menu-content width="4">\n                <md-menu-item>\n                    <md-button ui-sref="app.normal">\n                        <md-icon md-font-icon="mdi-chart-bubble" class="mdi"></md-icon>\n                        Normal\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.slider">\n                        <md-icon md-font-icon="mdi-clock-start" class="mdi"></md-icon>\n                        Slider\n                    </md-button>\n                </md-menu-item>\n                <md-menu-divider></md-menu-divider>\n                <md-menu-item>\n                    <md-button  ui-sref="app.player">\n                        <md-icon md-font-icon="mdi-play-box-outline" class="mdi"></md-icon>\n                        Player\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.heightmap">\n                        <md-icon md-font-icon="mdi-airplane-landing" class="mdi"></md-icon>\n                        Height Map\n                    </md-button>\n                </md-menu-item>\n            </md-menu-content>\n        </md-menu>\n        \n        <h2>\n            <span>Pickyourday 3D</span>\n        </h2>\n        <span flex></span>\n        <md-button aria-label="logout" class="md-icon-button button-power" style="margin-right: 0px;" ng-click="logout()">\n            <md-icon md-font-icon="mdi-power" class="mdi"></md-icon>\n        </md-button>\n    </div>\n</md-toolbar>\n\n\n<div ui-view="content"></div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/height-map/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/login/main.html",'<div layout="column" layout-align="center center">\n\n\n\n    <md-card>\n        <md-card-title>\n            <md-card-title-text>\n                <span class="md-headline">Pickyourday 3D</span>\n\n            </md-card-title-text>\n\n        </md-card-title>\n        <md-card-content layout="column">\n\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Email</label>\n                <input ng-model="user.email" type="email">\n            </md-input-container>\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Password</label>\n                <input ng-model="user.password" type="password">\n            </md-input-container>\n        </md-card-content>\n        <md-card-actions layout="row" layout-align="center center">\n            <md-button class="md-primary  md-raised md-hue-2" ng-click="login()">Login</md-button>\n\n        </md-card-actions>\n    </md-card>\n\n\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/normal/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n<canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n  <div flex="35" layout="column" layout-align="center center">\n	<p>X: {{selectedInfo[0]||\'N/A\'}}</p>\n	<p>Y: {{selectedInfo[1] || \'0\'}}</p>\n	<p>Z: {{selectedInfo[2]||\'N/A\'}}</p>\n  </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/player/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div flex layout="row" layout-align="center center">\n            <md-button ng-click="play()" ng-if="!loading">\n                <md-icon md-font-icon="mdi-play" class="mdi"></md-icon>\n                Play\n            </md-button>\n        </div>\n\n        <div flex>\n            <div ng-repeat="vm in data">\n                {{vm.position}}\n\n            </div>\n        </div>\n\n        <div>\n            <md-slider-container>\n               <span class="md-body-1">{{values.index}}</span>\n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="values.index" ng-disabled="true">\n                </md-slider>\n            </md-slider-container>\n        </div>\n\n\n\n\n    </div>\n\n</div>\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/slider/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n</div>')}])}(),angular.module("Application").run(["$rootScope","$mdToast","$state",function(n,e,t){n.showToast=function(n){e.show(e.simple().textContent(n).theme("pick-theme").hideDelay(3e3))},n.go=function(n,e){t.go(n,e)}}]),angular.module("Application").config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider",function(n,e,t,o){n.state("login",{url:"/login",onEnter:["$rootScope",function(n){getJSONLocal("user")&&n.go("app.player")}],templateUrl:"/views/login/main.html",controller:"LoginCtrl"}).state("app",{url:"/",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],templateUrl:"/views/main.html",controller:"AppCtrl","abstract":!0}).state("app.normal",{url:"normal",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/normal/main.html",controller:"NormalCtrl"}}}).state("app.slider",{url:"slider",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/slider/main.html",controller:"SliderCtrl"}}}).state("app.player",{url:"player",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/player/main.html",controller:"PlayerCtrl"}}}).state("app.heightmap",{url:"height-map",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/height-map/main.html",controller:"HeightMapCtrl"}}}),e.otherwise("/login"),t.interceptors.push("AuthInterceptor"),o.theme("default").backgroundPalette("teal",{"default":"500","hue-1":"100","hue-2":"600","hue-3":"A100"}).primaryPalette("lime",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("teal",{"default":"500"})}]),angular.module("Application").controller("AppCtrl",["$rootScope","$scope","OauthService",function(n,e,t){e.openMenu=function(n,e){originatorEv=e,n(e)},e.logout=function(){t.logout().Session(function(){deleteLocal("user"),n.go("login")},function(){})}}]),angular.module("Application").controller("HeightMapCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){n.config={type:"custom",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}},n.data={mesh:t.Plane({height:100,width:100,w_s:5,h_s:8},function(n,e,t){var o=e.x,a=0,i=e.y;return 50>o&&o>-50&&50>i&&i>-50&&(a=chance.integer({min:0,max:30})),n.push(o),n.push(a),n.push(i),n}),position:[50,0,50]}}]),angular.module("Application").controller("LoginCtrl",["$rootScope","$scope","OauthService","RequestService",function(n,e,t,o){e.user={email:"",password:""},e.login=function(){async.waterfall([function(n){var t=emptyOrUndefined(e.user.email),o=emptyOrUndefined(e.user.password);t||o?t?n("Email Empty"):o&&n("Password Empty"):n()},function(n){t.login().Session(e.user,function(e){return e.error?n(e.error):void n(null,e.data)},o.ServerNotFound(n))},function(n,e){t.role().check({role:n.role},function(t){return t.error?e(t.error):void(2==t.data?e(null,n):o.NoRoleAuthorized(e)())},o.ServerNotFound(e))}],function(e,t){return e?n.showToast(e):(saveLocal("user",t),void n.go("app.normal"))})}}]),angular.module("Application").controller("NormalCtrl",["$scope","CompanyService",function(n,e){n.loading=!0,n.data=[],n.selectedInfo={};var t=[];n.config={colortype:"variable",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},selector:!0,onSelected:function(e){e&&(n.selectedInfo=e)}};var o=function(){e.Pick().stats(function(e){t=Immutable.List(e.data),n.data=_.clone(t.get(23)),n.loading=!1})};o()}]),angular.module("Application").controller("PlayerCtrl",["$scope","CompanyService","$timeout",function(n,e,t){function o(e,o,a,l){var c=o.reduce(function(n,e,t){var o=e.position,i=a[t].position;return _.isEqual(o,i)||(n.length++,n.current["x_"+t]=o[0],n.current["y_"+t]=o[1],n.current["z_"+t]=o[2],n.next["x_"+t]=i[0],n.next["y_"+t]=i[1],n.next["z_"+t]=i[2]),n},{current:{},next:{},length:0});if(n.values.index=e+1,console.log(c),c.length>0){new TWEEN.Tween(c.current).to(c.next,i).onUpdate(function(){var e=this;n.$$phase||n.$apply(function(){var t=Object.keys(e).reduce(function(n,t){var o=e[t],a=t.split("_"),i=a[0],r=a[1];return console.log(a),n[r]=n[r]||{},n[r][i]=o,n},{});console.log(t);var o=_.clone(n.data);Object.keys(t).forEach(function(n){var e=t[n];o[n].position=[e.x,e.y,e.z]}),n.data=o})}).onComplete(function(){l()}).interpolation(TWEEN.Interpolation.Bezier).easing(TWEEN.Easing.Linear.None).delay(250).start()}else t(l,r)}function a(n){requestAnimationFrame(a),TWEEN.update(n)}var i=2e3,r=500;n.loading=!0,n.data=[];var l=[];n.values={index:1},n.config={colortype:"variable",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}},e.Pick().stats(function(e){l=Immutable.List(e.data),n.data=_.clone(l.get(0)),n.loading=!1}),n.play=function(){function e(t){if(console.log(t),t<l.count()-1){var a=_.clone(l.get(t)),i=_.clone(l.get(t+1));o(t,a,i,function(){e(t+1)})}else n.values.index=l.count()}e(0)},requestAnimationFrame(a)}]),angular.module("Application").controller("SliderCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){var o;n.loading=!0,n.config={type:"custom",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}};var a=function(e){var o=t.Text(e,{size:10,height:.5,curveSegments:30,bevelEnabled:!0,bevelThickness:1.5,bevelSize:.5});n.data={mesh:o,position:[50,50,150],rotation:{angle:45,axis:[0,1,0]}}},i=function(){e.Profile().get(function(e){return e.error?console.log(e.error):(o=e.data,n.loading=!1,void a(o.name))})};i()}]),angular.module("Application").factory("ApiService",["$resource","$location",function(n,e){return{env:"prod",prod:{protocol:"https",host:"pickyourday.herokuapp.com",port:"",root:"api"},dev:{protocol:"http",host:"localhost",port:"5000",root:"api"},getApiPath:function(n){var e=this[this.env];return e.protocol+"://"+e.host+(""!==e.port?":"+e.port:"")+"/"+e.root+"/"+n},rest:function(e,t,o){var a=n(this.getApiPath(e),o||{},t||{});return a}}}]),angular.module("Application").factory("CompanyService",["ApiService",function(n){return{base:"company",Pick:function(){return n.rest(this.base+"/statsPicks",{stats:{method:"GET",params:{}}})},Profile:function(){return n.rest(this.base+"/profile",{get:{method:"GET",params:{}}})}}}]),angular.module("Application").factory("AuthInterceptor",["$q","$location",function(n,e){return{request:function(n){n.headers=n.headers||{};var e=getJSONLocal("user"),e=getJSONLocal("user");return!n.headers.Authorization&&e&&(n.headers.Authorization=e.token),n},requestError:function(e){return n.reject(e)},response:function(e){return"ERROR"===e.data.status?n.reject(e):e||n.when(e)},responseError:function(t){return 403===t.status?(console.error("Error de acceso"),localStorage.user="",void e.path("/")):n.reject(t)}}}]),angular.module("Application").factory("OauthService",["ApiService",function(n){return{base:"oauth",login:function(){return n.rest(this.base,{Session:{method:"POST",params:{}}})},logout:function(){return n.rest(this.base+"/logout",{Session:{method:"GET",params:{}}})},role:function(){return n.rest(this.base+"/role/:role",{check:{method:"GET",params:{role:"@role"}}})}}}]),angular.module("Application").factory("RequestService",function(){return{ServerNotFound:ClosureMessage("Server Not Found"),NoRoleAuthorized:ClosureMessage("No Role Authorized")}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdXRpbHMuanMiLCJhcHBsaWNhdGlvbi5qcyIsInRlbXBsYXRlLWNhY2hlLmpzIiwiY29uZmlnL2Jvb3QuanMiLCJjb25maWcvZW52aXJvbm1lbnQuanMiLCJjb250cm9sbGVycy9hcHBsaWNhdGlvbl9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaGVpZ2h0X21hcF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL25vcm1hbF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGxheWVyX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zbGlkZXJfY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvYXBpLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzL2NvbXBhbnlfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvaW50ZXJjZXB0b3Jfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvb2F1dGguc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvcmVxdWVzdF9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNhdmVMb2NhbCIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0SlNPTkxvY2FsIiwicmVzdWx0Iiwic3RyX2pzb24iLCJ1bmRlZmluZWQiLCJwYXJzZSIsImUiLCJkZWxldGVMb2NhbCIsInJlbW92ZUl0ZW0iLCJDbG9zdXJlTWVzc2FnZSIsIm1lc3NhZ2UiLCJmbiIsImVtcHR5T3JVbmRlZmluZWQiLCJ2YWx1ZSIsIlJhbmRQb3NpdGlvbiIsInYiLCJyYW5nZSIsIm1pbiIsIm1heCIsIngiLCJjaGFuY2UiLCJmbG9hdGluZyIsInkiLCJ6IiwiUmFuZENvbG9yIiwicmFuZ2VDb2xvciIsImZpeGVkIiwiciIsImciLCJiIiwiUmFuZFNpemUiLCJzaXplIiwiUmFuZFJvdGF0aW9uIiwiTnVtYmVyIiwiYm9vbCIsImFuZ2xlIiwiaW50ZWdlciIsImF4aXMiLCJnZW5lcmF0ZSIsImNvdW50IiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsIiRzdGF0ZSIsInNob3dUb2FzdCIsIm1zZyIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInRoZW1lIiwiaGlkZURlbGF5IiwiZ28iLCJzdGF0ZSIsInBhcmFtcyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInVybCIsIm9uRW50ZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhYnN0cmFjdCIsInZpZXdzIiwiY29udGVudCIsIm90aGVyd2lzZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImh1ZS0yIiwiaHVlLTMiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCIkc2NvcGUiLCJPYXV0aFNlcnZpY2UiLCJvcGVuTWVudSIsIiRtZE9wZW5NZW51IiwiZXYiLCJvcmlnaW5hdG9yRXYiLCJsb2dvdXQiLCJTZXNzaW9uIiwiQ29tcGFueVNlcnZpY2UiLCIkYWxleGFuZHJhVXRpbHMiLCJ0eXBlIiwiYXhpc0xlbmd0aCIsInN0cmVhbWluZyIsImJhY2tncm91bmQiLCJncmlkIiwiZ3JpZENvbmZpZyIsImxpbmVzIiwiZGltIiwibWVzaCIsIlBsYW5lIiwiaGVpZ2h0Iiwid2lkdGgiLCJ3X3MiLCJoX3MiLCJwcmV2IiwiaXRlbSIsImluZGV4IiwicG9zaXRpb24iLCJSZXF1ZXN0U2VydmljZSIsInVzZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJhc3luYyIsIndhdGVyZmFsbCIsIm5leHQiLCJpc0VtYWlsIiwiaXNQYXNzd29yZCIsInJlcyIsImVycm9yIiwiU2VydmVyTm90Rm91bmQiLCJyb2xlIiwiY2hlY2siLCJOb1JvbGVBdXRob3JpemVkIiwiZXJyIiwibG9hZGluZyIsInNlbGVjdGVkSW5mbyIsImNhbGVuZGFyIiwiY29sb3J0eXBlIiwic2VsZWN0b3IiLCJvblNlbGVjdGVkIiwiZmV0Y2giLCJQaWNrIiwic3RhdHMiLCJJbW11dGFibGUiLCJMaXN0IiwiXyIsImNsb25lIiwiZ2V0IiwiJHRpbWVvdXQiLCJhbmltYXRlQ2FsZW5kYXIiLCJzdGVwIiwiYyIsIm4iLCJjYiIsImludGVyX2RhdGEiLCJyZWR1Y2UiLCJjX3BvcyIsIm5fcG9zIiwiaXNFcXVhbCIsImxlbmd0aCIsImN1cnJlbnQiLCJ2YWx1ZXMiLCJjb25zb2xlIiwibG9nIiwiVFdFRU4iLCJUd2VlbiIsInRvIiwiUExBWUVSX1RJTUUiLCJvblVwZGF0ZSIsInNlbGYiLCJ0aGlzIiwiJCRwaGFzZSIsIiRhcHBseSIsImludGVyX2FycmF5IiwiT2JqZWN0Iiwia2V5cyIsInNwbGl0IiwicGFyYW0iLCJjbG9uZV9kYXRhIiwiZm9yRWFjaCIsIm9uQ29tcGxldGUiLCJpbnRlcnBvbGF0aW9uIiwiSW50ZXJwb2xhdGlvbiIsIkJlemllciIsImVhc2luZyIsIkVhc2luZyIsIkxpbmVhciIsIk5vbmUiLCJkZWxheSIsInN0YXJ0IiwiRU1QVFlfVElNRSIsIkludGVycG9sYXRpb25UaW1lIiwidGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZSIsInBsYXkiLCJpdGVyIiwiaSIsInByb2ZpbGUiLCJBcHBseVRleHQiLCJ0ZXh0IiwibW9kZWwiLCJUZXh0IiwiY3VydmVTZWdtZW50cyIsImJldmVsRW5hYmxlZCIsImJldmVsVGhpY2tuZXNzIiwiYmV2ZWxTaXplIiwicm90YXRpb24iLCJHZXRQcm9maWxlIiwiUHJvZmlsZSIsIm5hbWUiLCJmYWN0b3J5IiwiJHJlc291cmNlIiwiJGxvY2F0aW9uIiwiZW52IiwicHJvZCIsInByb3RvY29sIiwiaG9zdCIsInBvcnQiLCJyb290IiwiZGV2IiwiZ2V0QXBpUGF0aCIsInBhdGgiLCJhcGkiLCJyZXN0IiwibWV0aG9kcyIsImRlZmF1bHRQYXJhbXMiLCJyZXNvdXJjZSIsIkFwaVNlcnZpY2UiLCJiYXNlIiwibWV0aG9kIiwiJHEiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJ0b2tlbiIsInJlcXVlc3RFcnJvciIsInJlamVjdGlvbiIsInJlamVjdCIsInJlc3BvbnNlIiwic3RhdHVzIiwid2hlbiIsInJlc3BvbnNlRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLFFBQUFBLFdBQUFDLEVBQUFDLEdBQ0FDLGFBQUFGLEdBQUFHLEtBQUFDLFVBQUFILEdBR0EsUUFBQUksY0FBQUwsR0FFQSxHQUFBTSxHQUFBLElBQ0EsS0FDQSxHQUFBQyxHQUFBTCxhQUFBRixFQUVBUSxVQUFBRCxJQUVBRCxFQUFBSCxLQUFBTSxNQUFBRixJQUdBLE1BQUFHLElBSUEsTUFBQUosR0FHQSxRQUFBSyxhQUFBWCxHQUNBRSxhQUFBVSxXQUFBWixHQUdBLFFBQUFhLGdCQUFBQyxHQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBLFlBQ0FBLEVBQUFELEtBS0EsUUFBQUUsa0JBQUFDLEdBQ0EsTUFBQSxTQUFBQSxHQUFBLEtBQUFBLEVBSUEsUUFBQUMsY0FBQUMsR0FDQSxHQUFBQyxHQUFBRCxJQUFBRSxJQUFBLEVBQUFDLElBQUEsS0FDQUMsRUFBQUMsT0FBQUMsU0FBQUwsR0FDQU0sRUFBQUYsT0FBQUMsU0FBQUwsR0FDQU8sRUFBQUgsT0FBQUMsU0FBQUwsRUFDQSxRQUFBRyxFQUFBRyxFQUFBQyxHQUdBLFFBQUFDLFdBQUFULEdBQ0EsR0FBQVUsR0FBQVYsSUFBQUUsSUFBQSxFQUFBQyxJQUFBLEVBQUFRLE1BQUEsR0FDQUMsRUFBQVAsT0FBQUMsU0FBQUksR0FDQUcsRUFBQVIsT0FBQUMsU0FBQUksR0FDQUksRUFBQVQsT0FBQUMsU0FBQUksRUFDQSxRQUFBRSxFQUFBQyxFQUFB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bEcsT0FBQW1HLE9BQUEsTUFBQXBLLFFBQUFnRSxLQUFBLGlCQ2xCQWpGLFFBQUFDLE9BQUEsZUFDQWlLLFFBQUEsaUJBQUEsV0FFQSxPQUVBbEYsZUFBQW5ILGVBQUEsb0JBRUFzSCxpQkFBQXRILGVBQUEiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNhdmVMb2NhbChrZXksIGRhdGEpIHtcclxuICAgIGxvY2FsU3RvcmFnZVtrZXldID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEpTT05Mb2NhbChrZXkpIHtcclxuXHJcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIHN0cl9qc29uID0gbG9jYWxTdG9yYWdlW2tleV07XHJcblxyXG4gICAgICAgIGlmIChzdHJfanNvbiE9PXVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShzdHJfanNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTG9jYWwoa2V5KSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDbG9zdXJlTWVzc2FnZShtZXNzYWdlKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihmbil7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZuKG1lc3NhZ2UpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbXB0eU9yVW5kZWZpbmVkKHZhbHVlKXtcclxuICAgIHJldHVybiB2YWx1ZT09dm9pZCAwIHx8IHZhbHVlPT09XCJcIjtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFJhbmRQb3NpdGlvbih2KSB7XHJcbiAgICB2YXIgcmFuZ2UgPSB2IHx8IHsgbWluOiAwLCBtYXg6IDEwMCB9O1xyXG4gICAgdmFyIHggPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgdmFyIHkgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgdmFyIHogPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgcmV0dXJuIFt4LCB5LCB6XTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmFuZENvbG9yKHYpIHtcclxuICAgIHZhciByYW5nZUNvbG9yID0gdiB8fCB7IG1pbjogMCwgbWF4OiAxLCBmaXhlZDogMiB9O1xyXG4gICAgdmFyIHIgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2VDb2xvcik7XHJcbiAgICB2YXIgZyA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZUNvbG9yKTtcclxuICAgIHZhciBiID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlQ29sb3IpO1xyXG4gICAgcmV0dXJuIFtyLCBnLCBiLCAxXTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmFuZFNpemUodikge1xyXG4gICAgdmFyIHJhbmdlID0gdiB8fCB7IG1pbjogMC4xLCBtYXg6IDIsIGZpeGVkOiAxIH07XHJcbiAgICB2YXIgc2l6ZSA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZSk7XHJcbiAgICByZXR1cm4gW3NpemUsIHNpemUsIHNpemVdO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUmFuZFJvdGF0aW9uKHYpe1xyXG4gICAgdmFyIHJhbmdlID0gdiB8fCB7IG1pbjogMCwgbWF4OiAzNjB9O1xyXG4gICAgdmFyIHg9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgdmFyIHk9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgdmFyIHo9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgcmV0dXJuICB7XHJcbiAgICAgICAgYW5nbGU6Y2hhbmNlLmludGVnZXIoeyBtaW46IDAsIG1heDogMzYwfSksXHJcbiAgICAgICAgYXhpczpbeCx5LHpdXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZShmbikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IGNoYW5jZS5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuYXBwbHkoMCwgQXJyYXkoY291bnQpKS5tYXAoZm4pO1xyXG4gICAgfTtcclxufSIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbJ3VpLnJvdXRlcicsIFwibmdSZXNvdXJjZVwiLCduZ0FuaW1hdGUnLCAnbmdNYXRlcmlhbCcsICdhbGV4YW5kcmEnXSk7IiwiKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL21haW4uaHRtbCcsXG4gICAgJ1xcbicgK1xuICAgICc8bWQtdG9vbGJhciBjbGFzcz1cIm1kLWFjY2VudCBtZC13aGl0ZWZyYW1lLTFkcFwiPlxcbicgK1xuICAgICcgICAgPGRpdiBjbGFzcz1cIm1kLXRvb2xiYXItdG9vbHNcIj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtbWVudSBmbGV4PVwiNVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIGFyaWEtbGFiZWw9XCJUeXBlIFN0YXRzXCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBidXR0b24tc3RhdHNcIiBuZy1jbGljaz1cIm9wZW5NZW51KCRtZE9wZW5NZW51LCAkZXZlbnQpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1tZW51LW9yaWdpbiBtZC1mb250LWljb249XCJtZGktY2hhcnQtYXJlYXNwbGluZVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLW1lbnUtY29udGVudCB3aWR0aD1cIjRcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiB1aS1zcmVmPVwiYXBwLm5vcm1hbFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktY2hhcnQtYnViYmxlXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIE5vcm1hbFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gIHVpLXNyZWY9XCJhcHAuc2xpZGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1jbG9jay1zdGFydFwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICBTbGlkZXJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtZGl2aWRlcj48L21kLW1lbnUtZGl2aWRlcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5wbGF5ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBsYXktYm94LW91dGxpbmVcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgUGxheWVyXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5oZWlnaHRtYXBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLWFpcnBsYW5lLWxhbmRpbmdcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgSGVpZ2h0IE1hcFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtbWVudS1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtbWVudT5cXG4nICtcbiAgICAnICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICA8aDI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuPlBpY2t5b3VyZGF5IDNEPC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgIDwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gZmxleD48L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwibG9nb3V0XCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBidXR0b24tcG93ZXJcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMHB4O1wiIG5nLWNsaWNrPVwibG9nb3V0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBvd2VyXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9tZC10b29sYmFyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzxkaXYgdWktdmlldz1cImNvbnRlbnRcIj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9oZWlnaHQtbWFwL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9sb2dpbi9tYWluLmh0bWwnLFxuICAgICc8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxtZC1jYXJkPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1jYXJkLXRpdGxlPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtY2FyZC10aXRsZS10ZXh0PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZC1oZWFkbGluZVwiPlBpY2t5b3VyZGF5IDNEPC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1jYXJkLXRpdGxlLXRleHQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC10aXRsZT5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC1jb250ZW50IGxheW91dD1cImNvbHVtblwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1pbnB1dC1jb250YWluZXIgY2xhc3M9XCJtZC1wcmltYXJ5IG1kLXJhaXNlZCBtZC1odWUtMlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGxhYmVsPkVtYWlsPC9sYWJlbD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInVzZXIuZW1haWxcIiB0eXBlPVwiZW1haWxcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1pbnB1dC1jb250YWluZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtcHJpbWFyeSBtZC1yYWlzZWQgbWQtaHVlLTJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxsYWJlbD5QYXNzd29yZDwvbGFiZWw+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ1c2VyLnBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgIDxtZC1jYXJkLWFjdGlvbnMgbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtcHJpbWFyeSAgbWQtcmFpc2VkIG1kLWh1ZS0yXCIgbmctY2xpY2s9XCJsb2dpbigpXCI+TG9naW48L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1jYXJkLWFjdGlvbnM+XFxuJyArXG4gICAgJyAgICA8L21kLWNhcmQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3Mvbm9ybWFsL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJzxjYW52YXMgYWxleGFuZHJhLXZpZXcgZGF0YS1pZD1cInZpZXdfMVwiIGFsZXhhbmRyYS1jb25maWc9XCJjb25maWdcIiBhbGV4YW5kcmEtc291cmNlPVwiZGF0YVwiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNjAwXCI+PC9jYW52YXM+XFxuJyArXG4gICAgJyAgPGRpdiBmbGV4PVwiMzVcIiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJ1x0PHA+WDoge3tzZWxlY3RlZEluZm9bMF18fFxcJ04vQVxcJ319PC9wPlxcbicgK1xuICAgICdcdDxwPlk6IHt7c2VsZWN0ZWRJbmZvWzFdIHx8IFxcJzBcXCd9fTwvcD5cXG4nICtcbiAgICAnXHQ8cD5aOiB7e3NlbGVjdGVkSW5mb1syXXx8XFwnTi9BXFwnfX08L3A+XFxuJyArXG4gICAgJyAgPC9kaXY+XFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL3BsYXllci9tYWluLmh0bWwnLFxuICAgICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgbmctaWY9XCJsb2FkaW5nXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XFxuJyArXG4gICAgJzxkaXYgY2xhc3M9XCJwbGF5ZXItY29udGVudFwiIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICcgICAgPGNhbnZhcyBhbGV4YW5kcmEtdmlldyBkYXRhLWlkPVwidmlld18xXCIgYWxleGFuZHJhLWNvbmZpZz1cImNvbmZpZ1wiIGFsZXhhbmRyYS1zb3VyY2U9XCJkYXRhXCIgd2lkdGg9XCI4MDBcIiBoZWlnaHQ9XCI2MDBcIj48L2NhbnZhcz5cXG4nICtcbiAgICAnICAgIDxkaXYgZmxleD1cIjM1XCIgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIHN0cmVjaFwiPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgZmxleCBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJwbGF5KClcIiBuZy1pZj1cIiFsb2FkaW5nXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktcGxheVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgUGxheVxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZtIGluIGRhdGFcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIHt7dm0ucG9zaXRpb259fVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxkaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1zbGlkZXItY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kLWJvZHktMVwiPnt7dmFsdWVzLmluZGV4fX08L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtc2xpZGVyIGNsYXNzPVwibWQtcHJpbWFyeVwiIG1kLWRpc2NyZXRlIHN0ZXA9XCIxXCIgbWluPVwiMVwiIG1heD1cIjMwXCIgYXJpYS1sYWJlbD1cInJhdGluZ1wiIG5nLXNob3c9XCIhbG9hZGluZ1wiIG5nLW1vZGVsPVwidmFsdWVzLmluZGV4XCIgbmctZGlzYWJsZWQ9XCJ0cnVlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLXNsaWRlcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1zbGlkZXItY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnJyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3Mvc2xpZGVyL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAgJG1kVG9hc3QsICRzdGF0ZSl7XHJcblxyXG4gICAgJHJvb3RTY29wZS5zaG93VG9hc3QgPSBmdW5jdGlvbihtc2cpIHtcclxuICAgICAgXHJcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgLnRleHRDb250ZW50KG1zZylcclxuICAgICAgICAgICAgLnRoZW1lKFwicGljay10aGVtZVwiKVxyXG4gICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICAkcm9vdFNjb3BlLmdvID0gZnVuY3Rpb24gKHN0YXRlLCBwYXJhbXMpIHtcclxuICAgICAgICAkc3RhdGUuZ28oc3RhdGUsIHBhcmFtcyk7XHJcbiAgICB9O1xyXG5cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGh0dHBQcm92aWRlciwgICRtZFRoZW1pbmdQcm92aWRlcil7XHJcblxyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgLnN0YXRlKFwibG9naW5cIiwge1xyXG4gICAgICAgIHVybDogXCIvbG9naW5cIixcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJhcHAucGxheWVyXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9sb2dpbi9tYWluLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnICAgICAgXHJcblxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHBcIiwge1xyXG4gICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvbWFpbi5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOiAnQXBwQ3RybCcsXHJcbiAgICAgICAgYWJzdHJhY3Q6dHJ1ZVxyXG5cclxuICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKFwiYXBwLm5vcm1hbFwiLCB7XHJcbiAgICAgICAgdXJsOiAnbm9ybWFsJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL25vcm1hbC9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ05vcm1hbEN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcbiAgICBcclxuICAgIC5zdGF0ZShcImFwcC5zbGlkZXJcIiwge1xyXG4gICAgICAgIHVybDogJ3NsaWRlcicsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9zbGlkZXIvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTbGlkZXJDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG4gICAgIC5zdGF0ZShcImFwcC5wbGF5ZXJcIiwge1xyXG4gICAgICAgIHVybDogJ3BsYXllcicsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wbGF5ZXIvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGF5ZXJDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKFwiYXBwLmhlaWdodG1hcFwiLCB7XHJcbiAgICAgICAgdXJsOiAnaGVpZ2h0LW1hcCcsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9oZWlnaHQtbWFwL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSGVpZ2h0TWFwQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfSlcclxuXHJcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2xvZ2luXCIpO1xyXG5cclxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhJbnRlcmNlcHRvcicpO1xyXG5cclxuICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgLmJhY2tncm91bmRQYWxldHRlKCd0ZWFsJywge1xyXG4gICAgICAnZGVmYXVsdCc6ICc1MDAnLCAvLyBieSBkZWZhdWx0IHVzZSBzaGFkZSA0MDAgZnJvbSB0aGUgcGluayBwYWxldHRlIGZvciBwcmltYXJ5IGludGVudGlvbnNcclxuICAgICAgJ2h1ZS0xJzogJzEwMCcsIC8vIHVzZSBzaGFkZSAxMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMTwvY29kZT4gY2xhc3NcclxuICAgICAgJ2h1ZS0yJzogJzYwMCcsIC8vIHVzZSBzaGFkZSA2MDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMjwvY29kZT4gY2xhc3NcclxuICAgICAgJ2h1ZS0zJzogJ0ExMDAnIC8vIHVzZSBzaGFkZSBBMTAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTM8L2NvZGU+IGNsYXNzXHJcbiAgICB9KVxyXG4gICAgLnByaW1hcnlQYWxldHRlKCdsaW1lJywge1xyXG4gICAgICAnZGVmYXVsdCc6ICc0MDAnLCAvLyBieSBkZWZhdWx0IHVzZSBzaGFkZSA0MDAgZnJvbSB0aGUgcGluayBwYWxldHRlIGZvciBwcmltYXJ5IGludGVudGlvbnNcclxuICAgICAgJ2h1ZS0xJzogJzEwMCcsIC8vIHVzZSBzaGFkZSAxMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMTwvY29kZT4gY2xhc3NcclxuICAgICAgJ2h1ZS0yJzogJzYwMCcsIC8vIHVzZSBzaGFkZSA2MDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMjwvY29kZT4gY2xhc3NcclxuICAgICAgJ2h1ZS0zJzogJ0ExMDAnIC8vIHVzZSBzaGFkZSBBMTAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTM8L2NvZGU+IGNsYXNzXHJcbiAgICB9KVxyXG4gICAgLy8gSWYgeW91IHNwZWNpZnkgbGVzcyB0aGFuIGFsbCBvZiB0aGUga2V5cywgaXQgd2lsbCBpbmhlcml0IGZyb20gdGhlXHJcbiAgICAvLyBkZWZhdWx0IHNoYWRlc1xyXG4gICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICdkZWZhdWx0JzogJzUwMCcgLy8gdXNlIHNoYWRlIDIwMCBmb3IgZGVmYXVsdCwgYW5kIGtlZXAgYWxsIG90aGVyIHNoYWRlcyB0aGUgc2FtZVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBDdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBPYXV0aFNlcnZpY2Upe1xyXG4gICAgXHJcbiAgICBcclxuICAgICRzY29wZS5vcGVuTWVudSA9IGZ1bmN0aW9uKCRtZE9wZW5NZW51LCBldikge1xyXG4gICAgICBvcmlnaW5hdG9yRXYgPSBldjtcclxuICAgICAgJG1kT3Blbk1lbnUoZXYpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAkc2NvcGUubG9nb3V0PWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgT2F1dGhTZXJ2aWNlLiBsb2dvdXQoKS5TZXNzaW9uKGZ1bmN0aW9uKCl7XHJcblx0XHQgZGVsZXRlTG9jYWwoXCJ1c2VyXCIpO1xyXG4gICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTsgICBcclxuXHR9LCBmdW5jdGlvbigpe30pO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignSGVpZ2h0TWFwQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29tcGFueVNlcnZpY2UsICRhbGV4YW5kcmFVdGlscyl7XHJcblxyXG4gICAgLy8kc2NvcGUubG9hZGluZz10cnVlO1xyXG5cclxuICAgICRzY29wZS5jb25maWcgPSB7XHJcbiAgICAgICAgdHlwZTogXCJjdXN0b21cIixcclxuICAgICAgICBheGlzOiB0cnVlLFxyXG4gICAgICAgIGF4aXNMZW5ndGg6IDUwMCxcclxuICAgICAgICBzdHJlYW1pbmc6IHRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDogWzAuMywgMC4zLCAwLjNdLFxyXG4gICAgICAgIGdyaWQ6IHRydWUsXHJcbiAgICAgICAgZ3JpZENvbmZpZzoge1xyXG4gICAgICAgICAgICBsaW5lczogNjAsXHJcbiAgICAgICAgICAgIGRpbTogNTAwXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgJHNjb3BlLmRhdGE9e1xyXG4gICAgICAgIG1lc2g6JGFsZXhhbmRyYVV0aWxzLlBsYW5lKHtcclxuICAgICAgICAgICAgaGVpZ2h0OjEwMCxcclxuICAgICAgICAgICAgd2lkdGg6MTAwLFxyXG4gICAgICAgICAgICB3X3M6NSxcclxuICAgICAgICAgICAgaF9zOjhcclxuICAgICAgICB9LCBmdW5jdGlvbihwcmV2LCBpdGVtLCBpbmRleCl7XHJcbiAgICAgICAgICAgIHZhciB4PWl0ZW0ueCwgeT0wLCB6PWl0ZW0ueTtcclxuXHJcbiAgICAgICAgICAgIGlmKCh4PDUwICYmIHg+LTUwKSYmKHo8NTAgJiYgej4tNTApKXtcclxuICAgICAgICAgICAgICAgIHk9Y2hhbmNlLmludGVnZXIoe21pbjowLCBtYXg6MzB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcHJldi5wdXNoKHgpO1xyXG4gICAgICAgICAgICBwcmV2LnB1c2goeSk7XHJcbiAgICAgICAgICAgIHByZXYucHVzaCh6KTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgcG9zaXRpb246WzUwLDAsNTBdXHJcbiAgICB9XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgT2F1dGhTZXJ2aWNlLCBSZXF1ZXN0U2VydmljZSl7XHJcbiAgICBcclxuXHJcbiAgICBcclxuICAgICRzY29wZS51c2VyID0ge2VtYWlsOlwiXCIsIHBhc3N3b3JkOlwiXCJ9O1xyXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzeW5jLndhdGVyZmFsbChbXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShuZXh0KXtcclxuICAgICAgICAgICAgICAgIHZhciBpc0VtYWlsPWVtcHR5T3JVbmRlZmluZWQoJHNjb3BlLnVzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUGFzc3dvcmQ9ZW1wdHlPclVuZGVmaW5lZCgkc2NvcGUudXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgICAgICBpZihpc0VtYWlsIHx8IGlzUGFzc3dvcmQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlzRW1haWwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KFwiRW1haWwgRW1wdHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzUGFzc3dvcmQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KFwiUGFzc3dvcmQgRW1wdHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5leHQpe1xyXG5cclxuICAgICAgICAgICAgICAgIE9hdXRoU2VydmljZS5sb2dpbigpLlNlc3Npb24oJHNjb3BlLnVzZXIsIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmVycm9yKXJldHVybiBuZXh0KHJlcy5lcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQobnVsbCwgcmVzLmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIFJlcXVlc3RTZXJ2aWNlLlNlcnZlck5vdEZvdW5kKG5leHQpKTtcclxuXHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JvbGUodXNlciwgbmV4dCl7XHJcbiAgICAgICAgICAgICAgICBPYXV0aFNlcnZpY2Uucm9sZSgpLmNoZWNrKHtyb2xlOnVzZXIucm9sZX0sIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmVycm9yKXJldHVybiBuZXh0KHJlcy5lcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhPT0yKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQobnVsbCwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3RTZXJ2aWNlLk5vUm9sZUF1dGhvcml6ZWQobmV4dCkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgUmVxdWVzdFNlcnZpY2UuU2VydmVyTm90Rm91bmQobmV4dCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgXSwgZnVuY3Rpb24oZXJyLCB1c2VyKXtcclxuICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcm9vdFNjb3BlLnNob3dUb2FzdChlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNhdmVMb2NhbChcInVzZXJcIiwgdXNlcik7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJhcHAubm9ybWFsXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignTm9ybWFsQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29tcGFueVNlcnZpY2Upe1xyXG5cclxuICAgICRzY29wZS5sb2FkaW5nPXRydWU7XHJcbiAgICAkc2NvcGUuZGF0YT1bXTtcclxuXHQkc2NvcGUuc2VsZWN0ZWRJbmZvPXt9O1xyXG5cdFxyXG4gICAgdmFyIGNhbGVuZGFyPVtdO1xyXG5cclxuICAgICRzY29wZS5jb25maWc9e1xyXG4gICAgICAgIGNvbG9ydHlwZTpcInZhcmlhYmxlXCIsXHJcbiAgICAgICAgYXhpczp0cnVlLFxyXG4gICAgICAgIGF4aXNMZW5ndGg6NTAwLFxyXG4gICAgICAgIHN0cmVhbWluZzp0cnVlLFxyXG4gICAgICAgIGJhY2tncm91bmQ6WzAuMywwLjMsMC4zXSxcclxuICAgICAgICBncmlkOnRydWUsXHJcbiAgICAgICAgZ3JpZENvbmZpZzp7XHJcbiAgICAgICAgICAgIGxpbmVzOjYwLFxyXG4gICAgICAgICAgICBkaW06NTAwXHJcbiAgICAgICAgfSxcclxuXHRcdHNlbGVjdG9yOnRydWUsIFxyXG4gICAgICAgIG9uU2VsZWN0ZWQ6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdGlmKGRhdGEpXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEluZm89ZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGZldGNoPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgQ29tcGFueVNlcnZpY2UuUGljaygpLnN0YXRzKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyPUltbXV0YWJsZS5MaXN0KHJlcy5kYXRhKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGE9Xy5jbG9uZShjYWxlbmRhci5nZXQoMjMpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmc9ZmFsc2U7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmZXRjaCgpO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1BsYXllckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbXBhbnlTZXJ2aWNlLCAkdGltZW91dCl7XHJcblxyXG4gICAgdmFyIFBMQVlFUl9USU1FPTIwMDA7XHJcbiAgICB2YXIgRU1QVFlfVElNRT01MDA7XHJcblxyXG4gICAgJHNjb3BlLmxvYWRpbmc9dHJ1ZTtcclxuICAgICRzY29wZS5kYXRhPVtdO1xyXG4gICAgdmFyIGNhbGVuZGFyPVtdO1xyXG4gICAgJHNjb3BlLnZhbHVlcz17XHJcbiAgICAgICAgaW5kZXg6MX07XHJcblxyXG4gICAgJHNjb3BlLmNvbmZpZz17XHJcbiAgICAgICAgY29sb3J0eXBlOlwidmFyaWFibGVcIixcclxuICAgICAgICBheGlzOnRydWUsXHJcbiAgICAgICAgYXhpc0xlbmd0aDo1MDAsXHJcbiAgICAgICAgc3RyZWFtaW5nOnRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDpbMC4zLDAuMywwLjNdLFxyXG4gICAgICAgIGdyaWQ6dHJ1ZSxcclxuICAgICAgICBncmlkQ29uZmlnOntcclxuICAgICAgICAgICAgbGluZXM6NjAsXHJcbiAgICAgICAgICAgIGRpbTo1MDBcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgQ29tcGFueVNlcnZpY2UuUGljaygpLnN0YXRzKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgY2FsZW5kYXI9SW1tdXRhYmxlLkxpc3QocmVzLmRhdGEpO1xyXG4gICAgICAgICRzY29wZS5kYXRhPV8uY2xvbmUoY2FsZW5kYXIuZ2V0KDApKTtcclxuICAgICAgICAkc2NvcGUubG9hZGluZz1mYWxzZTsgXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZUNhbGVuZGFyKHN0ZXAsYywgbiwgY2Ipe1xyXG5cclxuICAgICAgICB2YXIgaW50ZXJfZGF0YT1jLnJlZHVjZShmdW5jdGlvbihwcmV2LGl0ZW0sIGluZGV4KXtcclxuICAgICAgICAgICAgdmFyIGNfcG9zPWl0ZW0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBuX3Bvcz1uW2luZGV4XS5wb3NpdGlvbjtcclxuXHJcblxyXG4gICAgICAgICAgICBpZighXy5pc0VxdWFsKGNfcG9zLCBuX3Bvcykpe1xyXG4gICAgICAgICAgICAgICAgcHJldi5sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIHByZXYuY3VycmVudFtcInhfXCIraW5kZXhdPWNfcG9zWzBdO1xyXG4gICAgICAgICAgICAgICAgcHJldi5jdXJyZW50W1wieV9cIitpbmRleF09Y19wb3NbMV07XHJcbiAgICAgICAgICAgICAgICBwcmV2LmN1cnJlbnRbXCJ6X1wiK2luZGV4XT1jX3Bvc1syXTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcmV2Lm5leHRbXCJ4X1wiK2luZGV4XT1uX3Bvc1swXTtcclxuICAgICAgICAgICAgICAgIHByZXYubmV4dFtcInlfXCIraW5kZXhdPW5fcG9zWzFdO1xyXG4gICAgICAgICAgICAgICAgcHJldi5uZXh0W1wiel9cIitpbmRleF09bl9wb3NbMl07XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgY3VycmVudDp7fSxcclxuICAgICAgICAgICAgbmV4dDp7fSxcclxuICAgICAgICAgICAgbGVuZ3RoOjBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudmFsdWVzLmluZGV4PXN0ZXArMTtcclxuICAgICAgICBjb25zb2xlLmxvZyhpbnRlcl9kYXRhKTtcclxuXHJcblxyXG5cclxuICAgICAgICBpZihpbnRlcl9kYXRhLmxlbmd0aD4wKXtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKGludGVyX2RhdGEuY3VycmVudClcclxuICAgICAgICAgICAgLnRvKGludGVyX2RhdGEubmV4dCwgUExBWUVSX1RJTUUpXHJcbiAgICAgICAgICAgIC5vblVwZGF0ZShmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuJCRwaGFzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpeyBcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJfYXJyYXk9T2JqZWN0LmtleXMoc2VsZikucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlPXNlbGZbaXRlbV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5cz1pdGVtLnNwbGl0KFwiX1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbT1rZXlzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWtleXNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrZXlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XT1wcmV2W2luZGV4XXx8e31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XVtwYXJhbV09dmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0se30pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW50ZXJfYXJyYXkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZV9kYXRhPV8uY2xvbmUoJHNjb3BlLmRhdGEpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGludGVyX2FycmF5KS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlPWludGVyX2FycmF5W2l0ZW1dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lX2RhdGFbaXRlbV0ucG9zaXRpb249W3ZhbHVlLngsIHZhbHVlLnksIHZhbHVlLnpdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGE9Y2xvbmVfZGF0YTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uQ29tcGxldGUoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgaW50ZXJwb2xhdGlvbiggVFdFRU4uSW50ZXJwb2xhdGlvbi5CZXppZXIgKS5lYXNpbmcoIFRXRUVOLkVhc2luZy5MaW5lYXIuTm9uZSApLmRlbGF5KCAyNTAgKVxyXG4gICAgICAgICAgICAuc3RhcnQoKVxyXG5cclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoY2IsIEVNUFRZX1RJTUUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgJHNjb3BlLnBsYXk9ZnVuY3Rpb24oKXtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGl0ZXIoaSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpO1xyXG5cclxuICAgICAgICAgICAgaWYoaTxjYWxlbmRhci5jb3VudCgpLTEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQ9Xy5jbG9uZShjYWxlbmRhci5nZXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQ9Xy5jbG9uZShjYWxlbmRhci5nZXQoaSsxKSk7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlQ2FsZW5kYXIoaSwgY3VycmVudCwgbmV4dCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpdGVyKGkrMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlcy5pbmRleD1jYWxlbmRhci5jb3VudCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlcigwKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShJbnRlcnBvbGF0aW9uVGltZSk7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIEludGVycG9sYXRpb25UaW1lKHRpbWUpIHtcclxuXHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEludGVycG9sYXRpb25UaW1lKTtcclxuICAgICAgICBUV0VFTi51cGRhdGUodGltZSk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdTbGlkZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgQ29tcGFueVNlcnZpY2UsICRhbGV4YW5kcmFVdGlscykge1xyXG5cclxuICAgICAgICB2YXIgcHJvZmlsZTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuXHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuY29uZmlnID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcImN1c3RvbVwiLFxyXG4gICAgICAgICAgICBheGlzOiB0cnVlLFxyXG4gICAgICAgICAgICBheGlzTGVuZ3RoOiA1MDAsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZzogdHJ1ZSxcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogWzAuMywgMC4zLCAwLjNdLFxyXG4gICAgICAgICAgICBncmlkOiB0cnVlLFxyXG4gICAgICAgICAgICBncmlkQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICBsaW5lczogNjAsXHJcbiAgICAgICAgICAgICAgICBkaW06IDUwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHZhciBBcHBseVRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSAkYWxleGFuZHJhVXRpbHMuVGV4dCh0ZXh0LCB7XHJcbiAgICAgICAgICAgICAgICBzaXplOiAxMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMC41LFxyXG4gICAgICAgICAgICAgICAgY3VydmVTZWdtZW50czogMzAsXHJcbiAgICAgICAgICAgICAgICBiZXZlbEVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBiZXZlbFRoaWNrbmVzczogMS41LFxyXG4gICAgICAgICAgICAgICAgYmV2ZWxTaXplOiAwLjVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzaDogbW9kZWwsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogWzUwLCA1MCwxNTBdLFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246e1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlOjQ1LFxyXG4gICAgICAgICAgICAgICAgICAgIGF4aXM6WzAsMSwwXVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgR2V0UHJvZmlsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQ29tcGFueVNlcnZpY2UuUHJvZmlsZSgpLmdldChmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yKSByZXR1cm4gY29uc29sZS5sb2cocmVzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgIHByb2ZpbGUgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID1mYWxzZTtcclxuICAgICAgICAgICAgICAgIEFwcGx5VGV4dChwcm9maWxlLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHZXRQcm9maWxlKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQXBpU2VydmljZVwiLCBmdW5jdGlvbigkcmVzb3VyY2UsICRsb2NhdGlvbil7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAvL2VudjokbG9jYXRpb24uYWJzVXJsKCkuaW5kZXhPZihcImxvY2FsaG9zdFwiKT09LTE/XCJwcm9kXCI6XCJkZXZcIixcclxuICAgICAgICBlbnY6XCJwcm9kXCIsXHJcbiAgICAgICAgcHJvZDp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cHNcIixcclxuICAgICAgICAgICAgaG9zdDpcInBpY2t5b3VyZGF5Lmhlcm9rdWFwcC5jb21cIixcclxuICAgICAgICAgICAgcG9ydDpcIlwiLFxyXG4gICAgICAgICAgICByb290OlwiYXBpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldjp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cFwiLFxyXG4gICAgICAgICAgICBob3N0OlwibG9jYWxob3N0XCIsXHJcbiAgICAgICAgICAgIHBvcnQ6XCI1MDAwXCIsXHJcbiAgICAgICAgICAgIHJvb3Q6XCJhcGlcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldEFwaVBhdGg6ZnVuY3Rpb24ocGF0aCl7XHJcbiAgICAgICAgICAgIHZhciBhcGk9dGhpc1t0aGlzLmVudl07XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkucHJvdG9jb2wrXCI6Ly9cIithcGkuaG9zdCsoYXBpLnBvcnQhPT1cIlwiPyhcIjpcIithcGkucG9ydCk6XCJcIikrXCIvXCIrYXBpLnJvb3QrXCIvXCIrcGF0aDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXN0OmZ1bmN0aW9uKHBhdGgsIG1ldGhvZHMsIGRlZmF1bHRQYXJhbXMpe1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2U9JHJlc291cmNlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBcGlQYXRoKHBhdGgpLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhcmFtcyB8fCB7fSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgfHwge31cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQ29tcGFueVNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYmFzZTpcImNvbXBhbnlcIixcclxuICAgICAgICBcclxuICAgICAgICBQaWNrOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL3N0YXRzUGlja3NcIiwge1xyXG4gICAgICAgICAgICAgICAgc3RhdHM6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICBQcm9maWxlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9wcm9maWxlXCIse1xyXG4gICAgICAgIFx0XHRnZXQ6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgXHR9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgIH07XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJBdXRoSW50ZXJjZXB0b3JcIiwgZnVuY3Rpb24oJHEsICRsb2NhdGlvbil7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZyl7XHJcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlcj1nZXRKU09OTG9jYWwoXCJ1c2VyXCIpO1xyXG4gICAgICAgICAgICB2YXIgdXNlcj1nZXRKU09OTG9jYWwoXCJ1c2VyXCIpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gJiYgdXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHVzZXIudG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWVzdEVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICdFUlJPUicpIHsgLy9Gb3JjZSBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKXtcclxuICAgICAgICAgICAgaWYocmVqZWN0aW9uLnN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZSBhY2Nlc28nKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51c2VyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJPYXV0aFNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYmFzZTpcIm9hdXRoXCIsXHJcbiAgICAgICAgbG9naW46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2Use1xyXG4gICAgICAgICAgICAgICAgU2Vzc2lvbjp7bWV0aG9kOlwiUE9TVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nb3V0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL2xvZ291dFwiLCB7XHJcbiAgICAgICAgICAgICAgICBTZXNzaW9uOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvbGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvcm9sZS86cm9sZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgIGNoZWNrOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOntyb2xlOlwiQHJvbGVcIn19LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxufSk7XHJcblxyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiUmVxdWVzdFNlcnZpY2VcIiwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgXHJcbiAgICAgICAgU2VydmVyTm90Rm91bmQ6IENsb3N1cmVNZXNzYWdlKFwiU2VydmVyIE5vdCBGb3VuZFwiKSxcclxuXHJcbiAgICAgICAgTm9Sb2xlQXV0aG9yaXplZDogQ2xvc3VyZU1lc3NhZ2UoXCJObyBSb2xlIEF1dGhvcml6ZWRcIiksXHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgIH07XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
