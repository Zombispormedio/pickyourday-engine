function saveLocal(n,e){localStorage[n]=JSON.stringify(e)}function getJSONLocal(n){var e=null;try{var t=localStorage[n];void 0!==t&&(e=JSON.parse(t))}catch(o){}return e}function deleteLocal(n){localStorage.removeItem(n)}function ClosureMessage(n){return function(e){return function(){e(n)}}}function emptyOrUndefined(n){return void 0==n||""===n}function RandPosition(n){var e=n||{min:0,max:100},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a]}function RandColor(n){var e=n||{min:0,max:1,fixed:2},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a,1]}function RandSize(n){var e=n||{min:.1,max:2,fixed:1},t=chance.floating(e);return[t,t,t]}function RandRotation(n){var e=Number(chance.bool()),t=Number(chance.bool()),o=Number(chance.bool());return{angle:chance.integer({min:0,max:360}),axis:[e,t,o]}}function generate(n){return function(){var e=chance.integer({min:0,max:100});return Array.apply(0,Array(e)).map(n)}}var app=angular.module("Application",["ui.router","ngResource","ngAnimate","ngMaterial","alexandra"]);!function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/main.html",'\n<md-toolbar class="md-accent md-whiteframe-1dp">\n    <div class="md-toolbar-tools">\n        <md-menu flex="5">\n            <md-button aria-label="Type Stats" class="md-icon-button button-stats" ng-click="openMenu($mdOpenMenu, $event)">\n                <md-icon md-menu-origin md-font-icon="mdi-chart-areaspline" class="mdi"></md-icon>\n            </md-button>\n            <md-menu-content width="4">\n                <md-menu-item>\n                    <md-button ui-sref="app.normal">\n                        <md-icon md-font-icon="mdi-chart-bubble" class="mdi"></md-icon>\n                        Normal\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.slider">\n                        <md-icon md-font-icon="mdi-clock-start" class="mdi"></md-icon>\n                        Slider\n                    </md-button>\n                </md-menu-item>\n                <md-menu-divider></md-menu-divider>\n                <md-menu-item>\n                    <md-button  ui-sref="app.player">\n                        <md-icon md-font-icon="mdi-play-box-outline" class="mdi"></md-icon>\n                        Player\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.heightmap">\n                        <md-icon md-font-icon="mdi-airplane-landing" class="mdi"></md-icon>\n                        Height Map\n                    </md-button>\n                </md-menu-item>\n            </md-menu-content>\n        </md-menu>\n        \n        <h2>\n            <span>Pickyourday 3D</span>\n        </h2>\n        <span flex></span>\n        <md-button aria-label="logout" class="md-icon-button button-power" style="margin-right: 0px;" ng-click="logout()">\n            <md-icon md-font-icon="mdi-power" class="mdi"></md-icon>\n        </md-button>\n    </div>\n</md-toolbar>\n\n\n<div ui-view="content"></div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/height-map/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div>\n            <md-slider-container>\n               \n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="index" ng-change="select()">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/login/main.html",'<div layout="column" layout-align="center center">\n\n\n\n    <md-card>\n        <md-card-title>\n            <md-card-title-text>\n                <span class="md-headline">Pickyourday 3D</span>\n\n            </md-card-title-text>\n\n        </md-card-title>\n        <md-card-content layout="column">\n\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Email</label>\n                <input ng-model="user.email" type="email">\n            </md-input-container>\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Password</label>\n                <input ng-model="user.password" type="password">\n            </md-input-container>\n        </md-card-content>\n        <md-card-actions layout="row" layout-align="center center">\n            <md-button class="md-primary  md-raised md-hue-2" ng-click="login()">Login</md-button>\n\n        </md-card-actions>\n    </md-card>\n\n\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/normal/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n<canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n  <div flex="35" layout="column" layout-align="center center">\n	<p>X: {{selectedInfo[0]||\'N/A\'}}</p>\n	<p>Y: {{selectedInfo[1] || \'0\'}}</p>\n	<p>Z: {{selectedInfo[2]||\'N/A\'}}</p>\n  </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/player/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div flex layout="row" layout-align="center center">\n            <md-button ng-click="play()" ng-if="!loading&&!playing">\n                <md-icon md-font-icon="mdi-play" class="mdi"></md-icon>\n                Play\n            </md-button>\n            \n            <md-button ng-click="stop()" ng-if="playing">\n                <md-icon md-font-icon="mdi-stop" class="mdi"></md-icon>\n                Stop\n            </md-button>\n        </div>\n\n        <div>\n            <md-slider-container>\n               <span class="md-body-1">{{values.index}}</span>\n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="values.index" ng-disabled="true">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n\n</div>\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/slider/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n</div>')}])}(),angular.module("Application").run(["$rootScope","$mdToast","$state",function(n,e,t){n.showToast=function(n){e.show(e.simple().textContent(n).theme("pick-theme").hideDelay(3e3))},n.go=function(n,e){t.go(n,e)}}]),angular.module("Application").config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider",function(n,e,t,o){n.state("login",{url:"/login",onEnter:["$rootScope",function(n){getJSONLocal("user")&&n.go("app.player")}],templateUrl:"/views/login/main.html",controller:"LoginCtrl"}).state("app",{url:"/",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],templateUrl:"/views/main.html",controller:"AppCtrl","abstract":!0}).state("app.normal",{url:"normal",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/normal/main.html",controller:"NormalCtrl"}}}).state("app.slider",{url:"slider",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/slider/main.html",controller:"SliderCtrl"}}}).state("app.player",{url:"player",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/player/main.html",controller:"PlayerCtrl"}}}).state("app.heightmap",{url:"height-map",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/height-map/main.html",controller:"HeightMapCtrl"}}}),e.otherwise("/login"),t.interceptors.push("AuthInterceptor"),o.theme("default").backgroundPalette("teal",{"default":"500","hue-1":"100","hue-2":"600","hue-3":"A100"}).primaryPalette("lime",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("teal",{"default":"500"})}]),angular.module("Application").controller("AppCtrl",["$rootScope","$scope","OauthService",function(n,e,t){e.openMenu=function(n,e){originatorEv=e,n(e)},e.logout=function(){t.logout().Session(function(){deleteLocal("user"),n.go("login")},function(){})}}]),angular.module("Application").controller("HeightMapCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){n.loading=!0,n.config={type:"custom",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},light:{direction:[-1,-1,-1]},colortype:"variable"};var o={};n.index=1,e.Pick().stats(function(e){n.loading=!1,o=e.data.plane,i()}),n.select=function(){i()};var a=RandColor(),i=function(){var e=o.vertices,i=n.index-1,r=e[i];n.data={mesh:t.Plane({height:o.height,width:o.width,w_s:o.vWidth,h_s:o.vHeight},function(n,e,t){var o=e.x,a=e.z,i=e.y,l=_.find(r,function(n){return n.key==t});return l&&(a=l.y),n.push(o),n.push(a),n.push(i),n}),position:[50,0,50],color:a}}}]),angular.module("Application").controller("LoginCtrl",["$rootScope","$scope","OauthService","RequestService",function(n,e,t,o){e.user={email:"",password:""},e.login=function(){async.waterfall([function(n){var t=emptyOrUndefined(e.user.email),o=emptyOrUndefined(e.user.password);t||o?t?n("Email Empty"):o&&n("Password Empty"):n()},function(n){t.login().Session(e.user,function(e){return e.error?n(e.error):void n(null,e.data)},o.ServerNotFound(n))},function(n,e){t.role().check({role:n.role},function(t){return t.error?e(t.error):void(2==t.data?e(null,n):o.NoRoleAuthorized(e)())},o.ServerNotFound(e))}],function(e,t){return e?n.showToast(e):(saveLocal("user",t),void n.go("app.normal"))})}}]),angular.module("Application").controller("NormalCtrl",["$scope","CompanyService",function(n,e){n.loading=!0,n.data=[],n.selectedInfo={};var t=[];n.config={colortype:"variable",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},selector:!0,onSelected:function(e){e&&(n.selectedInfo=e)}};var o=function(){e.Pick().stats(function(e){t=Immutable.List(e.data.stats),n.data=_.clone(t.get(23)),n.loading=!1})};o()}]),angular.module("Application").controller("PlayerCtrl",["$scope","CompanyService","$timeout",function(n,e,t){function o(e,o,a,l){var d=o.reduce(function(n,e,t){var o=e.position,i=a[t].position;return _.isEqual(o,i)||(n.length++,n.current["x_"+t]=o[0],n.current["y_"+t]=o[1],n.current["z_"+t]=o[2],n.next["x_"+t]=i[0],n.next["y_"+t]=i[1],n.next["z_"+t]=i[2]),n},{current:{},next:{},length:0});n.values.index=e+1,d.length>0?c=new TWEEN.Tween(d.current).to(d.next,i).onUpdate(function(){var e=this;n.$$phase||n.$apply(function(){if(0==n.playing)return void c.stop();var t=Object.keys(e).reduce(function(n,t){var o=e[t],a=t.split("_"),i=a[0],r=a[1];return n[r]=n[r]||{},n[r][i]=o,n},{}),o=_.cloneDeep(n.data);Object.keys(t).forEach(function(n){var e=t[n];o[n].position=[e.x,e.y,e.z]}),n.data=o})}).onComplete(function(){l()}).onStop(function(){console.log("hello"),l()}).interpolation(TWEEN.Interpolation.Bezier).easing(TWEEN.Easing.Linear.None).delay(250).start():t(l,r)}function a(n){requestAnimationFrame(a),TWEEN.update(n)}var i=2e3,r=500;n.loading=!0,n.playing=!1,n.data=[];var l=[],c=null;n.values={index:1},n.config={colortype:"variable",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}},e.Pick().stats(function(e){l=Immutable.List(e.data.stats),n.data=_.cloneDeep(l.get(0)),n.loading=!1}),n.play=function(){function e(t){if(t<l.count()-1&&n.playing){var a=_.cloneDeep(l.get(t)),i=_.cloneDeep(l.get(t+1));o(t,a,i,function(){e(t+1)})}else n.playing=!1,n.values.index=1,n.data=[],n.data=_.cloneDeep(l.get(0))}n.playing=!0,e(0)},n.stop=function(){n.playing=!1},requestAnimationFrame(a)}]),angular.module("Application").controller("SliderCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){var o;n.loading=!0,n.config={type:"custom",engine:"phong_positional",colortype:"variable",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}};var a=RandColor(),i=function(e){var o=t.Text(e,{size:10,height:.5,curveSegments:30,bevelEnabled:!0,bevelThickness:1.5,bevelSize:.5});n.data={mesh:o,position:[50,50,150],rotation:{angle:45,axis:[0,1,0]},color:a}},r=function(){e.Profile().get(function(e){return e.error?console.log(e.error):(o=e.data,n.loading=!1,void i(o.name))})};r()}]),angular.module("Application").factory("ApiService",["$resource","$location",function(n,e){return{env:"prod",prod:{protocol:"https",host:"pickyourday.herokuapp.com",port:"",root:"api"},dev:{protocol:"http",host:"localhost",port:"5000",root:"api"},getApiPath:function(n){var e=this[this.env];return e.protocol+"://"+e.host+(""!==e.port?":"+e.port:"")+"/"+e.root+"/"+n},rest:function(e,t,o){var a=n(this.getApiPath(e),o||{},t||{});return a}}}]),angular.module("Application").factory("CompanyService",["ApiService",function(n){return{base:"company",Pick:function(){return n.rest(this.base+"/statsPicks",{stats:{method:"GET",params:{}}})},Profile:function(){return n.rest(this.base+"/profile",{get:{method:"GET",params:{}}})}}}]),angular.module("Application").factory("AuthInterceptor",["$q","$location",function(n,e){return{request:function(n){n.headers=n.headers||{};var e=getJSONLocal("user"),e=getJSONLocal("user");return!n.headers.Authorization&&e&&(n.headers.Authorization=e.token),n},requestError:function(e){return n.reject(e)},response:function(e){return"ERROR"===e.data.status?n.reject(e):e||n.when(e)},responseError:function(t){return 403===t.status?(console.error("Error de acceso"),localStorage.user="",void e.path("/")):n.reject(t)}}}]),angular.module("Application").factory("OauthService",["ApiService",function(n){return{base:"oauth",login:function(){return n.rest(this.base,{Session:{method:"POST",params:{}}})},logout:function(){return n.rest(this.base+"/logout",{Session:{method:"GET",params:{}}})},role:function(){return n.rest(this.base+"/role/:role",{check:{method:"GET",params:{role:"@role"}}})}}}]),angular.module("Application").factory("RequestService",function(){return{ServerNotFound:ClosureMessage("Server Not Found"),NoRoleAuthorized:ClosureMessage("No Role Authorized")}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdXRpbHMuanMiLCJhcHBsaWNhdGlvbi5qcyIsInRlbXBsYXRlLWNhY2hlLmpzIiwiY29uZmlnL2Jvb3QuanMiLCJjb25maWcvZW52aXJvbm1lbnQuanMiLCJjb250cm9sbGVycy9hcHBsaWNhdGlvbl9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaGVpZ2h0X21hcF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL25vcm1hbF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGxheWVyX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zbGlkZXJfY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvYXBpLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzL2NvbXBhbnlfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvaW50ZXJjZXB0b3Jfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvb2F1dGguc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvcmVxdWVzdF9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNhdmVMb2NhbCIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0SlNPTkxvY2FsIiwicmVzdWx0Iiwic3RyX2pzb24iLCJ1bmRlZmluZWQiLCJwYXJzZSIsImUiLCJkZWxldGVMb2NhbCIsInJlbW92ZUl0ZW0iLCJDbG9zdXJlTWVzc2FnZSIsIm1lc3NhZ2UiLCJmbiIsImVtcHR5T3JVbmRlZmluZWQiLCJ2YWx1ZSIsIlJhbmRQb3NpdGlvbiIsInYiLCJyYW5nZSIsIm1pbiIsIm1heCIsIngiLCJjaGFuY2UiLCJmbG9hdGluZyIsInkiLCJ6IiwiUmFuZENvbG9yIiwicmFuZ2VDb2xvciIsImZpeGVkIiwiciIsImciLCJiIiwiUmFuZFNpemUiLCJzaXplIiwiUmFuZFJvdGF0aW9uIiwiTnVtYmVyIiwiYm9vbCIsImFuZ2xlIiwiaW50ZWdlciIsImF4aXMiLCJnZW5lcmF0ZSIsImNvdW50IiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsIiRzdGF0ZSIsInNob3dUb2FzdCIsIm1zZyIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInRoZW1lIiwiaGlkZURlbGF5IiwiZ28iLCJzdGF0ZSIsInBhcmFtcyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInVybCIsIm9uRW50ZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhYnN0cmFjdCIsInZpZXdzIiwiY29udGVudCIsIm90aGVyd2lzZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImh1ZS0yIiwiaHVlLTMiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCIkc2NvcGUiLCJPYXV0aFNlcnZpY2UiLCJvcGVuTWVudSIsIiRtZE9wZW5NZW51IiwiZXYiLCJvcmlnaW5hdG9yRXYiLCJsb2dvdXQiLCJTZXNzaW9uIiwiQ29tcGFueVNlcnZpY2UiLCIkYWxleGFuZHJhVXRpbHMiLCJsb2FkaW5nIiwidHlwZSIsImVuZ2luZSIsImF4aXNMZW5ndGgiLCJzdHJlYW1pbmciLCJiYWNrZ3JvdW5kIiwiZ3JpZCIsImdyaWRDb25maWciLCJsaW5lcyIsImRpbSIsImxpZ2h0IiwiZGlyZWN0aW9uIiwiY29sb3J0eXBlIiwicGxhbmUiLCJpbmRleCIsIlBpY2siLCJzdGF0cyIsInJlcyIsImFwcGx5UGxhbmUiLCJzZWxlY3QiLCJjb2xvciIsImNhbGVuZGFyIiwidmVydGljZXMiLCJjdXJyZW50X2RheSIsIm1lc2giLCJQbGFuZSIsImhlaWdodCIsIndpZHRoIiwid19zIiwidldpZHRoIiwiaF9zIiwidkhlaWdodCIsInByZXYiLCJpdGVtIiwiY19wIiwiXyIsImZpbmQiLCJpIiwicG9zaXRpb24iLCJSZXF1ZXN0U2VydmljZSIsInVzZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJhc3luYyIsIndhdGVyZmFsbCIsIm5leHQiLCJpc0VtYWlsIiwiaXNQYXNzd29yZCIsImVycm9yIiwiU2VydmVyTm90Rm91bmQiLCJyb2xlIiwiY2hlY2siLCJOb1JvbGVBdXRob3JpemVkIiwiZXJyIiwic2VsZWN0ZWRJbmZvIiwic2VsZWN0b3IiLCJvblNlbGVjdGVkIiwiZmV0Y2giLCJJbW11dGFibGUiLCJMaXN0IiwiY2xvbmUiLCJnZXQiLCIkdGltZW91dCIsImFuaW1hdGVDYWxlbmRhciIsInN0ZXAiLCJjIiwibiIsImNiIiwiaW50ZXJfZGF0YSIsInJlZHVjZSIsImNfcG9zIiwibl9wb3MiLCJpc0VxdWFsIiwibGVuZ3RoIiwiY3VycmVudCIsInZhbHVlcyIsInR3ZWVuIiwiVFdFRU4iLCJUd2VlbiIsInRvIiwiUExBWUVSX1RJTUUiLCJvblVwZGF0ZSIsInNlbGYiLCJ0aGlzIiwiJCRwaGFzZSIsIiRhcHBseSIsInBsYXlpbmciLCJzdG9wIiwiaW50ZXJfYXJyYXkiLCJPYmplY3QiLCJrZXlzIiwic3BsaXQiLCJwYXJhbSIsImNsb25lX2RhdGEiLCJjbG9uZURlZXAiLCJmb3JFYWNoIiwib25Db21wbGV0ZSIsIm9uU3RvcCIsImNvbnNvbGUiLCJsb2ciLCJpbnRlcnBvbGF0aW9uIiwiSW50ZXJwb2xhdGlvbiIsIkJlemllciIsImVhc2luZyIsIkVhc2luZyIsIkxpbmVhciIsIk5vbmUiLCJkZWxheSIsInN0YXJ0IiwiRU1QVFlfVElNRSIsIkludGVycG9sYXRpb25UaW1lIiwidGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZSIsInBsYXkiLCJpdGVyIiwicHJvZmlsZSIsIkFwcGx5VGV4dCIsInRleHQiLCJtb2RlbCIsIlRleHQiLCJjdXJ2ZVNlZ21lbnRzIiwiYmV2ZWxFbmFibGVkIiwiYmV2ZWxUaGlja25lc3MiLCJiZXZlbFNpemUiLCJyb3RhdGlvbiIsIkdldFByb2ZpbGUiLCJQcm9maWxlIiwibmFtZSIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCIkbG9jYXRpb24iLCJlbnYiLCJwcm9kIiwicHJvdG9jb2wiLCJob3N0IiwicG9ydCIsInJvb3QiLCJkZXYiLCJnZXRBcGlQYXRoIiwicGF0aCIsImFwaSIsInJlc3QiLCJtZXRob2RzIiwiZGVmYXVsdFBhcmFtcyIsInJlc291cmNlIiwiQXBpU2VydmljZSIsImJhc2UiLCJtZXRob2QiLCIkcSIsInJlcXVlc3QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInRva2VuIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVqZWN0IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJ3aGVuIiwicmVzcG9uc2VFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsV0FBQUMsRUFBQUMsR0FDQUMsYUFBQUYsR0FBQUcsS0FBQUMsVUFBQUgsR0FHQSxRQUFBSSxjQUFBTCxHQUVBLEdBQUFNLEdBQUEsSUFDQSxLQUNBLEdBQUFDLEdBQUFMLGFBQUFGLEVBRUFRLFVBQUFELElBRUFELEVBQUFILEtBQUFNLE1BQUFGLElBR0EsTUFBQUcsSUFJQSxNQUFBSixHQUdBLFFBQUFLLGFBQUFYLEdBQ0FFLGFBQUFVLFdBQUFaLEdBR0EsUUFBQWEsZ0JBQUFDLEdBQ0EsTUFBQSxVQUFBQyxHQUNBLE1BQUEsWUFDQUEsRUFBQUQsS0FLQSxRQUFBRSxrQkFBQUMsR0FDQSxNQUFBLFNBQUFBLEdBQUEsS0FBQUEsRUFJQSxRQUFBQyxjQUFBQyxHQUNBLEdBQUFDLEdBQUFELElBQUFFLElBQUEsRUFBQUMsSUFBQSxLQUNBQyxFQUFBQyxPQUFBQyxTQUFBTCxHQUNBTSxFQUFBRixPQUFBQyxTQUFBTCxHQUNBTyxFQUFBSCxPQUFBQyxTQUFBTCxFQUNBLFFBQUFHLEVB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QUFBdkksZUFBQSxvQkFFQTBJLGlCQUFBMUksZUFBQSIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2F2ZUxvY2FsKGtleSwgZGF0YSkge1xyXG4gICAgbG9jYWxTdG9yYWdlW2tleV0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SlNPTkxvY2FsKGtleSkge1xyXG5cclxuICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgc3RyX2pzb24gPSBsb2NhbFN0b3JhZ2Vba2V5XTtcclxuXHJcbiAgICAgICAgaWYgKHN0cl9qc29uIT09dW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHN0cl9qc29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVMb2NhbChrZXkpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENsb3N1cmVNZXNzYWdlKG1lc3NhZ2Upe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZuKXtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZm4obWVzc2FnZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtcHR5T3JVbmRlZmluZWQodmFsdWUpe1xyXG4gICAgcmV0dXJuIHZhbHVlPT12b2lkIDAgfHwgdmFsdWU9PT1cIlwiO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUmFuZFBvc2l0aW9uKHYpIHtcclxuICAgIHZhciByYW5nZSA9IHYgfHwgeyBtaW46IDAsIG1heDogMTAwIH07XHJcbiAgICB2YXIgeCA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZSk7XHJcbiAgICB2YXIgeSA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZSk7XHJcbiAgICB2YXIgeiA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZSk7XHJcbiAgICByZXR1cm4gW3gsIHksIHpdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSYW5kQ29sb3Iodikge1xyXG4gICAgdmFyIHJhbmdlQ29sb3IgPSB2IHx8IHsgbWluOiAwLCBtYXg6IDEsIGZpeGVkOiAyIH07XHJcbiAgICB2YXIgciA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZUNvbG9yKTtcclxuICAgIHZhciBnID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlQ29sb3IpO1xyXG4gICAgdmFyIGIgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2VDb2xvcik7XHJcbiAgICByZXR1cm4gW3IsIGcsIGIsIDFdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSYW5kU2l6ZSh2KSB7XHJcbiAgICB2YXIgcmFuZ2UgPSB2IHx8IHsgbWluOiAwLjEsIG1heDogMiwgZml4ZWQ6IDEgfTtcclxuICAgIHZhciBzaXplID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlKTtcclxuICAgIHJldHVybiBbc2l6ZSwgc2l6ZSwgc2l6ZV07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBSYW5kUm90YXRpb24odil7XHJcbiAgICB2YXIgcmFuZ2UgPSB2IHx8IHsgbWluOiAwLCBtYXg6IDM2MH07XHJcbiAgICB2YXIgeD1OdW1iZXIoY2hhbmNlLmJvb2woKSk7XHJcbiAgICB2YXIgeT1OdW1iZXIoY2hhbmNlLmJvb2woKSk7XHJcbiAgICB2YXIgej1OdW1iZXIoY2hhbmNlLmJvb2woKSk7XHJcbiAgICByZXR1cm4gIHtcclxuICAgICAgICBhbmdsZTpjaGFuY2UuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAzNjB9KSxcclxuICAgICAgICBheGlzOlt4LHksel1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlKGZuKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gY2hhbmNlLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5hcHBseSgwLCBBcnJheShjb3VudCkpLm1hcChmbik7XHJcbiAgICB9O1xyXG59IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFsndWkucm91dGVyJywgXCJuZ1Jlc291cmNlXCIsJ25nQW5pbWF0ZScsICduZ01hdGVyaWFsJywgJ2FsZXhhbmRyYSddKTsiLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvbWFpbi5odG1sJyxcbiAgICAnXFxuJyArXG4gICAgJzxtZC10b29sYmFyIGNsYXNzPVwibWQtYWNjZW50IG1kLXdoaXRlZnJhbWUtMWRwXCI+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwibWQtdG9vbGJhci10b29sc1wiPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1tZW51IGZsZXg9XCI1XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1idXR0b24gYXJpYS1sYWJlbD1cIlR5cGUgU3RhdHNcIiBjbGFzcz1cIm1kLWljb24tYnV0dG9uIGJ1dHRvbi1zdGF0c1wiIG5nLWNsaWNrPVwib3Blbk1lbnUoJG1kT3Blbk1lbnUsICRldmVudClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLW1lbnUtb3JpZ2luIG1kLWZvbnQtaWNvbj1cIm1kaS1jaGFydC1hcmVhc3BsaW5lXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtbWVudS1jb250ZW50IHdpZHRoPVwiNFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bWQtYnV0dG9uIHVpLXNyZWY9XCJhcHAubm9ybWFsXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1jaGFydC1idWJibGVcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgTm9ybWFsXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5zbGlkZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLWNsb2NrLXN0YXJ0XCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIFNsaWRlclxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1kaXZpZGVyPjwvbWQtbWVudS1kaXZpZGVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bWQtYnV0dG9uICB1aS1zcmVmPVwiYXBwLnBsYXllclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktcGxheS1ib3gtb3V0bGluZVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICBQbGF5ZXJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bWQtYnV0dG9uICB1aS1zcmVmPVwiYXBwLmhlaWdodG1hcFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktYWlycGxhbmUtbGFuZGluZ1wiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICBIZWlnaHQgTWFwXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1tZW51LWNvbnRlbnQ+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1tZW51PlxcbicgK1xuICAgICcgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgIDxoMj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4+UGlja3lvdXJkYXkgM0Q8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPC9oMj5cXG4nICtcbiAgICAnICAgICAgICA8c3BhbiBmbGV4Pjwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtYnV0dG9uIGFyaWEtbGFiZWw9XCJsb2dvdXRcIiBjbGFzcz1cIm1kLWljb24tYnV0dG9uIGJ1dHRvbi1wb3dlclwiIHN0eWxlPVwibWFyZ2luLXJpZ2h0OiAwcHg7XCIgbmctY2xpY2s9XCJsb2dvdXQoKVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktcG93ZXJcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPGRpdiB1aS12aWV3PVwiY29udGVudFwiPjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL2hlaWdodC1tYXAvbWFpbi5odG1sJyxcbiAgICAnPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiaW5kZXRlcm1pbmF0ZVwiIG5nLWlmPVwibG9hZGluZ1wiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPlxcbicgK1xuICAgICc8ZGl2IGNsYXNzPVwicGxheWVyLWNvbnRlbnRcIiBsYXlvdXQ9XCJyb3dcIj5cXG4nICtcbiAgICAnICAgIDxjYW52YXMgYWxleGFuZHJhLXZpZXcgZGF0YS1pZD1cInZpZXdfMVwiIGFsZXhhbmRyYS1jb25maWc9XCJjb25maWdcIiBhbGV4YW5kcmEtc291cmNlPVwiZGF0YVwiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNjAwXCI+PC9jYW52YXM+XFxuJyArXG4gICAgJyAgICA8ZGl2IGZsZXg9XCIzNVwiIGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBzdHJlY2hcIj5cXG4nICtcbiAgICAnICAgICAgICA8ZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtc2xpZGVyLWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtc2xpZGVyIGNsYXNzPVwibWQtcHJpbWFyeVwiIG1kLWRpc2NyZXRlIHN0ZXA9XCIxXCIgbWluPVwiMVwiIG1heD1cIjMwXCIgYXJpYS1sYWJlbD1cInJhdGluZ1wiIG5nLXNob3c9XCIhbG9hZGluZ1wiIG5nLW1vZGVsPVwiaW5kZXhcIiBuZy1jaGFuZ2U9XCJzZWxlY3QoKVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1zbGlkZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtc2xpZGVyLWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9sb2dpbi9tYWluLmh0bWwnLFxuICAgICc8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxtZC1jYXJkPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1jYXJkLXRpdGxlPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtY2FyZC10aXRsZS10ZXh0PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZC1oZWFkbGluZVwiPlBpY2t5b3VyZGF5IDNEPC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1jYXJkLXRpdGxlLXRleHQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC10aXRsZT5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC1jb250ZW50IGxheW91dD1cImNvbHVtblwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1pbnB1dC1jb250YWluZXIgY2xhc3M9XCJtZC1wcmltYXJ5IG1kLXJhaXNlZCBtZC1odWUtMlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGxhYmVsPkVtYWlsPC9sYWJlbD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInVzZXIuZW1haWxcIiB0eXBlPVwiZW1haWxcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1pbnB1dC1jb250YWluZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtcHJpbWFyeSBtZC1yYWlzZWQgbWQtaHVlLTJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxsYWJlbD5QYXNzd29yZDwvbGFiZWw+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ1c2VyLnBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgIDxtZC1jYXJkLWFjdGlvbnMgbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtcHJpbWFyeSAgbWQtcmFpc2VkIG1kLWh1ZS0yXCIgbmctY2xpY2s9XCJsb2dpbigpXCI+TG9naW48L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1jYXJkLWFjdGlvbnM+XFxuJyArXG4gICAgJyAgICA8L21kLWNhcmQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3Mvbm9ybWFsL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJzxjYW52YXMgYWxleGFuZHJhLXZpZXcgZGF0YS1pZD1cInZpZXdfMVwiIGFsZXhhbmRyYS1jb25maWc9XCJjb25maWdcIiBhbGV4YW5kcmEtc291cmNlPVwiZGF0YVwiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNjAwXCI+PC9jYW52YXM+XFxuJyArXG4gICAgJyAgPGRpdiBmbGV4PVwiMzVcIiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJ1x0PHA+WDoge3tzZWxlY3RlZEluZm9bMF18fFxcJ04vQVxcJ319PC9wPlxcbicgK1xuICAgICdcdDxwPlk6IHt7c2VsZWN0ZWRJbmZvWzFdIHx8IFxcJzBcXCd9fTwvcD5cXG4nICtcbiAgICAnXHQ8cD5aOiB7e3NlbGVjdGVkSW5mb1syXXx8XFwnTi9BXFwnfX08L3A+XFxuJyArXG4gICAgJyAgPC9kaXY+XFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL3BsYXllci9tYWluLmh0bWwnLFxuICAgICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgbmctaWY9XCJsb2FkaW5nXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XFxuJyArXG4gICAgJzxkaXYgY2xhc3M9XCJwbGF5ZXItY29udGVudFwiIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICcgICAgPGNhbnZhcyBhbGV4YW5kcmEtdmlldyBkYXRhLWlkPVwidmlld18xXCIgYWxleGFuZHJhLWNvbmZpZz1cImNvbmZpZ1wiIGFsZXhhbmRyYS1zb3VyY2U9XCJkYXRhXCIgd2lkdGg9XCI4MDBcIiBoZWlnaHQ9XCI2MDBcIj48L2NhbnZhcz5cXG4nICtcbiAgICAnICAgIDxkaXYgZmxleD1cIjM1XCIgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIHN0cmVjaFwiPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgZmxleCBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJwbGF5KClcIiBuZy1pZj1cIiFsb2FkaW5nJiYhcGxheWluZ1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBsYXlcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIFBsYXlcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIG5nLWNsaWNrPVwic3RvcCgpXCIgbmctaWY9XCJwbGF5aW5nXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktc3RvcFwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgU3RvcFxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPGRpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWQtYm9keS0xXCI+e3t2YWx1ZXMuaW5kZXh9fTwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1zbGlkZXIgY2xhc3M9XCJtZC1wcmltYXJ5XCIgbWQtZGlzY3JldGUgc3RlcD1cIjFcIiBtaW49XCIxXCIgbWF4PVwiMzBcIiBhcmlhLWxhYmVsPVwicmF0aW5nXCIgbmctc2hvdz1cIiFsb2FkaW5nXCIgbmctbW9kZWw9XCJ2YWx1ZXMuaW5kZXhcIiBuZy1kaXNhYmxlZD1cInRydWVcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtc2xpZGVyPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL3NsaWRlci9tYWluLmh0bWwnLFxuICAgICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgbmctaWY9XCJsb2FkaW5nXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XFxuJyArXG4gICAgJzxkaXYgY2xhc3M9XCJwbGF5ZXItY29udGVudFwiIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICcgICAgPGNhbnZhcyBhbGV4YW5kcmEtdmlldyBkYXRhLWlkPVwidmlld18xXCIgYWxleGFuZHJhLWNvbmZpZz1cImNvbmZpZ1wiIGFsZXhhbmRyYS1zb3VyY2U9XCJkYXRhXCIgd2lkdGg9XCI4MDBcIiBoZWlnaHQ9XCI2MDBcIj48L2NhbnZhcz5cXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgICRtZFRvYXN0LCAkc3RhdGUpe1xyXG5cclxuICAgICRyb290U2NvcGUuc2hvd1RvYXN0ID0gZnVuY3Rpb24obXNnKSB7XHJcbiAgICAgIFxyXG4gICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgIC50ZXh0Q29udGVudChtc2cpXHJcbiAgICAgICAgICAgIC50aGVtZShcInBpY2stdGhlbWVcIilcclxuICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAgJHJvb3RTY29wZS5nbyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgJHN0YXRlLmdvKHN0YXRlLCBwYXJhbXMpO1xyXG4gICAgfTtcclxuXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICAkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG5cclxuXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgIC5zdGF0ZShcImxvZ2luXCIsIHtcclxuICAgICAgICB1cmw6IFwiL2xvZ2luXCIsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKGdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwLnBsYXllclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvbG9naW4vbWFpbi5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyAgICAgIFxyXG5cclxuICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKFwiYXBwXCIsIHtcclxuICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL21haW4uaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcEN0cmwnLFxyXG4gICAgICAgIGFic3RyYWN0OnRydWVcclxuXHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcC5ub3JtYWxcIiwge1xyXG4gICAgICAgIHVybDogJ25vcm1hbCcsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9ub3JtYWwvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOb3JtYWxDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAuc3RhdGUoXCJhcHAuc2xpZGVyXCIsIHtcclxuICAgICAgICB1cmw6ICdzbGlkZXInLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc2xpZGVyL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2xpZGVyQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfSlcclxuICAgICAuc3RhdGUoXCJhcHAucGxheWVyXCIsIHtcclxuICAgICAgICB1cmw6ICdwbGF5ZXInLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcGxheWVyL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGxheWVyQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfSlcclxuICAgIC5zdGF0ZShcImFwcC5oZWlnaHRtYXBcIiwge1xyXG4gICAgICAgIHVybDogJ2hlaWdodC1tYXAnLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaGVpZ2h0LW1hcC9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hlaWdodE1hcEN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9sb2dpblwiKTtcclxuXHJcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdBdXRoSW50ZXJjZXB0b3InKTtcclxuXHJcbiAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXHJcbiAgIC5iYWNrZ3JvdW5kUGFsZXR0ZSgndGVhbCcsIHtcclxuICAgICAgJ2RlZmF1bHQnOiAnNTAwJywgLy8gYnkgZGVmYXVsdCB1c2Ugc2hhZGUgNDAwIGZyb20gdGhlIHBpbmsgcGFsZXR0ZSBmb3IgcHJpbWFyeSBpbnRlbnRpb25zXHJcbiAgICAgICdodWUtMSc6ICcxMDAnLCAvLyB1c2Ugc2hhZGUgMTAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTE8L2NvZGU+IGNsYXNzXHJcbiAgICAgICdodWUtMic6ICc2MDAnLCAvLyB1c2Ugc2hhZGUgNjAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTI8L2NvZGU+IGNsYXNzXHJcbiAgICAgICdodWUtMyc6ICdBMTAwJyAvLyB1c2Ugc2hhZGUgQTEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0zPC9jb2RlPiBjbGFzc1xyXG4gICAgfSlcclxuICAgIC5wcmltYXJ5UGFsZXR0ZSgnbGltZScsIHtcclxuICAgICAgJ2RlZmF1bHQnOiAnNDAwJywgLy8gYnkgZGVmYXVsdCB1c2Ugc2hhZGUgNDAwIGZyb20gdGhlIHBpbmsgcGFsZXR0ZSBmb3IgcHJpbWFyeSBpbnRlbnRpb25zXHJcbiAgICAgICdodWUtMSc6ICcxMDAnLCAvLyB1c2Ugc2hhZGUgMTAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTE8L2NvZGU+IGNsYXNzXHJcbiAgICAgICdodWUtMic6ICc2MDAnLCAvLyB1c2Ugc2hhZGUgNjAwIGZvciB0aGUgPGNvZGU+bWQtaHVlLTI8L2NvZGU+IGNsYXNzXHJcbiAgICAgICdodWUtMyc6ICdBMTAwJyAvLyB1c2Ugc2hhZGUgQTEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0zPC9jb2RlPiBjbGFzc1xyXG4gICAgfSlcclxuICAgIC8vIElmIHlvdSBzcGVjaWZ5IGxlc3MgdGhhbiBhbGwgb2YgdGhlIGtleXMsIGl0IHdpbGwgaW5oZXJpdCBmcm9tIHRoZVxyXG4gICAgLy8gZGVmYXVsdCBzaGFkZXNcclxuICAgIC5hY2NlbnRQYWxldHRlKCd0ZWFsJywge1xyXG4gICAgICAnZGVmYXVsdCc6ICc1MDAnIC8vIHVzZSBzaGFkZSAyMDAgZm9yIGRlZmF1bHQsIGFuZCBrZWVwIGFsbCBvdGhlciBzaGFkZXMgdGhlIHNhbWVcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG59KTtcclxuXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignQXBwQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgT2F1dGhTZXJ2aWNlKXtcclxuICAgIFxyXG4gICAgXHJcbiAgICAkc2NvcGUub3Blbk1lbnUgPSBmdW5jdGlvbigkbWRPcGVuTWVudSwgZXYpIHtcclxuICAgICAgb3JpZ2luYXRvckV2ID0gZXY7XHJcbiAgICAgICRtZE9wZW5NZW51KGV2KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgJHNjb3BlLmxvZ291dD1mdW5jdGlvbigpe1xyXG4gICAgICAgIE9hdXRoU2VydmljZS4gbG9nb3V0KCkuU2Vzc2lvbihmdW5jdGlvbigpe1xyXG5cdFx0IGRlbGV0ZUxvY2FsKFwidXNlclwiKTtcclxuICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7ICAgXHJcblx0fSwgZnVuY3Rpb24oKXt9KTtcclxuICAgIH1cclxuICAgIFxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0hlaWdodE1hcEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbXBhbnlTZXJ2aWNlLCAkYWxleGFuZHJhVXRpbHMpe1xyXG5cclxuICAgICRzY29wZS5sb2FkaW5nPXRydWU7XHJcblxyXG4gICAgJHNjb3BlLmNvbmZpZyA9IHtcclxuICAgICAgICB0eXBlOiBcImN1c3RvbVwiLFxyXG5cdFx0ZW5naW5lOlwicGhvbmdfcG9zaXRpb25hbFwiLFxyXG4gICAgICAgIGF4aXM6IHRydWUsXHJcbiAgICAgICAgYXhpc0xlbmd0aDogNTAwLFxyXG4gICAgICAgIHN0cmVhbWluZzogdHJ1ZSxcclxuICAgICAgICBiYWNrZ3JvdW5kOiBbMC4zLCAwLjMsIDAuM10sXHJcbiAgICAgICAgZ3JpZDogdHJ1ZSxcclxuICAgICAgICBncmlkQ29uZmlnOiB7XHJcbiAgICAgICAgICAgIGxpbmVzOiA2MCxcclxuICAgICAgICAgICAgZGltOiA1MDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpZ2h0OntcclxuICAgICAgICAgICAgZGlyZWN0aW9uOlstMS4wLCAtMS4wLCAtMV1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbG9ydHlwZTpcInZhcmlhYmxlXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBwbGFuZT17fTtcclxuXHJcbiAgICAkc2NvcGUuaW5kZXg9MTtcclxuXHJcbiAgICBDb21wYW55U2VydmljZS5QaWNrKCkuc3RhdHMoZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAkc2NvcGUubG9hZGluZz1mYWxzZTtcclxuICAgICAgICBwbGFuZT1yZXMuZGF0YS5wbGFuZTtcclxuXHJcbiAgICAgICAgYXBwbHlQbGFuZSgpO1xyXG5cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc2VsZWN0PWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYXBwbHlQbGFuZSgpO1xyXG4gICAgfVxyXG5cdHZhciBjb2xvcj1SYW5kQ29sb3IoKTtcclxuXHJcbiAgICB2YXIgYXBwbHlQbGFuZT1mdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBjYWxlbmRhcj1wbGFuZS52ZXJ0aWNlcztcclxuICAgICAgICB2YXIgaW5kZXg9JHNjb3BlLmluZGV4LTE7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfZGF5PWNhbGVuZGFyW2luZGV4XTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmRhdGE9e1xyXG4gICAgICAgICAgICBtZXNoOiRhbGV4YW5kcmFVdGlscy5QbGFuZSh7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6cGxhbmUuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6cGxhbmUud2lkdGgsXHJcbiAgICAgICAgICAgICAgICB3X3M6cGxhbmUudldpZHRoLFxyXG4gICAgICAgICAgICAgICAgaF9zOnBsYW5lLnZIZWlnaHRcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocHJldiwgaXRlbSwgaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHg9aXRlbS54LCB5PWl0ZW0ueiwgej1pdGVtLnk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNfcD1fLmZpbmQoY3VycmVudF9kYXksIGZ1bmN0aW9uKGkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmtleT09aW5kZXg7IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGNfcCl7XHJcbiAgICAgICAgICAgICAgICAgICAgeT1jX3AueTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwcmV2LnB1c2goeCk7XHJcbiAgICAgICAgICAgICAgICBwcmV2LnB1c2goeSk7XHJcbiAgICAgICAgICAgICAgICBwcmV2LnB1c2goeik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOls1MCwwLDUwXSxcclxuXHRcdFx0Y29sb3I6Y29sb3JcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE9hdXRoU2VydmljZSwgUmVxdWVzdFNlcnZpY2Upe1xyXG4gICAgXHJcblxyXG4gICAgXHJcbiAgICAkc2NvcGUudXNlciA9IHtlbWFpbDpcIlwiLCBwYXNzd29yZDpcIlwifTtcclxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3luYy53YXRlcmZhbGwoW1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUobmV4dCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNFbWFpbD1lbXB0eU9yVW5kZWZpbmVkKCRzY29wZS51c2VyLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgIHZhciBpc1Bhc3N3b3JkPWVtcHR5T3JVbmRlZmluZWQoJHNjb3BlLnVzZXIucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYoaXNFbWFpbCB8fCBpc1Bhc3N3b3JkKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihpc0VtYWlsKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dChcIkVtYWlsIEVtcHR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpc1Bhc3N3b3JkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dChcIlBhc3N3b3JkIEVtcHR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBsb2dpbihuZXh0KXtcclxuXHJcbiAgICAgICAgICAgICAgICBPYXV0aFNlcnZpY2UubG9naW4oKS5TZXNzaW9uKCRzY29wZS51c2VyLCBmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5lcnJvcilyZXR1cm4gbmV4dChyZXMuZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXh0KG51bGwsIHJlcy5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBSZXF1ZXN0U2VydmljZS5TZXJ2ZXJOb3RGb3VuZChuZXh0KSk7XHJcblxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tSb2xlKHVzZXIsIG5leHQpe1xyXG4gICAgICAgICAgICAgICAgT2F1dGhTZXJ2aWNlLnJvbGUoKS5jaGVjayh7cm9sZTp1c2VyLnJvbGV9LCBmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5lcnJvcilyZXR1cm4gbmV4dChyZXMuZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YT09Mil7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KG51bGwsIHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXF1ZXN0U2VydmljZS5Ob1JvbGVBdXRob3JpemVkKG5leHQpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0sIFJlcXVlc3RTZXJ2aWNlLlNlcnZlck5vdEZvdW5kKG5leHQpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIF0sIGZ1bmN0aW9uKGVyciwgdXNlcil7XHJcbiAgICAgICAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHJvb3RTY29wZS5zaG93VG9hc3QoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYXZlTG9jYWwoXCJ1c2VyXCIsIHVzZXIpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwLm5vcm1hbFwiKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ05vcm1hbEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbXBhbnlTZXJ2aWNlKXtcclxuXHJcbiAgICAkc2NvcGUubG9hZGluZz10cnVlO1xyXG4gICAgJHNjb3BlLmRhdGE9W107XHJcblx0JHNjb3BlLnNlbGVjdGVkSW5mbz17fTtcclxuXHRcclxuICAgIHZhciBjYWxlbmRhcj1bXTtcclxuXHJcbiAgICAkc2NvcGUuY29uZmlnPXtcclxuICAgICAgICBjb2xvcnR5cGU6XCJ2YXJpYWJsZVwiLFxyXG4gICAgICAgIGVuZ2luZTpcInBob25nX3Bvc2l0aW9uYWxcIixcclxuICAgICAgICBheGlzOnRydWUsXHJcbiAgICAgICAgYXhpc0xlbmd0aDo1MDAsXHJcbiAgICAgICAgc3RyZWFtaW5nOnRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDpbMC4zLDAuMywwLjNdLFxyXG4gICAgICAgIGdyaWQ6dHJ1ZSxcclxuICAgICAgICBncmlkQ29uZmlnOntcclxuICAgICAgICAgICAgbGluZXM6NjAsXHJcbiAgICAgICAgICAgIGRpbTo1MDBcclxuICAgICAgICB9LFxyXG5cdFx0c2VsZWN0b3I6dHJ1ZSwgXHJcbiAgICAgICAgb25TZWxlY3RlZDpmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0aWYoZGF0YSlcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkSW5mbz1kYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgZmV0Y2g9ZnVuY3Rpb24oKXtcclxuICAgICAgICBDb21wYW55U2VydmljZS5QaWNrKCkuc3RhdHMoZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgY2FsZW5kYXI9SW1tdXRhYmxlLkxpc3QocmVzLmRhdGEuc3RhdHMpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YT1fLmNsb25lKGNhbGVuZGFyLmdldCgyMykpO1xyXG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZz1mYWxzZTsgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZldGNoKCk7XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignUGxheWVyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29tcGFueVNlcnZpY2UsICR0aW1lb3V0KXtcclxuXHJcbiAgICB2YXIgUExBWUVSX1RJTUU9MjAwMDtcclxuICAgIHZhciBFTVBUWV9USU1FPTUwMDtcclxuXHJcbiAgICAkc2NvcGUubG9hZGluZz10cnVlO1xyXG4gICAgJHNjb3BlLnBsYXlpbmc9ZmFsc2U7XHJcbiAgICAkc2NvcGUuZGF0YT1bXTtcclxuICAgIHZhciBjYWxlbmRhcj1bXTtcclxuICAgIHZhciB0d2Vlbj1udWxsO1xyXG5cclxuICAgICRzY29wZS52YWx1ZXM9e1xyXG4gICAgICAgIGluZGV4OjF9O1xyXG5cclxuICAgICRzY29wZS5jb25maWc9e1xyXG4gICAgICAgIGNvbG9ydHlwZTpcInZhcmlhYmxlXCIsXHJcbiAgICAgICAgZW5naW5lOlwicGhvbmdfcG9zaXRpb25hbFwiLFxyXG4gICAgICAgIGF4aXM6dHJ1ZSxcclxuICAgICAgICBheGlzTGVuZ3RoOjUwMCxcclxuICAgICAgICBzdHJlYW1pbmc6dHJ1ZSxcclxuICAgICAgICBiYWNrZ3JvdW5kOlswLjMsMC4zLDAuM10sXHJcbiAgICAgICAgZ3JpZDp0cnVlLFxyXG4gICAgICAgIGdyaWRDb25maWc6e1xyXG4gICAgICAgICAgICBsaW5lczo2MCxcclxuICAgICAgICAgICAgZGltOjUwMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG5cclxuICAgIENvbXBhbnlTZXJ2aWNlLlBpY2soKS5zdGF0cyhmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgIGNhbGVuZGFyPUltbXV0YWJsZS5MaXN0KHJlcy5kYXRhLnN0YXRzKTtcclxuICAgICAgICAkc2NvcGUuZGF0YT1fLmNsb25lRGVlcChjYWxlbmRhci5nZXQoMCkpO1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nPWZhbHNlOyBcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhbmltYXRlQ2FsZW5kYXIoc3RlcCxjLCBuLCBjYil7XHJcblxyXG4gICAgICAgIHZhciBpbnRlcl9kYXRhPWMucmVkdWNlKGZ1bmN0aW9uKHByZXYsaXRlbSwgaW5kZXgpe1xyXG4gICAgICAgICAgICB2YXIgY19wb3M9aXRlbS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgdmFyIG5fcG9zPW5baW5kZXhdLnBvc2l0aW9uO1xyXG5cclxuICAgICAgICAgICAgaWYoIV8uaXNFcXVhbChjX3Bvcywgbl9wb3MpKXtcclxuICAgICAgICAgICAgICAgIHByZXYubGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICBwcmV2LmN1cnJlbnRbXCJ4X1wiK2luZGV4XT1jX3Bvc1swXTtcclxuICAgICAgICAgICAgICAgIHByZXYuY3VycmVudFtcInlfXCIraW5kZXhdPWNfcG9zWzFdO1xyXG4gICAgICAgICAgICAgICAgcHJldi5jdXJyZW50W1wiel9cIitpbmRleF09Y19wb3NbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgcHJldi5uZXh0W1wieF9cIitpbmRleF09bl9wb3NbMF07XHJcbiAgICAgICAgICAgICAgICBwcmV2Lm5leHRbXCJ5X1wiK2luZGV4XT1uX3Bvc1sxXTtcclxuICAgICAgICAgICAgICAgIHByZXYubmV4dFtcInpfXCIraW5kZXhdPW5fcG9zWzJdO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBjdXJyZW50Ont9LFxyXG4gICAgICAgICAgICBuZXh0Ont9LFxyXG4gICAgICAgICAgICBsZW5ndGg6MFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS52YWx1ZXMuaW5kZXg9c3RlcCsxO1xyXG5cclxuICAgICAgICBpZihpbnRlcl9kYXRhLmxlbmd0aD4wKXtcclxuXHJcbiAgICAgICAgICAgIHR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKGludGVyX2RhdGEuY3VycmVudClcclxuICAgICAgICAgICAgICAgIC50byhpbnRlcl9kYXRhLm5leHQsIFBMQVlFUl9USU1FKVxyXG4gICAgICAgICAgICAgICAgLm9uVXBkYXRlKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoISRzY29wZS4kJHBoYXNlKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7IFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnBsYXlpbmc9PWZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJfYXJyYXk9T2JqZWN0LmtleXMoc2VsZikucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlPXNlbGZbaXRlbV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5cz1pdGVtLnNwbGl0KFwiX1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbT1rZXlzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWtleXNbMV07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZbaW5kZXhdPXByZXZbaW5kZXhdfHx7fVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZbaW5kZXhdW3BhcmFtXT12YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSx7fSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmVfZGF0YT1fLmNsb25lRGVlcCgkc2NvcGUuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhpbnRlcl9hcnJheSkuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZT1pbnRlcl9hcnJheVtpdGVtXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZV9kYXRhW2l0ZW1dLnBvc2l0aW9uPVt2YWx1ZS54LCB2YWx1ZS55LCB2YWx1ZS56XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGE9Y2xvbmVfZGF0YTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uQ29tcGxldGUoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub25TdG9wKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImhlbGxvXCIpXHJcbiAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmludGVycG9sYXRpb24oIFRXRUVOLkludGVycG9sYXRpb24uQmV6aWVyICkuZWFzaW5nKCBUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmUgKS5kZWxheSggMjUwIClcclxuICAgICAgICAgICAgICAgIC5zdGFydCgpXHJcblxyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJHRpbWVvdXQoY2IsIEVNUFRZX1RJTUUpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgICRzY29wZS5wbGF5PWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLnBsYXlpbmc9dHJ1ZTtcclxuICAgICAgICBmdW5jdGlvbiBpdGVyKGkpe1xyXG5cclxuICAgICAgICAgICAgaWYoaTxjYWxlbmRhci5jb3VudCgpLTEgJiYgJHNjb3BlLnBsYXlpbmcpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQ9Xy5jbG9uZURlZXAoY2FsZW5kYXIuZ2V0KGkpKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0PV8uY2xvbmVEZWVwKGNhbGVuZGFyLmdldChpKzEpKTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGVDYWxlbmRhcihpLCBjdXJyZW50LCBuZXh0LCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZXIoaSsxKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfWVsc2V7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBsYXlpbmc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsdWVzLmluZGV4PTE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YT1bXTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGE9Xy5jbG9uZURlZXAoY2FsZW5kYXIuZ2V0KDApKTsgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpdGVyKDApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAkc2NvcGUuc3RvcD1mdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkc2NvcGUucGxheWluZz1mYWxzZTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoSW50ZXJwb2xhdGlvblRpbWUpO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBJbnRlcnBvbGF0aW9uVGltZSh0aW1lKSB7XHJcblxyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShJbnRlcnBvbGF0aW9uVGltZSk7XHJcbiAgICAgICAgVFdFRU4udXBkYXRlKHRpbWUpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignU2xpZGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIENvbXBhbnlTZXJ2aWNlLCAkYWxleGFuZHJhVXRpbHMpIHtcclxuXHJcbiAgICAgICAgdmFyIHByb2ZpbGU7XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XHJcblxyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmNvbmZpZyA9IHtcclxuICAgICAgICAgICAgdHlwZTogXCJjdXN0b21cIixcclxuICAgICAgICAgICAgZW5naW5lOlwicGhvbmdfcG9zaXRpb25hbFwiLFxyXG4gICAgICAgICAgICBjb2xvcnR5cGU6XCJ2YXJpYWJsZVwiLFxyXG4gICAgICAgICAgICBheGlzOiB0cnVlLFxyXG4gICAgICAgICAgICBheGlzTGVuZ3RoOiA1MDAsXHJcbiAgICAgICAgICAgIHN0cmVhbWluZzogdHJ1ZSxcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogWzAuMywgMC4zLCAwLjNdLFxyXG4gICAgICAgICAgICBncmlkOiB0cnVlLFxyXG4gICAgICAgICAgICBncmlkQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICBsaW5lczogNjAsXHJcbiAgICAgICAgICAgICAgICBkaW06IDUwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGNvbG9yPVJhbmRDb2xvcigpO1xyXG5cclxuICAgICAgICB2YXIgQXBwbHlUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICAgICAgdmFyIG1vZGVsID0gJGFsZXhhbmRyYVV0aWxzLlRleHQodGV4dCwge1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogMTAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDAuNSxcclxuICAgICAgICAgICAgICAgIGN1cnZlU2VnbWVudHM6IDMwLFxyXG4gICAgICAgICAgICAgICAgYmV2ZWxFbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYmV2ZWxUaGlja25lc3M6IDEuNSxcclxuICAgICAgICAgICAgICAgIGJldmVsU2l6ZTogMC41XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1lc2g6IG1vZGVsLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFs1MCwgNTAsMTUwXSxcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOntcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTo0NSxcclxuICAgICAgICAgICAgICAgICAgICBheGlzOlswLDEsMF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb2xvcjpjb2xvclxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgR2V0UHJvZmlsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQ29tcGFueVNlcnZpY2UuUHJvZmlsZSgpLmdldChmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yKSByZXR1cm4gY29uc29sZS5sb2cocmVzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgIHByb2ZpbGUgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID1mYWxzZTtcclxuICAgICAgICAgICAgICAgIEFwcGx5VGV4dChwcm9maWxlLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHZXRQcm9maWxlKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQXBpU2VydmljZVwiLCBmdW5jdGlvbigkcmVzb3VyY2UsICRsb2NhdGlvbil7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAvL2VudjokbG9jYXRpb24uYWJzVXJsKCkuaW5kZXhPZihcImxvY2FsaG9zdFwiKT09LTE/XCJwcm9kXCI6XCJkZXZcIixcclxuICAgICAgICBlbnY6XCJwcm9kXCIsXHJcbiAgICAgICAgcHJvZDp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cHNcIixcclxuICAgICAgICAgICAgaG9zdDpcInBpY2t5b3VyZGF5Lmhlcm9rdWFwcC5jb21cIixcclxuICAgICAgICAgICAgcG9ydDpcIlwiLFxyXG4gICAgICAgICAgICByb290OlwiYXBpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldjp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cFwiLFxyXG4gICAgICAgICAgICBob3N0OlwibG9jYWxob3N0XCIsXHJcbiAgICAgICAgICAgIHBvcnQ6XCI1MDAwXCIsXHJcbiAgICAgICAgICAgIHJvb3Q6XCJhcGlcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldEFwaVBhdGg6ZnVuY3Rpb24ocGF0aCl7XHJcbiAgICAgICAgICAgIHZhciBhcGk9dGhpc1t0aGlzLmVudl07XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkucHJvdG9jb2wrXCI6Ly9cIithcGkuaG9zdCsoYXBpLnBvcnQhPT1cIlwiPyhcIjpcIithcGkucG9ydCk6XCJcIikrXCIvXCIrYXBpLnJvb3QrXCIvXCIrcGF0aDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXN0OmZ1bmN0aW9uKHBhdGgsIG1ldGhvZHMsIGRlZmF1bHRQYXJhbXMpe1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2U9JHJlc291cmNlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBcGlQYXRoKHBhdGgpLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhcmFtcyB8fCB7fSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgfHwge31cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQ29tcGFueVNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYmFzZTpcImNvbXBhbnlcIixcclxuICAgICAgICBcclxuICAgICAgICBQaWNrOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL3N0YXRzUGlja3NcIiwge1xyXG4gICAgICAgICAgICAgICAgc3RhdHM6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICBQcm9maWxlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9wcm9maWxlXCIse1xyXG4gICAgICAgIFx0XHRnZXQ6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgXHR9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgIH07XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJBdXRoSW50ZXJjZXB0b3JcIiwgZnVuY3Rpb24oJHEsICRsb2NhdGlvbil7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZyl7XHJcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlcj1nZXRKU09OTG9jYWwoXCJ1c2VyXCIpO1xyXG4gICAgICAgICAgICB2YXIgdXNlcj1nZXRKU09OTG9jYWwoXCJ1c2VyXCIpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gJiYgdXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHVzZXIudG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWVzdEVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICdFUlJPUicpIHsgLy9Gb3JjZSBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKXtcclxuICAgICAgICAgICAgaWYocmVqZWN0aW9uLnN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZSBhY2Nlc28nKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51c2VyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJPYXV0aFNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYmFzZTpcIm9hdXRoXCIsXHJcbiAgICAgICAgbG9naW46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2Use1xyXG4gICAgICAgICAgICAgICAgU2Vzc2lvbjp7bWV0aG9kOlwiUE9TVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nb3V0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL2xvZ291dFwiLCB7XHJcbiAgICAgICAgICAgICAgICBTZXNzaW9uOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvbGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvcm9sZS86cm9sZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgIGNoZWNrOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOntyb2xlOlwiQHJvbGVcIn19LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxufSk7XHJcblxyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiUmVxdWVzdFNlcnZpY2VcIiwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgXHJcbiAgICAgICAgU2VydmVyTm90Rm91bmQ6IENsb3N1cmVNZXNzYWdlKFwiU2VydmVyIE5vdCBGb3VuZFwiKSxcclxuXHJcbiAgICAgICAgTm9Sb2xlQXV0aG9yaXplZDogQ2xvc3VyZU1lc3NhZ2UoXCJObyBSb2xlIEF1dGhvcml6ZWRcIiksXHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgIH07XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
