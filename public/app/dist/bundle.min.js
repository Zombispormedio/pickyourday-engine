function saveLocal(n,e){localStorage[n]=JSON.stringify(e)}function getJSONLocal(n){var e=null;try{var o=localStorage[n];void 0!==o&&(e=JSON.parse(o))}catch(t){}return e}function deleteLocal(n){localStorage.removeItem(n)}function ClosureMessage(n){return function(e){return function(){e(n)}}}function emptyOrUndefined(n){return void 0==n||""===n}function RandPosition(n){var e=n||{min:0,max:100},o=chance.floating(e),t=chance.floating(e),a=chance.floating(e);return[o,t,a]}function RandColor(n){var e=n||{min:0,max:1,fixed:2},o=chance.floating(e),t=chance.floating(e),a=chance.floating(e);return[o,t,a,1]}function RandSize(n){var e=n||{min:.1,max:2,fixed:1},o=chance.floating(e);return[o,o,o]}function RandRotation(n){var e=Number(chance.bool()),o=Number(chance.bool()),t=Number(chance.bool());return{angle:chance.integer({min:0,max:360}),axis:[e,o,t]}}function generate(n){return function(){var e=chance.integer({min:0,max:100});return Array.apply(0,Array(e)).map(n)}}var app=angular.module("Application",["ui.router","ngResource","ngAnimate","ngMaterial","alexandra"]);!function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/main.html",'\n<md-toolbar class="md-accent md-whiteframe-1dp">\n    <div class="md-toolbar-tools">\n        <md-menu flex="5">\n            <md-button aria-label="Type Stats" class="md-icon-button button-stats" ng-click="openMenu($mdOpenMenu, $event)">\n                <md-icon md-menu-origin md-font-icon="mdi-chart-areaspline" class="mdi"></md-icon>\n            </md-button>\n            <md-menu-content width="4">\n                <md-menu-item>\n                    <md-button ui-sref="app.normal">\n                        <md-icon md-font-icon="mdi-chart-bubble" class="mdi"></md-icon>\n                        Normal\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.slider">\n                        <md-icon md-font-icon="mdi-clock-start" class="mdi"></md-icon>\n                        Slider\n                    </md-button>\n                </md-menu-item>\n                <md-menu-divider></md-menu-divider>\n                <md-menu-item>\n                    <md-button  ui-sref="app.player">\n                        <md-icon md-font-icon="mdi-play-box-outline" class="mdi"></md-icon>\n                        Player\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.heightmap">\n                        <md-icon md-font-icon="mdi-airplane-landing" class="mdi"></md-icon>\n                        Height Map\n                    </md-button>\n                </md-menu-item>\n                 <md-menu-item>\n                    <md-button  ui-sref="app.special">\n                        <md-icon md-font-icon="mdi-castle" class="mdi"></md-icon>\n                        Special\n                    </md-button>\n                </md-menu-item>\n            </md-menu-content>\n        </md-menu>\n        \n        <h2>\n            <span>Pickyourday 3D</span>\n        </h2>\n        <span flex></span>\n        <md-button aria-label="logout" class="md-icon-button button-power" style="margin-right: 0px;" ng-click="logout()">\n            <md-icon md-font-icon="mdi-power" class="mdi"></md-icon>\n        </md-button>\n    </div>\n</md-toolbar>\n\n\n<div ui-view="content"></div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/height-map/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div>\n            <md-slider-container>\n               \n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="index" ng-change="select()">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/login/main.html",'<div layout="column" layout-align="center center">\n\n\n\n    <md-card>\n        <md-card-title>\n            <md-card-title-text>\n                <span class="md-headline">Pickyourday 3D</span>\n\n            </md-card-title-text>\n\n        </md-card-title>\n        <md-card-content layout="column">\n\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Email</label>\n                <input ng-model="user.email" type="email">\n            </md-input-container>\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Password</label>\n                <input ng-model="user.password" type="password">\n            </md-input-container>\n        </md-card-content>\n        <md-card-actions layout="row" layout-align="center center">\n            <md-button class="md-primary  md-raised md-hue-2" ng-click="login()">Login</md-button>\n\n        </md-card-actions>\n    </md-card>\n\n\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/normal/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n\n<canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="500"></canvas>\n<div layout="row">\n\n    <md-select flex="20" ng-model="selected.statType"  flex-offset="5" placeholder="Selecciona x/y/z" ng-change="changeStatType()">\n\n        <md-option value="pick">Estado de Pick/Cantidad/Servicio</md-option>\n\n        <md-option value="score">Valoraci√≥n/Cantidad/Servicio</md-option>\n        <md-option value="money">Empleado/Dinero/Servicio</md-option>\n        <md-option value="work">Empleado/Tiempo Trabajado/Servicio</md-option>\n    </md-select>\n    \n     <md-select flex="20" style="margin-right:5%;" ng-model="config.engine"  flex-offset="5" placeholder="Selecciona engine">\n\n        <md-option value="phong">Phong</md-option>\n\n        <md-option value="phong_positional">Phong Positional</md-option>\n        <md-option value="toon">Toon</md-option>\n        <md-option value="phong_lights">Phong Several Lights</md-option>\n    </md-select>\n     <md-checkbox flex ng-model="config.selector" aria-label="Selector">\n            Use Selector\n          </md-checkbox>\n     <md-select flex="20" style="margin-right:5%;" ng-model="config.effect"  ng-if="!config.selector" flex-offset="5" placeholder="Selecciona effect">\n\n        <md-option value="no">No Effect</md-option>\n\n        <md-option value="invert">Negative</md-option>\n        <md-option value="grey">Greyscale</md-option>\n        <md-option value="blur">Blur</md-option>\n        <md-option value="film">Film</md-option>\n        <md-option value="wavy">Wavy</md-option>\n         <md-option value="all">Random</md-option>\n    </md-select>\n\n\n</div>\n\n\n <div ng-if="statsTime" layout="row" style="position: fixed;\n    top: 50px;\n    left: 30px;\n    width: 410px;\n    background-color: white;\n    padding-left: 27px;\n    box-shadow: 0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);">\n        <p flex="20">X: {{selectedInfo[0]||\'N/A\'}}</p>\n        <p flex="10">Y: {{selectedInfo[1] || \'0\'}}</p>\n        <p flex>Z: {{selectedInfo[2]||\'N/A\'}}</p>\n    </div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/player/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div flex layout="row" layout-align="center center">\n            <md-button ng-click="play()" ng-if="!loading&&!playing">\n                <md-icon md-font-icon="mdi-play" class="mdi"></md-icon>\n                Play\n            </md-button>\n            \n            <md-button ng-click="stop()" ng-if="playing">\n                <md-icon md-font-icon="mdi-stop" class="mdi"></md-icon>\n                Stop\n            </md-button>\n        </div>\n\n        <div>\n            <md-slider-container>\n               <span class="md-body-1">{{values.index}}</span>\n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="values.index" ng-disabled="true">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n\n</div>\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/slider/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/special/main.html","")}])}(),angular.module("Application").run(["$rootScope","$mdToast","$state",function(n,e,o){n.showToast=function(n){e.show(e.simple().textContent(n).theme("pick-theme").hideDelay(3e3))},n.go=function(n,e){o.go(n,e)}}]),angular.module("Application").config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider",function(n,e,o,t){n.state("login",{url:"/login",onEnter:["$rootScope",function(n){getJSONLocal("user")&&n.go("app.player")}],templateUrl:"/views/login/main.html",controller:"LoginCtrl"}).state("app",{url:"/",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],templateUrl:"/views/main.html",controller:"AppCtrl","abstract":!0}).state("app.normal",{url:"normal",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/normal/main.html",controller:"NormalCtrl"}}}).state("app.slider",{url:"slider",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/slider/main.html",controller:"SliderCtrl"}}}).state("app.player",{url:"player",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/player/main.html",controller:"PlayerCtrl"}}}).state("app.heightmap",{url:"height-map",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/height-map/main.html",controller:"HeightMapCtrl"}}}).state("app.special",{url:"special",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/special/main.html",controller:"SpecialCtrl"}}}),e.otherwise("/login"),o.interceptors.push("AuthInterceptor"),t.theme("default").backgroundPalette("teal",{"default":"500","hue-1":"100","hue-2":"600","hue-3":"A100"}).primaryPalette("lime",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("teal",{"default":"500"})}]),angular.module("Application").controller("AppCtrl",["$rootScope","$scope","OauthService",function(n,e,o){e.openMenu=function(n,e){originatorEv=e,n(e)},e.logout=function(){o.logout().Session(function(){deleteLocal("user"),n.go("login")},function(){})}}]),angular.module("Application").controller("HeightMapCtrl",["$scope","CompanyService","$alexandraModel",function(n,e,o){n.loading=!0,n.config={type:"custom",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},light:{direction:[-1,-1,-1]},colortype:"variable"};var t={};n.index=1,e.Pick().stats(function(e){n.loading=!1,t=e.data.plane,i()}),n.select=function(){i()};var a=RandColor(),i=function(){var e=t.vertices,i=n.index-1,r=e[i];n.data={mesh:o.Plane({height:t.height,width:t.width,w_s:t.vWidth,h_s:t.vHeight},function(n,e,o){var t=e.x,a=e.z,i=e.y,l=_.find(r,function(n){return n.key==o});return l&&(a=l.y),n.push(t),n.push(a),n.push(i),n}),position:[50,0,50],color:a}}}]),angular.module("Application").controller("LoginCtrl",["$rootScope","$scope","OauthService","RequestService",function(n,e,o,t){e.user={email:"",password:""},e.login=function(){async.waterfall([function(n){var o=emptyOrUndefined(e.user.email),t=emptyOrUndefined(e.user.password);o||t?o?n("Email Empty"):t&&n("Password Empty"):n()},function(n){o.login().Session(e.user,function(e){return e.error?n(e.error):void n(null,e.data)},t.ServerNotFound(n))},function(n,e){o.role().check({role:n.role},function(o){return o.error?e(o.error):void(2==o.data?e(null,n):t.NoRoleAuthorized(e)())},t.ServerNotFound(e))}],function(e,o){return e?n.showToast(e):(saveLocal("user",o),void n.go("app.normal"))})}}]),angular.module("Application").controller("NormalCtrl",["$scope","CompanyService","StatsService","$alexandraModel","$alexandraStore","$alexandraForest",function(n,e,o,t,a,i){n.loading=!0,n.data=[],n.selectedInfo={},n.selected={statType:"no",engine:"phong"},n.statsTime=!1;var r=[];n.config={colortype:"variable",type:"custom",axis:!0,axisLength:500,streaming:!0,fullWidth:!0,permitEffects:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},selector:!0,onSelected:function(e){e&&(n.selectedInfo=e)},LabelXConfig:{offset:15},LabelYConfig:{offset:15},LabelZConfig:{offset:15},lightSequence:[a.lights.blue,a.lights.green,a.lights.red]};var l=function(e){var o=t.Text(e,{size:10,height:.1});n.data={mesh:o,position:[50,50,150],rotation:{angle:45,axis:[0,1,0]},color:RandColor()}},c=function(){e.Profile().get(function(e){return e.error?console.log(e.error):(profile=e.data,n.loading=!1,void l(profile.name))})};c();var d=function(e){r=Immutable.List(e.stats),n.data=_.clone(r.get(0)),n.loading=!1,n.config.LabelX=e.legend.x,n.config.LabelY=e.legend.y,n.config.LabelZ=e.legend.z,console.log(i.getTree("view_1"))};n.changeStatType=function(){switch(n.config.type="sphere",n.loading=!0,n.statsTime=!0,n.selected.statType){case"pick":o.Picks(d);break;case"score":o.ScoreServices(d);break;case"money":o.MoneyResources(d);break;case"work":o.WorkResources(d);break;case"origin":o.OriginPicks(d)}}}]),angular.module("Application").controller("PlayerCtrl",["$scope","CompanyService","$timeout",function(n,e,o){function t(e,t,a,l){var d=t.reduce(function(n,e,o){var t=e.position,i=a[o].position;return _.isEqual(t,i)||(n.length++,n.current["x_"+o]=t[0],n.current["y_"+o]=t[1],n.current["z_"+o]=t[2],n.next["x_"+o]=i[0],n.next["y_"+o]=i[1],n.next["z_"+o]=i[2]),n},{current:{},next:{},length:0});n.values.index=e+1,d.length>0?c=new TWEEN.Tween(d.current).to(d.next,i).onUpdate(function(){var e=this;n.$$phase||n.$apply(function(){if(0==n.playing)return void c.stop();var o=Object.keys(e).reduce(function(n,o){var t=e[o],a=o.split("_"),i=a[0],r=a[1];return n[r]=n[r]||{},n[r][i]=t,n},{}),t=_.cloneDeep(n.data);Object.keys(o).forEach(function(n){var e=o[n];t[n].position=[e.x,e.y,e.z]}),n.data=t})}).onComplete(function(){l()}).onStop(function(){console.log("hello"),l()}).interpolation(TWEEN.Interpolation.Bezier).easing(TWEEN.Easing.Linear.None).delay(250).start():o(l,r)}function a(n){requestAnimationFrame(a),TWEEN.update(n)}var i=2e3,r=500;n.loading=!0,n.playing=!1,n.data=[];var l=[],c=null;n.values={index:1},n.config={colortype:"variable",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}},e.Pick().stats(function(e){return n.loading=!1,e.error?console.log(e.error):(l=Immutable.List(e.data.stats),void(n.data=_.cloneDeep(l.get(0))))}),n.play=function(){function e(o){if(o<l.count()-1&&n.playing){var a=_.cloneDeep(l.get(o)),i=_.cloneDeep(l.get(o+1));t(o,a,i,function(){e(o+1)})}else n.playing=!1,n.values.index=1,n.data=[],n.data=_.cloneDeep(l.get(0))}n.playing=!0,e(0)},n.stop=function(){n.playing=!1},requestAnimationFrame(a)}]),angular.module("Application").controller("SliderCtrl",["$scope","CompanyService","$alexandraModel",function(n,e,o){var t;n.loading=!0,n.config={type:"custom",engine:"phong_positional",colortype:"variable",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}};var a=RandColor(),i=function(e){var t=o.Text(e,{size:10,height:.5,curveSegments:30,bevelEnabled:!0,bevelThickness:1.5,bevelSize:.5});n.data={mesh:t,position:[50,50,150],rotation:{angle:45,axis:[0,1,0]},color:a}},r=function(){e.Profile().get(function(e){return e.error?console.log(e.error):(t=e.data,n.loading=!1,void i(t.name))})};r()}]),angular.module("Application").controller("SpecialCtrl",["$scope","$alexandraModel",function(n,e){}]),angular.module("Application").factory("ApiService",["$resource","$location",function(n,e){return{env:"prod",prod:{protocol:"https",host:"pickyourday.herokuapp.com",port:"",root:"api"},dev:{protocol:"http",host:"localhost",port:"5000",root:"api"},getApiPath:function(n){var e=this[this.env];return e.protocol+"://"+e.host+(""!==e.port?":"+e.port:"")+"/"+e.root+"/"+n},rest:function(e,o,t){var a=n(this.getApiPath(e),t||{},o||{});return a}}}]),angular.module("Application").factory("CompanyService",["ApiService",function(n){return{base:"company",Pick:function(){return n.rest(this.base+"/statsPicks",{stats:{method:"GET",params:{}}})},OriginPick:function(){return n.rest(this.base+"/originPicks",{stats:{method:"GET",params:{}}})},ScoreService:function(){return n.rest(this.base+"/scoreService",{stats:{method:"GET",params:{}}})},MoneyResource:function(){return n.rest(this.base+"/moneyResources",{stats:{method:"GET",params:{}}})},WorkResource:function(){return n.rest(this.base+"/workResources",{stats:{method:"GET",params:{}}})},Profile:function(){return n.rest(this.base+"/profile",{get:{method:"GET",params:{}}})}}}]),angular.module("Application").factory("AuthInterceptor",["$q","$location",function(n,e){return{request:function(n){n.headers=n.headers||{};var e=getJSONLocal("user"),e=getJSONLocal("user");return!n.headers.Authorization&&e&&(n.headers.Authorization=e.token),n},requestError:function(e){return n.reject(e)},response:function(e){return"ERROR"===e.data.status?n.reject(e):e||n.when(e)},responseError:function(o){return 403===o.status?(console.error("Error de acceso"),localStorage.user="",void e.path("/")):n.reject(o)}}}]),angular.module("Application").factory("OauthService",["ApiService",function(n){return{base:"oauth",login:function(){return n.rest(this.base,{Session:{method:"POST",params:{}}})},logout:function(){return n.rest(this.base+"/logout",{Session:{method:"GET",params:{}}})},role:function(){return n.rest(this.base+"/role/:role",{check:{method:"GET",params:{role:"@role"}}})}}}]),angular.module("Application").factory("RequestService",function(){return{ServerNotFound:ClosureMessage("Server Not Found"),NoRoleAuthorized:ClosureMessage("No Role Authorized")}}),angular.module("Application").factory("StatsService",["CompanyService",function(n){function e(n,e){return function(o){return o.error?e(o.error):o.data?void n(o.data):e("No Data")}}function o(n){return function(){return n?n("Server Not Found"):void console.log("Server Not Found")}}return{Picks:function(t,a){n.Pick().stats(e(t,a),o(a))},OriginPicks:function(t,a){n.OriginPick().stats(e(t,a),o(a))},ScoreServices:function(t,a){n.ScoreService().stats(e(t,a),o(a))},MoneyResources:function(t,a){n.MoneyResource().stats(e(t,a),o(a))},WorkResources:function(t,a){n.WorkResource().stats(e(t,a),o(a))}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdXRpbHMuanMiLCJhcHBsaWNhdGlvbi5qcyIsInRlbXBsYXRlLWNhY2hlLmpzIiwiY29uZmlnL2Jvb3QuanMiLCJjb25maWcvZW52aXJvbm1lbnQuanMiLCJjb250cm9sbGVycy9hcHBsaWNhdGlvbl9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaGVpZ2h0X21hcF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL25vcm1hbF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGxheWVyX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zbGlkZXJfY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3NwZWNpYWxfY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvYXBpLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzL2NvbXBhbnlfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvaW50ZXJjZXB0b3Jfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvb2F1dGguc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvcmVxdWVzdF9zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9zZXJ2aWNlcy9zdGF0c19zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNhdmVMb2NhbCIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0SlNPTkxvY2FsIiwicmVzdWx0Iiwic3RyX2pzb24iLCJ1bmRlZmluZWQiLCJwYXJzZSIsImUiLCJkZWxldGVMb2NhbCIsInJlbW92ZUl0ZW0iLCJDbG9zdXJlTWVzc2FnZSIsIm1lc3NhZ2UiLCJmbiIsImVtcHR5T3JVbmRlZmluZWQiLCJ2YWx1ZSIsIlJhbmRQb3NpdGlvbiIsInYiLCJyYW5nZSIsIm1pbiIsIm1heCIsIngiLCJjaGFuY2UiLCJmbG9hdGluZyIsInkiLCJ6IiwiUmFuZENvbG9yIiwicmFuZ2VDb2xvciIsImZpeGVkIiwiciIsImciLCJiIiwiUmFuZFNpemUiLCJzaXplIiwiUmFuZFJvdGF0aW9uIiwiTnVtYmVyIiwiYm9vbCIsImFuZ2xlIiwiaW50ZWdlciIsImF4aXMiLCJnZW5lcmF0ZSIsImNvdW50IiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsIiRzdGF0ZSIsInNob3dUb2FzdCIsIm1zZyIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInRoZW1lIiwiaGlkZURlbGF5IiwiZ28iLCJzdGF0ZSIsInBhcmFtcyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInVybCIsIm9uRW50ZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhYnN0cmFjdCIsInZpZXdzIiwiY29udGVudCIsIm90aGVyd2lzZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImh1ZS0yIiwiaHVlLTMiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCIkc2NvcGUiLCJPYXV0aFNlcnZpY2UiLCJvcGVuTWVudSIsIiRtZE9wZW5NZW51IiwiZXYiLCJvcmlnaW5hdG9yRXYiLCJsb2dvdXQiLCJTZXNzaW9uIiwiQ29tcGFueVNlcnZpY2UiLCIkYWxleGFuZHJhTW9kZWwiLCJsb2FkaW5nIiwidHlwZSIsImVuZ2luZSIsImF4aXNMZW5ndGgiLCJzdHJlYW1pbmciLCJiYWNrZ3JvdW5kIiwiZ3JpZCIsImdyaWRDb25maWciLCJsaW5lcyIsImRpbSIsImxpZ2h0IiwiZGlyZWN0aW9uIiwiY29sb3J0eXBlIiwicGxhbmUiLCJpbmRleCIsIlBpY2siLCJzdGF0cyIsInJlcyIsImFwcGx5UGxhbmUiLCJzZWxlY3QiLCJjb2xvciIsImNhbGVuZGFyIiwidmVydGljZXMiLCJjdXJyZW50X2RheSIsIm1lc2giLCJQbGFuZSIsImhlaWdodCIsIndpZHRoIiwid19zIiwidldpZHRoIiwiaF9zIiwidkhlaWdodCIsInByZXYiLCJpdGVtIiwiY19wIiwiXyIsImZpbmQiLCJpIiwicG9zaXRpb24iLCJSZXF1ZXN0U2VydmljZSIsInVzZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJhc3luYyIsIndhdGVyZmFsbCIsIm5leHQiLCJpc0VtYWlsIiwiaXNQYXNzd29yZCIsImVycm9yIiwiU2VydmVyTm90Rm91bmQiLCJyb2xlIiwiY2hlY2siLCJOb1JvbGVBdXRob3JpemVkIiwiZXJyIiwiU3RhdHNTZXJ2aWNlIiwiJGFsZXhhbmRyYVN0b3JlIiwiJGFsZXhhbmRyYUZvcmVzdCIsInNlbGVjdGVkSW5mbyIsInNlbGVjdGVkIiwic3RhdFR5cGUiLCJzdGF0c1RpbWUiLCJmdWxsV2lkdGgiLCJwZXJtaXRFZmZlY3RzIiwic2VsZWN0b3IiLCJvblNlbGVjdGVkIiwiTGFiZWxYQ29uZmlnIiwib2Zmc2V0IiwiTGFiZWxZQ29uZmlnIiwiTGFiZWxaQ29uZmlnIiwibGlnaHRTZXF1ZW5jZSIsImxpZ2h0cyIsImJsdWUiLCJncmVlbiIsInJlZCIsIkFwcGx5VGV4dCIsInRleHQiLCJtb2RlbCIsIlRleHQiLCJyb3RhdGlvbiIsIlRpdGxlIiwiUHJvZmlsZSIsImdldCIsImNvbnNvbGUiLCJsb2ciLCJwcm9maWxlIiwibmFtZSIsImZldGNoIiwiSW1tdXRhYmxlIiwiTGlzdCIsImNsb25lIiwiTGFiZWxYIiwibGVnZW5kIiwiTGFiZWxZIiwiTGFiZWxaIiwiZ2V0VHJlZSIsImNoYW5nZVN0YXRUeXBlIiwiUGlja3MiLCJTY29yZVNlcnZpY2VzIiwiTW9uZXlSZXNvdXJjZXMiLCJXb3JrUmVzb3VyY2VzIiwiT3JpZ2luUGlja3MiLCIkdGltZW91dCIsImFuaW1hdGVDYWxlbmRhciIsInN0ZXAiLCJjIiwibiIsImNiIiwiaW50ZXJfZGF0YSIsInJlZHVjZSIsImNfcG9zIiwibl9wb3MiLCJpc0VxdWFsIiwibGVuZ3RoIiwiY3VycmVudCIsInZhbHVlcyIsInR3ZWVuIiwiVFdFRU4iLCJUd2VlbiIsInRvIiwiUExBWUVSX1RJTUUiLCJvblVwZGF0ZSIsInNlbGYiLCJ0aGlzIiwiJCRwaGFzZSIsIiRhcHBseSIsInBsYXlpbmciLCJzdG9wIiwiaW50ZXJfYXJyYXkiLCJPYmplY3QiLCJrZXlzIiwic3BsaXQiLCJwYXJhbSIsImNsb25lX2RhdGEiLCJjbG9uZURlZXAiLCJmb3JFYWNoIiwib25Db21wbGV0ZSIsIm9uU3RvcCIsImludGVycG9sYXRpb24iLCJJbnRlcnBvbGF0aW9uIiwiQmV6aWVyIiwiZWFzaW5nIiwiRWFzaW5nIiwiTGluZWFyIiwiTm9uZSIsImRlbGF5Iiwic3RhcnQiLCJFTVBUWV9USU1FIiwiSW50ZXJwb2xhdGlvblRpbWUiLCJ0aW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidXBkYXRlIiwicGxheSIsIml0ZXIiLCJjdXJ2ZVNlZ21lbnRzIiwiYmV2ZWxFbmFibGVkIiwiYmV2ZWxUaGlja25lc3MiLCJiZXZlbFNpemUiLCJHZXRQcm9maWxlIiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsIiRsb2NhdGlvbiIsImVudiIsInByb2QiLCJwcm90b2NvbCIsImhvc3QiLCJwb3J0Iiwicm9vdCIsImRldiIsImdldEFwaVBhdGgiLCJwYXRoIiwiYXBpIiwicmVzdCIsIm1ldGhvZHMiLCJkZWZhdWx0UGFyYW1zIiwicmVzb3VyY2UiLCJBcGlTZXJ2aWNlIiwiYmFzZSIsIm1ldGhvZCIsIk9yaWdpblBpY2siLCJTY29yZVNlcnZpY2UiLCJNb25leVJlc291cmNlIiwiV29ya1Jlc291cmNlIiwiJHEiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJ0b2tlbiIsInJlcXVlc3RFcnJvciIsInJlamVjdGlvbiIsInJlamVjdCIsInJlc3BvbnNlIiwic3Rh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QUFBbUwsRUFBQXhGLEVBQUExRCxHQUFBbUosRUFBQW5KLEtBRUFtRCxjQUFBLFNBQUFPLEVBQUExRCxHQUNBbkQsRUFBQXdMLGVBQUF0SyxNQUFBbUwsRUFBQXhGLEVBQUExRCxHQUFBbUosRUFBQW5KIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzYXZlTG9jYWwoa2V5LCBkYXRhKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Vba2V5XSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRKU09OTG9jYWwoa2V5KSB7XHJcblxyXG4gICAgdmFyIHJlc3VsdCA9IG51bGw7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBzdHJfanNvbiA9IGxvY2FsU3RvcmFnZVtrZXldO1xyXG5cclxuICAgICAgICBpZiAoc3RyX2pzb24hPT11bmRlZmluZWQpIHtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2Uoc3RyX2pzb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZUxvY2FsKGtleSkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2xvc3VyZU1lc3NhZ2UobWVzc2FnZSl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZm4pe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBmbihtZXNzYWdlKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1wdHlPclVuZGVmaW5lZCh2YWx1ZSl7XHJcbiAgICByZXR1cm4gdmFsdWU9PXZvaWQgMCB8fCB2YWx1ZT09PVwiXCI7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBSYW5kUG9zaXRpb24odikge1xyXG4gICAgdmFyIHJhbmdlID0gdiB8fCB7IG1pbjogMCwgbWF4OiAxMDAgfTtcclxuICAgIHZhciB4ID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlKTtcclxuICAgIHZhciB5ID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlKTtcclxuICAgIHZhciB6ID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlKTtcclxuICAgIHJldHVybiBbeCwgeSwgel07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJhbmRDb2xvcih2KSB7XHJcbiAgICB2YXIgcmFuZ2VDb2xvciA9IHYgfHwgeyBtaW46IDAsIG1heDogMSwgZml4ZWQ6IDIgfTtcclxuICAgIHZhciByID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlQ29sb3IpO1xyXG4gICAgdmFyIGcgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2VDb2xvcik7XHJcbiAgICB2YXIgYiA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZUNvbG9yKTtcclxuICAgIHJldHVybiBbciwgZywgYiwgMV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJhbmRTaXplKHYpIHtcclxuICAgIHZhciByYW5nZSA9IHYgfHwgeyBtaW46IDAuMSwgbWF4OiAyLCBmaXhlZDogMSB9O1xyXG4gICAgdmFyIHNpemUgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgcmV0dXJuIFtzaXplLCBzaXplLCBzaXplXTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFJhbmRSb3RhdGlvbih2KXtcclxuICAgIHZhciByYW5nZSA9IHYgfHwgeyBtaW46IDAsIG1heDogMzYwfTtcclxuICAgIHZhciB4PU51bWJlcihjaGFuY2UuYm9vbCgpKTtcclxuICAgIHZhciB5PU51bWJlcihjaGFuY2UuYm9vbCgpKTtcclxuICAgIHZhciB6PU51bWJlcihjaGFuY2UuYm9vbCgpKTtcclxuICAgIHJldHVybiAge1xyXG4gICAgICAgIGFuZ2xlOmNoYW5jZS5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDM2MH0pLFxyXG4gICAgICAgIGF4aXM6W3gseSx6XVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGUoZm4pIHtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY291bnQgPSBjaGFuY2UuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAxMDAgfSk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmFwcGx5KDAsIEFycmF5KGNvdW50KSkubWFwKGZuKTtcclxuICAgIH07XHJcbn0iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyd1aS5yb3V0ZXInLCBcIm5nUmVzb3VyY2VcIiwnbmdBbmltYXRlJywgJ25nTWF0ZXJpYWwnLCAnYWxleGFuZHJhJ10pOyIsIihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9tYWluLmh0bWwnLFxuICAgICdcXG4nICtcbiAgICAnPG1kLXRvb2xiYXIgY2xhc3M9XCJtZC1hY2NlbnQgbWQtd2hpdGVmcmFtZS0xZHBcIj5cXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJtZC10b29sYmFyLXRvb2xzXCI+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLW1lbnUgZmxleD1cIjVcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwiVHlwZSBTdGF0c1wiIGNsYXNzPVwibWQtaWNvbi1idXR0b24gYnV0dG9uLXN0YXRzXCIgbmctY2xpY2s9XCJvcGVuTWVudSgkbWRPcGVuTWVudSwgJGV2ZW50KVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtbWVudS1vcmlnaW4gbWQtZm9udC1pY29uPVwibWRpLWNoYXJ0LWFyZWFzcGxpbmVcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1tZW51LWNvbnRlbnQgd2lkdGg9XCI0XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gdWktc3JlZj1cImFwcC5ub3JtYWxcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLWNoYXJ0LWJ1YmJsZVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICBOb3JtYWxcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bWQtYnV0dG9uICB1aS1zcmVmPVwiYXBwLnNsaWRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktY2xvY2stc3RhcnRcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgU2xpZGVyXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWRpdmlkZXI+PC9tZC1tZW51LWRpdmlkZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gIHVpLXNyZWY9XCJhcHAucGxheWVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1wbGF5LWJveC1vdXRsaW5lXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIFBsYXllclxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gIHVpLXNyZWY9XCJhcHAuaGVpZ2h0bWFwXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1haXJwbGFuZS1sYW5kaW5nXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIEhlaWdodCBNYXBcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5zcGVjaWFsXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1jYXN0bGVcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgU3BlY2lhbFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtbWVudS1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtbWVudT5cXG4nICtcbiAgICAnICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICA8aDI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuPlBpY2t5b3VyZGF5IDNEPC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgIDwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gZmxleD48L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwibG9nb3V0XCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBidXR0b24tcG93ZXJcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMHB4O1wiIG5nLWNsaWNrPVwibG9nb3V0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBvd2VyXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9tZC10b29sYmFyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzxkaXYgdWktdmlldz1cImNvbnRlbnRcIj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9oZWlnaHQtbWFwL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICcgICAgPGRpdiBmbGV4PVwiMzVcIiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgc3RyZWNoXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLXNsaWRlciBjbGFzcz1cIm1kLXByaW1hcnlcIiBtZC1kaXNjcmV0ZSBzdGVwPVwiMVwiIG1pbj1cIjFcIiBtYXg9XCIzMFwiIGFyaWEtbGFiZWw9XCJyYXRpbmdcIiBuZy1zaG93PVwiIWxvYWRpbmdcIiBuZy1tb2RlbD1cImluZGV4XCIgbmctY2hhbmdlPVwic2VsZWN0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtc2xpZGVyPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvbG9naW4vbWFpbi5odG1sJyxcbiAgICAnPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8bWQtY2FyZD5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC10aXRsZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWNhcmQtdGl0bGUtdGV4dD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWQtaGVhZGxpbmVcIj5QaWNreW91cmRheSAzRDwvc3Bhbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtY2FyZC10aXRsZS10ZXh0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L21kLWNhcmQtdGl0bGU+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWNhcmQtY29udGVudCBsYXlvdXQ9XCJjb2x1bW5cIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtcHJpbWFyeSBtZC1yYWlzZWQgbWQtaHVlLTJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxsYWJlbD5FbWFpbDwvbGFiZWw+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ1c2VyLmVtYWlsXCIgdHlwZT1cImVtYWlsXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciBjbGFzcz1cIm1kLXByaW1hcnkgbWQtcmFpc2VkIG1kLWh1ZS0yXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bGFiZWw+UGFzc3dvcmQ8L2xhYmVsPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidXNlci5wYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLWNhcmQtY29udGVudD5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC1hY3Rpb25zIGxheW91dD1cInJvd1wiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLXByaW1hcnkgIG1kLXJhaXNlZCBtZC1odWUtMlwiIG5nLWNsaWNrPVwibG9naW4oKVwiPkxvZ2luPC9tZC1idXR0b24+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC1hY3Rpb25zPlxcbicgK1xuICAgICcgICAgPC9tZC1jYXJkPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL25vcm1hbC9tYWluLmh0bWwnLFxuICAgICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgbmctaWY9XCJsb2FkaW5nXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjUwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICc8ZGl2IGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxtZC1zZWxlY3QgZmxleD1cIjIwXCIgbmctbW9kZWw9XCJzZWxlY3RlZC5zdGF0VHlwZVwiICBmbGV4LW9mZnNldD1cIjVcIiBwbGFjZWhvbGRlcj1cIlNlbGVjY2lvbmEgeC95L3pcIiBuZy1jaGFuZ2U9XCJjaGFuZ2VTdGF0VHlwZSgpXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxtZC1vcHRpb24gdmFsdWU9XCJwaWNrXCI+RXN0YWRvIGRlIFBpY2svQ2FudGlkYWQvU2VydmljaW88L21kLW9wdGlvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPG1kLW9wdGlvbiB2YWx1ZT1cInNjb3JlXCI+VmFsb3JhY2nDs24vQ2FudGlkYWQvU2VydmljaW88L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwibW9uZXlcIj5FbXBsZWFkby9EaW5lcm8vU2VydmljaW88L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwid29ya1wiPkVtcGxlYWRvL1RpZW1wbyBUcmFiYWphZG8vU2VydmljaW88L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgIDwvbWQtc2VsZWN0PlxcbicgK1xuICAgICcgICAgXFxuJyArXG4gICAgJyAgICAgPG1kLXNlbGVjdCBmbGV4PVwiMjBcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDo1JTtcIiBuZy1tb2RlbD1cImNvbmZpZy5lbmdpbmVcIiAgZmxleC1vZmZzZXQ9XCI1XCIgcGxhY2Vob2xkZXI9XCJTZWxlY2Npb25hIGVuZ2luZVwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwicGhvbmdcIj5QaG9uZzwvbWQtb3B0aW9uPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwicGhvbmdfcG9zaXRpb25hbFwiPlBob25nIFBvc2l0aW9uYWw8L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwidG9vblwiPlRvb248L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwicGhvbmdfbGlnaHRzXCI+UGhvbmcgU2V2ZXJhbCBMaWdodHM8L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgIDwvbWQtc2VsZWN0PlxcbicgK1xuICAgICcgICAgIDxtZC1jaGVja2JveCBmbGV4IG5nLW1vZGVsPVwiY29uZmlnLnNlbGVjdG9yXCIgYXJpYS1sYWJlbD1cIlNlbGVjdG9yXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIFVzZSBTZWxlY3RvclxcbicgK1xuICAgICcgICAgICAgICAgPC9tZC1jaGVja2JveD5cXG4nICtcbiAgICAnICAgICA8bWQtc2VsZWN0IGZsZXg9XCIyMFwiIHN0eWxlPVwibWFyZ2luLXJpZ2h0OjUlO1wiIG5nLW1vZGVsPVwiY29uZmlnLmVmZmVjdFwiICBuZy1pZj1cIiFjb25maWcuc2VsZWN0b3JcIiBmbGV4LW9mZnNldD1cIjVcIiBwbGFjZWhvbGRlcj1cIlNlbGVjY2lvbmEgZWZmZWN0XCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxtZC1vcHRpb24gdmFsdWU9XCJub1wiPk5vIEVmZmVjdDwvbWQtb3B0aW9uPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwiaW52ZXJ0XCI+TmVnYXRpdmU8L21kLW9wdGlvbj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwiZ3JleVwiPkdyZXlzY2FsZTwvbWQtb3B0aW9uPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1vcHRpb24gdmFsdWU9XCJibHVyXCI+Qmx1cjwvbWQtb3B0aW9uPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1vcHRpb24gdmFsdWU9XCJmaWxtXCI+RmlsbTwvbWQtb3B0aW9uPlxcbicgK1xuICAgICcgICAgICAgIDxtZC1vcHRpb24gdmFsdWU9XCJ3YXZ5XCI+V2F2eTwvbWQtb3B0aW9uPlxcbicgK1xuICAgICcgICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPVwiYWxsXCI+UmFuZG9tPC9tZC1vcHRpb24+XFxuJyArXG4gICAgJyAgICA8L21kLXNlbGVjdD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgPGRpdiBuZy1pZj1cInN0YXRzVGltZVwiIGxheW91dD1cInJvd1wiIHN0eWxlPVwicG9zaXRpb246IGZpeGVkO1xcbicgK1xuICAgICcgICAgdG9wOiA1MHB4O1xcbicgK1xuICAgICcgICAgbGVmdDogMzBweDtcXG4nICtcbiAgICAnICAgIHdpZHRoOiA0MTBweDtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbicgK1xuICAgICcgICAgcGFkZGluZy1sZWZ0OiAyN3B4O1xcbicgK1xuICAgICcgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IDAgcmdiYSgwLDAsMCwuMiksMCAxcHggMXB4IDAgcmdiYSgwLDAsMCwuMTQpLDAgMnB4IDFweCAtMXB4IHJnYmEoMCwwLDAsLjEyKTtcIj5cXG4nICtcbiAgICAnICAgICAgICA8cCBmbGV4PVwiMjBcIj5YOiB7e3NlbGVjdGVkSW5mb1swXXx8XFwnTi9BXFwnfX08L3A+XFxuJyArXG4gICAgJyAgICAgICAgPHAgZmxleD1cIjEwXCI+WToge3tzZWxlY3RlZEluZm9bMV0gfHwgXFwnMFxcJ319PC9wPlxcbicgK1xuICAgICcgICAgICAgIDxwIGZsZXg+Wjoge3tzZWxlY3RlZEluZm9bMl18fFxcJ04vQVxcJ319PC9wPlxcbicgK1xuICAgICcgICAgPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvcGxheWVyL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICcgICAgPGRpdiBmbGV4PVwiMzVcIiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgc3RyZWNoXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBmbGV4IGxheW91dD1cInJvd1wiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBuZy1jbGljaz1cInBsYXkoKVwiIG5nLWlmPVwiIWxvYWRpbmcmJiFwbGF5aW5nXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktcGxheVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgUGxheVxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgXFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJzdG9wKClcIiBuZy1pZj1cInBsYXlpbmdcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1zdG9wXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICBTdG9wXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8ZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtc2xpZGVyLWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZC1ib2R5LTFcIj57e3ZhbHVlcy5pbmRleH19PC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLXNsaWRlciBjbGFzcz1cIm1kLXByaW1hcnlcIiBtZC1kaXNjcmV0ZSBzdGVwPVwiMVwiIG1pbj1cIjFcIiBtYXg9XCIzMFwiIGFyaWEtbGFiZWw9XCJyYXRpbmdcIiBuZy1zaG93PVwiIWxvYWRpbmdcIiBuZy1tb2RlbD1cInZhbHVlcy5pbmRleFwiIG5nLWRpc2FibGVkPVwidHJ1ZVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1zbGlkZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtc2xpZGVyLWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnJyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3Mvc2xpZGVyL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9zcGVjaWFsL21haW4uaHRtbCcsXG4gICAgJycpO1xufV0pO1xufSkoKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICAkbWRUb2FzdCwgJHN0YXRlKXtcclxuXHJcbiAgICAkcm9vdFNjb3BlLnNob3dUb2FzdCA9IGZ1bmN0aW9uKG1zZykge1xyXG4gICAgICBcclxuICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAudGV4dENvbnRlbnQobXNnKVxyXG4gICAgICAgICAgICAudGhlbWUoXCJwaWNrLXRoZW1lXCIpXHJcbiAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgICRyb290U2NvcGUuZ28gPSBmdW5jdGlvbiAoc3RhdGUsIHBhcmFtcykge1xyXG4gICAgICAgICRzdGF0ZS5nbyhzdGF0ZSwgcGFyYW1zKTtcclxuICAgIH07XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAgJG1kVGhlbWluZ1Byb3ZpZGVyKXtcclxuXHJcblxyXG4gICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAuc3RhdGUoXCJsb2dpblwiLCB7XHJcbiAgICAgICAgdXJsOiBcIi9sb2dpblwiLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmIChnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcC5wbGF5ZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luL21haW4uaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcgICAgICBcclxuXHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcFwiLCB7XHJcbiAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9tYWluLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBDdHJsJyxcclxuICAgICAgICBhYnN0cmFjdDp0cnVlXHJcblxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHAubm9ybWFsXCIsIHtcclxuICAgICAgICB1cmw6ICdub3JtYWwnLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvbm9ybWFsL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTm9ybWFsQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgLnN0YXRlKFwiYXBwLnNsaWRlclwiLCB7XHJcbiAgICAgICAgdXJsOiAnc2xpZGVyJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NsaWRlci9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1NsaWRlckN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcbiAgICAgLnN0YXRlKFwiYXBwLnBsYXllclwiLCB7XHJcbiAgICAgICAgdXJsOiAncGxheWVyJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3BsYXllci9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1BsYXllckN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoXCJhcHAuaGVpZ2h0bWFwXCIsIHtcclxuICAgICAgICB1cmw6ICdoZWlnaHQtbWFwJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2hlaWdodC1tYXAvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIZWlnaHRNYXBDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKFwiYXBwLnNwZWNpYWxcIiwge1xyXG4gICAgICAgIHVybDogJ3NwZWNpYWwnLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc3BlY2lhbC9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1NwZWNpYWxDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG5cclxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvbG9naW5cIik7XHJcblxyXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcblxyXG4gICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAuYmFja2dyb3VuZFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICdkZWZhdWx0JzogJzUwMCcsIC8vIGJ5IGRlZmF1bHQgdXNlIHNoYWRlIDQwMCBmcm9tIHRoZSBwaW5rIHBhbGV0dGUgZm9yIHByaW1hcnkgaW50ZW50aW9uc1xyXG4gICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTInOiAnNjAwJywgLy8gdXNlIHNoYWRlIDYwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0yPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTMnOiAnQTEwMCcgLy8gdXNlIHNoYWRlIEExMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMzwvY29kZT4gY2xhc3NcclxuICAgIH0pXHJcbiAgICAucHJpbWFyeVBhbGV0dGUoJ2xpbWUnLCB7XHJcbiAgICAgICdkZWZhdWx0JzogJzQwMCcsIC8vIGJ5IGRlZmF1bHQgdXNlIHNoYWRlIDQwMCBmcm9tIHRoZSBwaW5rIHBhbGV0dGUgZm9yIHByaW1hcnkgaW50ZW50aW9uc1xyXG4gICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTInOiAnNjAwJywgLy8gdXNlIHNoYWRlIDYwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0yPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTMnOiAnQTEwMCcgLy8gdXNlIHNoYWRlIEExMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMzwvY29kZT4gY2xhc3NcclxuICAgIH0pXHJcbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBsZXNzIHRoYW4gYWxsIG9mIHRoZSBrZXlzLCBpdCB3aWxsIGluaGVyaXQgZnJvbSB0aGVcclxuICAgIC8vIGRlZmF1bHQgc2hhZGVzXHJcbiAgICAuYWNjZW50UGFsZXR0ZSgndGVhbCcsIHtcclxuICAgICAgJ2RlZmF1bHQnOiAnNTAwJyAvLyB1c2Ugc2hhZGUgMjAwIGZvciBkZWZhdWx0LCBhbmQga2VlcCBhbGwgb3RoZXIgc2hhZGVzIHRoZSBzYW1lXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxufSk7XHJcblxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE9hdXRoU2VydmljZSl7XHJcbiAgICBcclxuICAgIFxyXG4gICAgJHNjb3BlLm9wZW5NZW51ID0gZnVuY3Rpb24oJG1kT3Blbk1lbnUsIGV2KSB7XHJcbiAgICAgIG9yaWdpbmF0b3JFdiA9IGV2O1xyXG4gICAgICAkbWRPcGVuTWVudShldik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICRzY29wZS5sb2dvdXQ9ZnVuY3Rpb24oKXtcclxuICAgICAgICBPYXV0aFNlcnZpY2UuIGxvZ291dCgpLlNlc3Npb24oZnVuY3Rpb24oKXtcclxuXHRcdCBkZWxldGVMb2NhbChcInVzZXJcIik7XHJcbiAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpOyAgIFxyXG5cdH0sIGZ1bmN0aW9uKCl7fSk7XHJcbiAgICB9XHJcbiAgICBcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdIZWlnaHRNYXBDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBDb21wYW55U2VydmljZSwgJGFsZXhhbmRyYU1vZGVsKXtcclxuXHJcblxyXG4gICAgJHNjb3BlLmxvYWRpbmc9dHJ1ZTtcclxuXHJcbiAgICAkc2NvcGUuY29uZmlnID0ge1xyXG4gICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXHJcblx0XHRlbmdpbmU6XCJwaG9uZ19wb3NpdGlvbmFsXCIsXHJcbiAgICAgICAgYXhpczogdHJ1ZSxcclxuICAgICAgICBheGlzTGVuZ3RoOiA1MDAsXHJcbiAgICAgICAgc3RyZWFtaW5nOiB0cnVlLFxyXG4gICAgICAgIGJhY2tncm91bmQ6IFswLjMsIDAuMywgMC4zXSxcclxuICAgICAgICBncmlkOiB0cnVlLFxyXG4gICAgICAgIGdyaWRDb25maWc6IHtcclxuICAgICAgICAgICAgbGluZXM6IDYwLFxyXG4gICAgICAgICAgICBkaW06IDUwMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGlnaHQ6e1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246Wy0xLjAsIC0xLjAsIC0xXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29sb3J0eXBlOlwidmFyaWFibGVcIixcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHBsYW5lPXt9O1xyXG5cclxuICAgICRzY29wZS5pbmRleD0xO1xyXG5cclxuICAgIENvbXBhbnlTZXJ2aWNlLlBpY2soKS5zdGF0cyhmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nPWZhbHNlO1xyXG4gICAgICAgIHBsYW5lPXJlcy5kYXRhLnBsYW5lO1xyXG5cclxuICAgICAgICBhcHBseVBsYW5lKCk7XHJcblxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICRzY29wZS5zZWxlY3Q9ZnVuY3Rpb24oKXtcclxuICAgICAgICBhcHBseVBsYW5lKCk7XHJcbiAgICB9XHJcblx0dmFyIGNvbG9yPVJhbmRDb2xvcigpO1xyXG5cclxuICAgIHZhciBhcHBseVBsYW5lPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGNhbGVuZGFyPXBsYW5lLnZlcnRpY2VzO1xyXG4gICAgICAgIHZhciBpbmRleD0kc2NvcGUuaW5kZXgtMTtcclxuICAgICAgICB2YXIgY3VycmVudF9kYXk9Y2FsZW5kYXJbaW5kZXhdO1xyXG5cclxuICAgICAgICAkc2NvcGUuZGF0YT17XHJcbiAgICAgICAgICAgIG1lc2g6JGFsZXhhbmRyYU1vZGVsLlBsYW5lKHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDpwbGFuZS5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDpwbGFuZS53aWR0aCxcclxuICAgICAgICAgICAgICAgIHdfczpwbGFuZS52V2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoX3M6cGxhbmUudkhlaWdodFxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihwcmV2LCBpdGVtLCBpbmRleCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgeD1pdGVtLngsIHk9aXRlbS56LCB6PWl0ZW0ueTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY19wPV8uZmluZChjdXJyZW50X2RheSwgZnVuY3Rpb24oaSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkua2V5PT1pbmRleDsgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoY19wKXtcclxuICAgICAgICAgICAgICAgICAgICB5PWNfcC55O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHByZXYucHVzaCh4KTtcclxuICAgICAgICAgICAgICAgIHByZXYucHVzaCh5KTtcclxuICAgICAgICAgICAgICAgIHByZXYucHVzaCh6KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgcG9zaXRpb246WzUwLDAsNTBdLFxyXG5cdFx0XHRjb2xvcjpjb2xvclxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgT2F1dGhTZXJ2aWNlLCBSZXF1ZXN0U2VydmljZSl7XHJcbiAgICBcclxuXHJcbiAgICBcclxuICAgICRzY29wZS51c2VyID0ge2VtYWlsOlwiXCIsIHBhc3N3b3JkOlwiXCJ9O1xyXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzeW5jLndhdGVyZmFsbChbXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShuZXh0KXtcclxuICAgICAgICAgICAgICAgIHZhciBpc0VtYWlsPWVtcHR5T3JVbmRlZmluZWQoJHNjb3BlLnVzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUGFzc3dvcmQ9ZW1wdHlPclVuZGVmaW5lZCgkc2NvcGUudXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgICAgICBpZihpc0VtYWlsIHx8IGlzUGFzc3dvcmQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlzRW1haWwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KFwiRW1haWwgRW1wdHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzUGFzc3dvcmQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KFwiUGFzc3dvcmQgRW1wdHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5leHQpe1xyXG5cclxuICAgICAgICAgICAgICAgIE9hdXRoU2VydmljZS5sb2dpbigpLlNlc3Npb24oJHNjb3BlLnVzZXIsIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmVycm9yKXJldHVybiBuZXh0KHJlcy5lcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQobnVsbCwgcmVzLmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIFJlcXVlc3RTZXJ2aWNlLlNlcnZlck5vdEZvdW5kKG5leHQpKTtcclxuXHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JvbGUodXNlciwgbmV4dCl7XHJcbiAgICAgICAgICAgICAgICBPYXV0aFNlcnZpY2Uucm9sZSgpLmNoZWNrKHtyb2xlOnVzZXIucm9sZX0sIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmVycm9yKXJldHVybiBuZXh0KHJlcy5lcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhPT0yKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQobnVsbCwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3RTZXJ2aWNlLk5vUm9sZUF1dGhvcml6ZWQobmV4dCkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgUmVxdWVzdFNlcnZpY2UuU2VydmVyTm90Rm91bmQobmV4dCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgXSwgZnVuY3Rpb24oZXJyLCB1c2VyKXtcclxuICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcm9vdFNjb3BlLnNob3dUb2FzdChlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNhdmVMb2NhbChcInVzZXJcIiwgdXNlcik7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJhcHAubm9ybWFsXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignTm9ybWFsQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29tcGFueVNlcnZpY2UsIFN0YXRzU2VydmljZSwgJGFsZXhhbmRyYU1vZGVsLCAgJGFsZXhhbmRyYVN0b3JlLCAkYWxleGFuZHJhRm9yZXN0KXtcclxuXHJcbiAgICAkc2NvcGUubG9hZGluZz10cnVlO1xyXG4gICAgJHNjb3BlLmRhdGE9W107XHJcbiAgICAkc2NvcGUuc2VsZWN0ZWRJbmZvPXt9O1xyXG4gICAgJHNjb3BlLnNlbGVjdGVkPXtcclxuICAgICAgICBzdGF0VHlwZTpcIm5vXCIsXHJcbiAgICAgICAgXCJlbmdpbmVcIjpcInBob25nXCJcclxuICAgIH07XHJcbiAgICBcclxuXHJcblxyXG4gICAgJHNjb3BlLnN0YXRzVGltZT1mYWxzZTtcclxuICAgIHZhciBjYWxlbmRhcj1bXTtcclxuXHJcbiAgICAkc2NvcGUuY29uZmlnPXtcclxuICAgICAgICBjb2xvcnR5cGU6XCJ2YXJpYWJsZVwiLFxyXG4gICAgICAgIHR5cGU6XCJjdXN0b21cIixcclxuICAgICAgICBheGlzOnRydWUsXHJcbiAgICAgICAgYXhpc0xlbmd0aDo1MDAsXHJcbiAgICAgICAgc3RyZWFtaW5nOnRydWUsXHJcbiAgICAgICAgZnVsbFdpZHRoOnRydWUsXHJcbiAgICAgICBcclxuICAgICAgICBwZXJtaXRFZmZlY3RzOnRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDpbMC4zLDAuMywwLjNdLFxyXG4gICAgICAgIGdyaWQ6dHJ1ZSxcclxuICAgICAgICBncmlkQ29uZmlnOntcclxuICAgICAgICAgICAgbGluZXM6NjAsXHJcbiAgICAgICAgICAgIGRpbTo1MDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbGVjdG9yOnRydWUsIFxyXG4gICAgICAgIG9uU2VsZWN0ZWQ6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGlmKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRJbmZvPWRhdGE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBMYWJlbFhDb25maWc6e1xyXG4gICAgICAgICAgICBvZmZzZXQ6MTVcclxuICAgICAgICB9LFxyXG4gICAgICAgIExhYmVsWUNvbmZpZzp7XHJcbiAgICAgICAgICAgIG9mZnNldDoxNVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTGFiZWxaQ29uZmlnOntcclxuICAgICAgICAgICAgb2Zmc2V0OjE1XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaWdodFNlcXVlbmNlOltcclxuICAgICAgICAgICAgJGFsZXhhbmRyYVN0b3JlLmxpZ2h0cy5ibHVlLFxyXG4gICAgICAgICAgICAkYWxleGFuZHJhU3RvcmUubGlnaHRzLmdyZWVuLFxyXG4gICAgICAgICAgICAkYWxleGFuZHJhU3RvcmUubGlnaHRzLnJlZFxyXG4gICAgICAgIF1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBBcHBseVRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZhciBtb2RlbCA9ICRhbGV4YW5kcmFNb2RlbC5UZXh0KHRleHQsIHtcclxuICAgICAgICAgICAgc2l6ZTogMTAsXHJcbiAgICAgICAgICAgIGhlaWdodDogMC4xXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIG1lc2g6IG1vZGVsLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogWzUwLCA1MCwxNTBdLFxyXG4gICAgICAgICAgICByb3RhdGlvbjp7XHJcbiAgICAgICAgICAgICAgICBhbmdsZTo0NSxcclxuICAgICAgICAgICAgICAgIGF4aXM6WzAsMSwwXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb2xvcjpSYW5kQ29sb3IoKVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgVGl0bGU9ZnVuY3Rpb24oKXtcclxuICAgICAgICBDb21wYW55U2VydmljZS5Qcm9maWxlKCkuZ2V0KGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgaWYgKHJlcy5lcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKHJlcy5lcnJvcik7XHJcbiAgICAgICAgICAgIHByb2ZpbGUgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPWZhbHNlO1xyXG4gICAgICAgICAgICBBcHBseVRleHQocHJvZmlsZS5uYW1lKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgVGl0bGUoKTtcclxuXHJcbiAgICB2YXIgZmV0Y2g9ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgY2FsZW5kYXI9SW1tdXRhYmxlLkxpc3QoZGF0YS5zdGF0cyk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGE9Xy5jbG9uZShjYWxlbmRhci5nZXQoMCkpO1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nPWZhbHNlOyBcclxuXHJcbiAgICAgICAgJHNjb3BlLmNvbmZpZy5MYWJlbFg9ZGF0YS5sZWdlbmQueDtcclxuICAgICAgICAgJHNjb3BlLmNvbmZpZy5MYWJlbFk9ZGF0YS5sZWdlbmQueTtcclxuICAgICAgICAgJHNjb3BlLmNvbmZpZy5MYWJlbFo9ZGF0YS5sZWdlbmQuejtcclxuICAgICAgIGNvbnNvbGUubG9nKCAkYWxleGFuZHJhRm9yZXN0LiBnZXRUcmVlKFwidmlld18xXCIpKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgJHNjb3BlLmNoYW5nZVN0YXRUeXBlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLmNvbmZpZy50eXBlPVwic3BoZXJlXCI7XHJcbiAgICAgICAgJHNjb3BlLmxvYWRpbmc9dHJ1ZTsgXHJcbiAgICAgICAgJHNjb3BlLnN0YXRzVGltZT10cnVlO1xyXG4gICAgICAgIHN3aXRjaCgkc2NvcGUuc2VsZWN0ZWQuc3RhdFR5cGUpe1xyXG4gICAgICAgICAgICBjYXNlIFwicGlja1wiOlxyXG4gICAgICAgICAgICAgICAgU3RhdHNTZXJ2aWNlLlBpY2tzKGZldGNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2NvcmVcIjpcclxuICAgICAgICAgICAgICAgIFN0YXRzU2VydmljZS5TY29yZVNlcnZpY2VzKGZldGNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibW9uZXlcIjpcclxuICAgICAgICAgICAgICAgIFN0YXRzU2VydmljZS5Nb25leVJlc291cmNlcyhmZXRjaCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIndvcmtcIjpcclxuICAgICAgICAgICAgICAgIFN0YXRzU2VydmljZS5Xb3JrUmVzb3VyY2VzKGZldGNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm9yaWdpblwiOlxyXG4gICAgICAgICAgICAgICAgU3RhdHNTZXJ2aWNlLk9yaWdpblBpY2tzKGZldGNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignUGxheWVyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29tcGFueVNlcnZpY2UsICR0aW1lb3V0KXtcclxuXHJcbiAgICB2YXIgUExBWUVSX1RJTUU9MjAwMDtcclxuICAgIHZhciBFTVBUWV9USU1FPTUwMDtcclxuXHJcbiAgICAkc2NvcGUubG9hZGluZz10cnVlO1xyXG4gICAgJHNjb3BlLnBsYXlpbmc9ZmFsc2U7XHJcbiAgICAkc2NvcGUuZGF0YT1bXTtcclxuICAgIHZhciBjYWxlbmRhcj1bXTtcclxuICAgIHZhciB0d2Vlbj1udWxsO1xyXG5cclxuICAgICRzY29wZS52YWx1ZXM9e1xyXG4gICAgICAgIGluZGV4OjF9O1xyXG5cclxuICAgICRzY29wZS5jb25maWc9e1xyXG4gICAgICAgIGNvbG9ydHlwZTpcInZhcmlhYmxlXCIsXHJcbiAgICAgICAgZW5naW5lOlwicGhvbmdfcG9zaXRpb25hbFwiLFxyXG4gICAgICAgIGF4aXM6dHJ1ZSxcclxuICAgICAgICBheGlzTGVuZ3RoOjUwMCxcclxuICAgICAgICBzdHJlYW1pbmc6dHJ1ZSxcclxuICAgICAgICBiYWNrZ3JvdW5kOlswLjMsMC4zLDAuM10sXHJcbiAgICAgICAgZ3JpZDp0cnVlLFxyXG4gICAgICAgIGdyaWRDb25maWc6e1xyXG4gICAgICAgICAgICBsaW5lczo2MCxcclxuICAgICAgICAgICAgZGltOjUwMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG5cclxuICAgIENvbXBhbnlTZXJ2aWNlLlBpY2soKS5zdGF0cyhmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAkc2NvcGUubG9hZGluZz1mYWxzZTsgXHJcbiAgICAgICAgaWYocmVzLmVycm9yKXJldHVybiBjb25zb2xlLmxvZyhyZXMuZXJyb3IpO1xyXG4gICAgICAgIGNhbGVuZGFyPUltbXV0YWJsZS5MaXN0KHJlcy5kYXRhLnN0YXRzKTtcclxuICAgICAgICAkc2NvcGUuZGF0YT1fLmNsb25lRGVlcChjYWxlbmRhci5nZXQoMCkpO1xyXG4gICAgICAgXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZUNhbGVuZGFyKHN0ZXAsYywgbiwgY2Ipe1xyXG5cclxuICAgICAgICB2YXIgaW50ZXJfZGF0YT1jLnJlZHVjZShmdW5jdGlvbihwcmV2LGl0ZW0sIGluZGV4KXtcclxuICAgICAgICAgICAgdmFyIGNfcG9zPWl0ZW0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBuX3Bvcz1uW2luZGV4XS5wb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGlmKCFfLmlzRXF1YWwoY19wb3MsIG5fcG9zKSl7XHJcbiAgICAgICAgICAgICAgICBwcmV2Lmxlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgcHJldi5jdXJyZW50W1wieF9cIitpbmRleF09Y19wb3NbMF07XHJcbiAgICAgICAgICAgICAgICBwcmV2LmN1cnJlbnRbXCJ5X1wiK2luZGV4XT1jX3Bvc1sxXTtcclxuICAgICAgICAgICAgICAgIHByZXYuY3VycmVudFtcInpfXCIraW5kZXhdPWNfcG9zWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgIHByZXYubmV4dFtcInhfXCIraW5kZXhdPW5fcG9zWzBdO1xyXG4gICAgICAgICAgICAgICAgcHJldi5uZXh0W1wieV9cIitpbmRleF09bl9wb3NbMV07XHJcbiAgICAgICAgICAgICAgICBwcmV2Lm5leHRbXCJ6X1wiK2luZGV4XT1uX3Bvc1syXTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgY3VycmVudDp7fSxcclxuICAgICAgICAgICAgbmV4dDp7fSxcclxuICAgICAgICAgICAgbGVuZ3RoOjBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudmFsdWVzLmluZGV4PXN0ZXArMTtcclxuXHJcbiAgICAgICAgaWYoaW50ZXJfZGF0YS5sZW5ndGg+MCl7XHJcblxyXG4gICAgICAgICAgICB0d2VlbiA9IG5ldyBUV0VFTi5Ud2VlbihpbnRlcl9kYXRhLmN1cnJlbnQpXHJcbiAgICAgICAgICAgICAgICAudG8oaW50ZXJfZGF0YS5uZXh0LCBQTEFZRVJfVElNRSlcclxuICAgICAgICAgICAgICAgIC5vblVwZGF0ZShmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuJCRwaGFzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpeyBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wbGF5aW5nPT1mYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyX2FycmF5PU9iamVjdC5rZXlzKHNlbGYpLnJlZHVjZShmdW5jdGlvbihwcmV2LCBpdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZT1zZWxmW2l0ZW1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXM9aXRlbS5zcGxpdChcIl9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW09a2V5c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleD1rZXlzWzFdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XT1wcmV2W2luZGV4XXx8e31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XVtwYXJhbV09dmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0se30pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lX2RhdGE9Xy5jbG9uZURlZXAoJHNjb3BlLmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaW50ZXJfYXJyYXkpLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU9aW50ZXJfYXJyYXlbaXRlbV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVfZGF0YVtpdGVtXS5wb3NpdGlvbj1bdmFsdWUueCwgdmFsdWUueSwgdmFsdWUuel07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhPWNsb25lX2RhdGE7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uU3RvcChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJoZWxsb1wiKVxyXG4gICAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5pbnRlcnBvbGF0aW9uKCBUV0VFTi5JbnRlcnBvbGF0aW9uLkJlemllciApLmVhc2luZyggVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lICkuZGVsYXkoIDI1MCApXHJcbiAgICAgICAgICAgICAgICAuc3RhcnQoKVxyXG5cclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGNiLCBFTVBUWV9USU1FKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAkc2NvcGUucGxheT1mdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5wbGF5aW5nPXRydWU7XHJcbiAgICAgICAgZnVuY3Rpb24gaXRlcihpKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGk8Y2FsZW5kYXIuY291bnQoKS0xICYmICRzY29wZS5wbGF5aW5nKXtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50PV8uY2xvbmVEZWVwKGNhbGVuZGFyLmdldChpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dD1fLmNsb25lRGVlcChjYWxlbmRhci5nZXQoaSsxKSk7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlQ2FsZW5kYXIoaSwgY3VycmVudCwgbmV4dCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpdGVyKGkrMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5wbGF5aW5nPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlcy5pbmRleD0xO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGE9W107XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhPV8uY2xvbmVEZWVwKGNhbGVuZGFyLmdldCgwKSk7ICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlcigwKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJHNjb3BlLnN0b3A9ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBsYXlpbmc9ZmFsc2U7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEludGVycG9sYXRpb25UaW1lKTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gSW50ZXJwb2xhdGlvblRpbWUodGltZSkge1xyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoSW50ZXJwb2xhdGlvblRpbWUpO1xyXG4gICAgICAgIFRXRUVOLnVwZGF0ZSh0aW1lKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1NsaWRlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBDb21wYW55U2VydmljZSwgJGFsZXhhbmRyYU1vZGVsKSB7XHJcblxyXG4gICAgICAgIHZhciBwcm9maWxlO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xyXG5cclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jb25maWcgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXHJcbiAgICAgICAgICAgIGVuZ2luZTpcInBob25nX3Bvc2l0aW9uYWxcIixcclxuICAgICAgICAgICAgY29sb3J0eXBlOlwidmFyaWFibGVcIixcclxuICAgICAgICAgICAgYXhpczogdHJ1ZSxcclxuICAgICAgICAgICAgYXhpc0xlbmd0aDogNTAwLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFswLjMsIDAuMywgMC4zXSxcclxuICAgICAgICAgICAgZ3JpZDogdHJ1ZSxcclxuICAgICAgICAgICAgZ3JpZENvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgbGluZXM6IDYwLFxyXG4gICAgICAgICAgICAgICAgZGltOiA1MDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjb2xvcj1SYW5kQ29sb3IoKTtcclxuXHJcbiAgICAgICAgdmFyIEFwcGx5VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBtb2RlbCA9ICRhbGV4YW5kcmFNb2RlbC5UZXh0KHRleHQsIHtcclxuICAgICAgICAgICAgICAgIHNpemU6IDEwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwLjUsXHJcbiAgICAgICAgICAgICAgICBjdXJ2ZVNlZ21lbnRzOiAzMCxcclxuICAgICAgICAgICAgICAgIGJldmVsRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGJldmVsVGhpY2tuZXNzOiAxLjUsXHJcbiAgICAgICAgICAgICAgICBiZXZlbFNpemU6IDAuNVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNoOiBtb2RlbCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBbNTAsIDUwLDE1MF0sXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbjp7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6NDUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXhpczpbMCwxLDBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29sb3I6Y29sb3JcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIEdldFByb2ZpbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIENvbXBhbnlTZXJ2aWNlLlByb2ZpbGUoKS5nZXQoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKHJlcy5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBBcHBseVRleHQocHJvZmlsZS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2V0UHJvZmlsZSgpO1xyXG5cclxuXHJcblxyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignU3BlY2lhbEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkYWxleGFuZHJhTW9kZWwpIHtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQXBpU2VydmljZVwiLCBmdW5jdGlvbigkcmVzb3VyY2UsICRsb2NhdGlvbil7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAvL2VudjokbG9jYXRpb24uYWJzVXJsKCkuaW5kZXhPZihcImxvY2FsaG9zdFwiKT09LTE/XCJwcm9kXCI6XCJkZXZcIixcclxuICAgICAgICBlbnY6XCJwcm9kXCIsXHJcbiAgICAgICAgcHJvZDp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cHNcIixcclxuICAgICAgICAgICAgaG9zdDpcInBpY2t5b3VyZGF5Lmhlcm9rdWFwcC5jb21cIixcclxuICAgICAgICAgICAgcG9ydDpcIlwiLFxyXG4gICAgICAgICAgICByb290OlwiYXBpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldjp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cFwiLFxyXG4gICAgICAgICAgICBob3N0OlwibG9jYWxob3N0XCIsXHJcbiAgICAgICAgICAgIHBvcnQ6XCI1MDAwXCIsXHJcbiAgICAgICAgICAgIHJvb3Q6XCJhcGlcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldEFwaVBhdGg6ZnVuY3Rpb24ocGF0aCl7XHJcbiAgICAgICAgICAgIHZhciBhcGk9dGhpc1t0aGlzLmVudl07XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkucHJvdG9jb2wrXCI6Ly9cIithcGkuaG9zdCsoYXBpLnBvcnQhPT1cIlwiPyhcIjpcIithcGkucG9ydCk6XCJcIikrXCIvXCIrYXBpLnJvb3QrXCIvXCIrcGF0aDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXN0OmZ1bmN0aW9uKHBhdGgsIG1ldGhvZHMsIGRlZmF1bHRQYXJhbXMpe1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2U9JHJlc291cmNlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBcGlQYXRoKHBhdGgpLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhcmFtcyB8fCB7fSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgfHwge31cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQ29tcGFueVNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYmFzZTpcImNvbXBhbnlcIixcclxuXHJcbiAgICAgICAgUGljazpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9zdGF0c1BpY2tzXCIsIHtcclxuICAgICAgICAgICAgICAgIHN0YXRzOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIE9yaWdpblBpY2s6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvb3JpZ2luUGlja3NcIiwge1xyXG4gICAgICAgICAgICAgICAgc3RhdHM6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgIFNjb3JlU2VydmljZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9zY29yZVNlcnZpY2VcIiwge1xyXG4gICAgICAgICAgICAgICAgc3RhdHM6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTW9uZXlSZXNvdXJjZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9tb25leVJlc291cmNlc1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzdGF0czp7bWV0aG9kOlwiR0VUXCIsIHBhcmFtczp7fX1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBXb3JrUmVzb3VyY2U6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvd29ya1Jlc291cmNlc1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzdGF0czp7bWV0aG9kOlwiR0VUXCIsIHBhcmFtczp7fX1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBQcm9maWxlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL3Byb2ZpbGVcIix7XHJcbiAgICAgICAgICAgICAgICBnZXQ6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgfTtcclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIkF1dGhJbnRlcmNlcHRvclwiLCBmdW5jdGlvbigkcSwgJGxvY2F0aW9uKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKXtcclxuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1c2VyPWdldEpTT05Mb2NhbChcInVzZXJcIik7XHJcbiAgICAgICAgICAgIHZhciB1c2VyPWdldEpTT05Mb2NhbChcInVzZXJcIik7XHJcbiAgICAgICAgICAgIGlmICghY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiAmJiB1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gdXNlci50b2tlbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1ZXN0RXJyb3I6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gJ0VSUk9SJykgeyAvL0ZvcmNlIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pe1xyXG4gICAgICAgICAgICBpZihyZWplY3Rpb24uc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlIGFjY2VzbycpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnVzZXIgPSAnJztcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIk9hdXRoU2VydmljZVwiLCBmdW5jdGlvbihBcGlTZXJ2aWNlKXtcclxuXHJcbiAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICBiYXNlOlwib2F1dGhcIixcclxuICAgICAgICBsb2dpbjpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZSx7XHJcbiAgICAgICAgICAgICAgICBTZXNzaW9uOnttZXRob2Q6XCJQT1NUXCIsIHBhcmFtczp7fX1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2dvdXQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvbG9nb3V0XCIsIHtcclxuICAgICAgICAgICAgICAgIFNlc3Npb246e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcm9sZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9yb2xlLzpyb2xlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgY2hlY2s6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e3JvbGU6XCJAcm9sZVwifX0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG59KTtcclxuXHJcblxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJSZXF1ZXN0U2VydmljZVwiLCBmdW5jdGlvbigpe1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICBcclxuICAgICAgICBTZXJ2ZXJOb3RGb3VuZDogQ2xvc3VyZU1lc3NhZ2UoXCJTZXJ2ZXIgTm90IEZvdW5kXCIpLFxyXG5cclxuICAgICAgICBOb1JvbGVBdXRob3JpemVkOiBDbG9zdXJlTWVzc2FnZShcIk5vIFJvbGUgQXV0aG9yaXplZFwiKSxcclxuICAgICAgICBcclxuICAgIFxyXG4gICAgfTtcclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIlN0YXRzU2VydmljZVwiLCBmdW5jdGlvbihDb21wYW55U2VydmljZSl7XHJcblxyXG4gICAgZnVuY3Rpb24gRGF0YShjYiwgZXJyb3Ipe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICBpZihyZXMuZXJyb3IpcmV0dXJuIGVycm9yKHJlcy5lcnJvcik7XHJcbiAgICAgICAgICAgIGlmKCFyZXMuZGF0YSlyZXR1cm4gZXJyb3IoXCJObyBEYXRhXCIpO1xyXG5cclxuICAgICAgICAgICAgY2IocmVzLmRhdGEpO1xyXG5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEVycm9yKGVycm9yKXtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoZXJyb3IpcmV0dXJuIGVycm9yKFwiU2VydmVyIE5vdCBGb3VuZFwiKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlcnZlciBOb3QgRm91bmRcIilcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgUGlja3M6ZnVuY3Rpb24oY2IsIGVycm9yKXtcclxuICAgICAgICAgICAgQ29tcGFueVNlcnZpY2UuUGljaygpLnN0YXRzKERhdGEoY2IsIGVycm9yKSxFcnJvcihlcnJvcikpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgT3JpZ2luUGlja3M6ZnVuY3Rpb24oY2IsIGVycm9yKXtcclxuICAgICAgICAgICAgQ29tcGFueVNlcnZpY2UuT3JpZ2luUGljaygpLnN0YXRzKERhdGEoY2IsIGVycm9yKSxFcnJvcihlcnJvcikpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU2NvcmVTZXJ2aWNlczpmdW5jdGlvbihjYiwgZXJyb3Ipe1xyXG4gICAgICAgICAgICBDb21wYW55U2VydmljZS5TY29yZVNlcnZpY2UoKS5zdGF0cyhEYXRhKGNiLCBlcnJvciksRXJyb3IoZXJyb3IpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIE1vbmV5UmVzb3VyY2VzOmZ1bmN0aW9uKGNiLCBlcnJvcil7XHJcbiAgICAgICAgICAgIENvbXBhbnlTZXJ2aWNlLk1vbmV5UmVzb3VyY2UoKS5zdGF0cyhEYXRhKGNiLCBlcnJvciksRXJyb3IoZXJyb3IpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFdvcmtSZXNvdXJjZXM6ZnVuY3Rpb24oY2IsIGVycm9yKXtcclxuICAgICAgICAgICAgQ29tcGFueVNlcnZpY2UuV29ya1Jlc291cmNlKCkuc3RhdHMoRGF0YShjYiwgZXJyb3IpLEVycm9yKGVycm9yKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
