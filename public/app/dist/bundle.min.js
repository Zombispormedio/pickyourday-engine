function saveLocal(n,e){localStorage[n]=JSON.stringify(e)}function getJSONLocal(n){var e=null;try{var t=localStorage[n];void 0!==t&&(e=JSON.parse(t))}catch(o){}return e}function deleteLocal(n){localStorage.removeItem(n)}function ClosureMessage(n){return function(e){return function(){e(n)}}}function emptyOrUndefined(n){return void 0==n||""===n}function RandPosition(n){var e=n||{min:0,max:100},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a]}function RandColor(n){var e=n||{min:0,max:1,fixed:2},t=chance.floating(e),o=chance.floating(e),a=chance.floating(e);return[t,o,a,1]}function RandSize(n){var e=n||{min:.1,max:2,fixed:1},t=chance.floating(e);return[t,t,t]}function RandRotation(n){var e=Number(chance.bool()),t=Number(chance.bool()),o=Number(chance.bool());return{angle:chance.integer({min:0,max:360}),axis:[e,t,o]}}function generate(n){return function(){var e=chance.integer({min:0,max:100});return Array.apply(0,Array(e)).map(n)}}var app=angular.module("Application",["ui.router","ngResource","ngAnimate","ngMaterial","alexandra"]);!function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/main.html",'\n<md-toolbar class="md-accent md-whiteframe-1dp">\n    <div class="md-toolbar-tools">\n        <md-menu flex="5">\n            <md-button aria-label="Type Stats" class="md-icon-button button-stats" ng-click="openMenu($mdOpenMenu, $event)">\n                <md-icon md-menu-origin md-font-icon="mdi-chart-areaspline" class="mdi"></md-icon>\n            </md-button>\n            <md-menu-content width="4">\n                <md-menu-item>\n                    <md-button ui-sref="app.normal">\n                        <md-icon md-font-icon="mdi-chart-bubble" class="mdi"></md-icon>\n                        Normal\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.slider">\n                        <md-icon md-font-icon="mdi-clock-start" class="mdi"></md-icon>\n                        Slider\n                    </md-button>\n                </md-menu-item>\n                <md-menu-divider></md-menu-divider>\n                <md-menu-item>\n                    <md-button  ui-sref="app.player">\n                        <md-icon md-font-icon="mdi-play-box-outline" class="mdi"></md-icon>\n                        Player\n                    </md-button>\n                </md-menu-item>\n                <md-menu-item>\n                    <md-button  ui-sref="app.heightmap">\n                        <md-icon md-font-icon="mdi-airplane-landing" class="mdi"></md-icon>\n                        Height Map\n                    </md-button>\n                </md-menu-item>\n            </md-menu-content>\n        </md-menu>\n        \n        <h2>\n            <span>Pickyourday 3D</span>\n        </h2>\n        <span flex></span>\n        <md-button aria-label="logout" class="md-icon-button button-power" style="margin-right: 0px;" ng-click="logout()">\n            <md-icon md-font-icon="mdi-power" class="mdi"></md-icon>\n        </md-button>\n    </div>\n</md-toolbar>\n\n\n<div ui-view="content"></div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/height-map/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div>\n            <md-slider-container>\n               \n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="index" ng-change="select()">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/login/main.html",'<div layout="column" layout-align="center center">\n\n\n\n    <md-card>\n        <md-card-title>\n            <md-card-title-text>\n                <span class="md-headline">Pickyourday 3D</span>\n\n            </md-card-title-text>\n\n        </md-card-title>\n        <md-card-content layout="column">\n\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Email</label>\n                <input ng-model="user.email" type="email">\n            </md-input-container>\n\n            <md-input-container class="md-primary md-raised md-hue-2">\n                <label>Password</label>\n                <input ng-model="user.password" type="password">\n            </md-input-container>\n        </md-card-content>\n        <md-card-actions layout="row" layout-align="center center">\n            <md-button class="md-primary  md-raised md-hue-2" ng-click="login()">Login</md-button>\n\n        </md-card-actions>\n    </md-card>\n\n\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/normal/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n<canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n  <div flex="35" layout="column" layout-align="center center">\n	<p>X: {{selectedInfo[0]||\'N/A\'}}</p>\n	<p>Y: {{selectedInfo[1] || \'0\'}}</p>\n	<p>Z: {{selectedInfo[2]||\'N/A\'}}</p>\n  </div>\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/player/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n    <div flex="35" layout="column" layout-align="center strech">\n        <div flex layout="row" layout-align="center center">\n            <md-button ng-click="play()" ng-if="!loading&&!playing">\n                <md-icon md-font-icon="mdi-play" class="mdi"></md-icon>\n                Play\n            </md-button>\n            \n            <md-button ng-click="stop()" ng-if="playing">\n                <md-icon md-font-icon="mdi-stop" class="mdi"></md-icon>\n                Stop\n            </md-button>\n        </div>\n\n        <div>\n            <md-slider-container>\n               <span class="md-body-1">{{values.index}}</span>\n                <md-slider class="md-primary" md-discrete step="1" min="1" max="30" aria-label="rating" ng-show="!loading" ng-model="values.index" ng-disabled="true">\n                </md-slider>\n            </md-slider-container>\n        </div>\n    </div>\n\n</div>\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(e){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/slider/main.html",'<md-progress-linear md-mode="indeterminate" ng-if="loading"></md-progress-linear>\n<div class="player-content" layout="row">\n    <canvas alexandra-view data-id="view_1" alexandra-config="config" alexandra-source="data" width="800" height="600"></canvas>\n</div>')}])}(),angular.module("Application").run(["$rootScope","$mdToast","$state",function(n,e,t){n.showToast=function(n){e.show(e.simple().textContent(n).theme("pick-theme").hideDelay(3e3))},n.go=function(n,e){t.go(n,e)}}]),angular.module("Application").config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider",function(n,e,t,o){n.state("login",{url:"/login",onEnter:["$rootScope",function(n){getJSONLocal("user")&&n.go("app.player")}],templateUrl:"/views/login/main.html",controller:"LoginCtrl"}).state("app",{url:"/",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],templateUrl:"/views/main.html",controller:"AppCtrl","abstract":!0}).state("app.normal",{url:"normal",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/normal/main.html",controller:"NormalCtrl"}}}).state("app.slider",{url:"slider",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/slider/main.html",controller:"SliderCtrl"}}}).state("app.player",{url:"player",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/player/main.html",controller:"PlayerCtrl"}}}).state("app.heightmap",{url:"height-map",onEnter:["$rootScope",function(n){getJSONLocal("user")||n.go("login")}],views:{content:{templateUrl:"/views/height-map/main.html",controller:"HeightMapCtrl"}}}),e.otherwise("/login"),t.interceptors.push("AuthInterceptor"),o.theme("default").backgroundPalette("teal",{"default":"500","hue-1":"100","hue-2":"600","hue-3":"A100"}).primaryPalette("lime",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("teal",{"default":"500"})}]),angular.module("Application").controller("AppCtrl",["$rootScope","$scope","OauthService",function(n,e,t){e.openMenu=function(n,e){originatorEv=e,n(e)},e.logout=function(){t.logout().Session(function(){deleteLocal("user"),n.go("login")},function(){})}}]),angular.module("Application").controller("HeightMapCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){n.loading=!0,n.config={type:"custom",engine:"phong_positional",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},light:{direction:[-1,-1,-1]},colortype:"variable"};var o={};n.index=1,e.Pick().stats(function(e){n.loading=!1,o=e.data.plane,i()}),n.select=function(){i()};var a=RandColor(),i=function(){var e=o.vertices,i=n.index-1,r=e[i];n.data={mesh:t.Plane({height:o.height,width:o.width,w_s:o.vWidth,h_s:o.vHeight},function(n,e,t){var o=e.x,a=e.z,i=e.y,l=_.find(r,function(n){return n.key==t});return l&&(a=l.y),n.push(o),n.push(a),n.push(i),n}),position:[50,0,50],color:a}}}]),angular.module("Application").controller("LoginCtrl",["$rootScope","$scope","OauthService","RequestService",function(n,e,t,o){e.user={email:"",password:""},e.login=function(){async.waterfall([function(n){var t=emptyOrUndefined(e.user.email),o=emptyOrUndefined(e.user.password);t||o?t?n("Email Empty"):o&&n("Password Empty"):n()},function(n){t.login().Session(e.user,function(e){return e.error?n(e.error):void n(null,e.data)},o.ServerNotFound(n))},function(n,e){t.role().check({role:n.role},function(t){return t.error?e(t.error):void(2==t.data?e(null,n):o.NoRoleAuthorized(e)())},o.ServerNotFound(e))}],function(e,t){return e?n.showToast(e):(saveLocal("user",t),void n.go("app.normal"))})}}]),angular.module("Application").controller("NormalCtrl",["$scope","CompanyService",function(n,e){n.loading=!0,n.data=[],n.selectedInfo={};var t=[];n.config={colortype:"variable",engine:"toon",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500},selector:!0,onSelected:function(e){e&&(n.selectedInfo=e)}};var o=function(){e.Pick().stats(function(e){t=Immutable.List(e.data.stats),n.data=_.clone(t.get(23)),n.loading=!1})};o()}]),angular.module("Application").controller("PlayerCtrl",["$scope","CompanyService","$timeout",function(n,e,t){function o(e,o,a,l){var d=o.reduce(function(n,e,t){var o=e.position,i=a[t].position;return _.isEqual(o,i)||(n.length++,n.current["x_"+t]=o[0],n.current["y_"+t]=o[1],n.current["z_"+t]=o[2],n.next["x_"+t]=i[0],n.next["y_"+t]=i[1],n.next["z_"+t]=i[2]),n},{current:{},next:{},length:0});n.values.index=e+1,d.length>0?c=new TWEEN.Tween(d.current).to(d.next,i).onUpdate(function(){var e=this;n.$$phase||n.$apply(function(){if(0==n.playing)return void c.stop();var t=Object.keys(e).reduce(function(n,t){var o=e[t],a=t.split("_"),i=a[0],r=a[1];return n[r]=n[r]||{},n[r][i]=o,n},{}),o=_.cloneDeep(n.data);Object.keys(t).forEach(function(n){var e=t[n];o[n].position=[e.x,e.y,e.z]}),n.data=o})}).onComplete(function(){l()}).onStop(function(){console.log("hello"),l()}).interpolation(TWEEN.Interpolation.Bezier).easing(TWEEN.Easing.Linear.None).delay(250).start():t(l,r)}function a(n){requestAnimationFrame(a),TWEEN.update(n)}var i=2e3,r=500;n.loading=!0,n.playing=!1,n.data=[];var l=[],c=null;n.values={index:1},n.config={colortype:"variable",engine:"toon",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}},e.Pick().stats(function(e){l=Immutable.List(e.data.stats),n.data=_.cloneDeep(l.get(0)),n.loading=!1}),n.play=function(){function e(t){if(t<l.count()-1&&n.playing){var a=_.cloneDeep(l.get(t)),i=_.cloneDeep(l.get(t+1));o(t,a,i,function(){e(t+1)})}else n.playing=!1,n.values.index=1,n.data=[],n.data=_.cloneDeep(l.get(0))}n.playing=!0,e(0)},n.stop=function(){n.playing=!1},requestAnimationFrame(a)}]),angular.module("Application").controller("SliderCtrl",["$scope","CompanyService","$alexandraUtils",function(n,e,t){var o;n.loading=!0,n.config={type:"custom",engine:"phong_positional",colortype:"variable",axis:!0,axisLength:500,streaming:!0,background:[.3,.3,.3],grid:!0,gridConfig:{lines:60,dim:500}};var a=RandColor(),i=function(e){var o=t.Text(e,{size:10,height:.5,curveSegments:30,bevelEnabled:!0,bevelThickness:1.5,bevelSize:.5});n.data={mesh:o,position:[50,50,150],rotation:{angle:45,axis:[0,1,0]},color:a}},r=function(){e.Profile().get(function(e){return e.error?console.log(e.error):(o=e.data,n.loading=!1,void i(o.name))})};r()}]),angular.module("Application").factory("ApiService",["$resource","$location",function(n,e){return{env:"prod",prod:{protocol:"https",host:"pickyourday.herokuapp.com",port:"",root:"api"},dev:{protocol:"http",host:"localhost",port:"5000",root:"api"},getApiPath:function(n){var e=this[this.env];return e.protocol+"://"+e.host+(""!==e.port?":"+e.port:"")+"/"+e.root+"/"+n},rest:function(e,t,o){var a=n(this.getApiPath(e),o||{},t||{});return a}}}]),angular.module("Application").factory("CompanyService",["ApiService",function(n){return{base:"company",Pick:function(){return n.rest(this.base+"/statsPicks",{stats:{method:"GET",params:{}}})},Profile:function(){return n.rest(this.base+"/profile",{get:{method:"GET",params:{}}})}}}]),angular.module("Application").factory("AuthInterceptor",["$q","$location",function(n,e){return{request:function(n){n.headers=n.headers||{};var e=getJSONLocal("user"),e=getJSONLocal("user");return!n.headers.Authorization&&e&&(n.headers.Authorization=e.token),n},requestError:function(e){return n.reject(e)},response:function(e){return"ERROR"===e.data.status?n.reject(e):e||n.when(e)},responseError:function(t){return 403===t.status?(console.error("Error de acceso"),localStorage.user="",void e.path("/")):n.reject(t)}}}]),angular.module("Application").factory("OauthService",["ApiService",function(n){return{base:"oauth",login:function(){return n.rest(this.base,{Session:{method:"POST",params:{}}})},logout:function(){return n.rest(this.base+"/logout",{Session:{method:"GET",params:{}}})},role:function(){return n.rest(this.base+"/role/:role",{check:{method:"GET",params:{role:"@role"}}})}}}]),angular.module("Application").factory("RequestService",function(){return{ServerNotFound:ClosureMessage("Server Not Found"),NoRoleAuthorized:ClosureMessage("No Role Authorized")}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdXRpbHMuanMiLCJhcHBsaWNhdGlvbi5qcyIsInRlbXBsYXRlLWNhY2hlLmpzIiwiY29uZmlnL2Jvb3QuanMiLCJjb25maWcvZW52aXJvbm1lbnQuanMiLCJjb250cm9sbGVycy9hcHBsaWNhdGlvbl9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaGVpZ2h0X21hcF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL25vcm1hbF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcGxheWVyX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zbGlkZXJfY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvYXBpLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzL2NvbXBhbnlfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvaW50ZXJjZXB0b3Jfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvb2F1dGguc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvcmVxdWVzdF9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNhdmVMb2NhbCIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0SlNPTkxvY2FsIiwicmVzdWx0Iiwic3RyX2pzb24iLCJ1bmRlZmluZWQiLCJwYXJzZSIsImUiLCJkZWxldGVMb2NhbCIsInJlbW92ZUl0ZW0iLCJDbG9zdXJlTWVzc2FnZSIsIm1lc3NhZ2UiLCJmbiIsImVtcHR5T3JVbmRlZmluZWQiLCJ2YWx1ZSIsIlJhbmRQb3NpdGlvbiIsInYiLCJyYW5nZSIsIm1pbiIsIm1heCIsIngiLCJjaGFuY2UiLCJmbG9hdGluZyIsInkiLCJ6IiwiUmFuZENvbG9yIiwicmFuZ2VDb2xvciIsImZpeGVkIiwiciIsImciLCJiIiwiUmFuZFNpemUiLCJzaXplIiwiUmFuZFJvdGF0aW9uIiwiTnVtYmVyIiwiYm9vbCIsImFuZ2xlIiwiaW50ZWdlciIsImF4aXMiLCJnZW5lcmF0ZSIsImNvdW50IiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRyb290U2NvcGUiLCIkbWRUb2FzdCIsIiRzdGF0ZSIsInNob3dUb2FzdCIsIm1zZyIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInRoZW1lIiwiaGlkZURlbGF5IiwiZ28iLCJzdGF0ZSIsInBhcmFtcyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInVybCIsIm9uRW50ZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhYnN0cmFjdCIsInZpZXdzIiwiY29udGVudCIsIm90aGVyd2lzZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImh1ZS0yIiwiaHVlLTMiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCIkc2NvcGUiLCJPYXV0aFNlcnZpY2UiLCJvcGVuTWVudSIsIiRtZE9wZW5NZW51IiwiZXYiLCJvcmlnaW5hdG9yRXYiLCJsb2dvdXQiLCJTZXNzaW9uIiwiQ29tcGFueVNlcnZpY2UiLCIkYWxleGFuZHJhVXRpbHMiLCJsb2FkaW5nIiwidHlwZSIsImVuZ2luZSIsImF4aXNMZW5ndGgiLCJzdHJlYW1pbmciLCJiYWNrZ3JvdW5kIiwiZ3JpZCIsImdyaWRDb25maWciLCJsaW5lcyIsImRpbSIsImxpZ2h0IiwiZGlyZWN0aW9uIiwiY29sb3J0eXBlIiwicGxhbmUiLCJpbmRleCIsIlBpY2siLCJzdGF0cyIsInJlcyIsImFwcGx5UGxhbmUiLCJzZWxlY3QiLCJjb2xvciIsImNhbGVuZGFyIiwidmVydGljZXMiLCJjdXJyZW50X2RheSIsIm1lc2giLCJQbGFuZSIsImhlaWdodCIsIndpZHRoIiwid19zIiwidldpZHRoIiwiaF9zIiwidkhlaWdodCIsInByZXYiLCJpdGVtIiwiY19wIiwiXyIsImZpbmQiLCJpIiwicG9zaXRpb24iLCJSZXF1ZXN0U2VydmljZSIsInVzZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJhc3luYyIsIndhdGVyZmFsbCIsIm5leHQiLCJpc0VtYWlsIiwiaXNQYXNzd29yZCIsImVycm9yIiwiU2VydmVyTm90Rm91bmQiLCJyb2xlIiwiY2hlY2siLCJOb1JvbGVBdXRob3JpemVkIiwiZXJyIiwic2VsZWN0ZWRJbmZvIiwic2VsZWN0b3IiLCJvblNlbGVjdGVkIiwiZmV0Y2giLCJJbW11dGFibGUiLCJMaXN0IiwiY2xvbmUiLCJnZXQiLCIkdGltZW91dCIsImFuaW1hdGVDYWxlbmRhciIsInN0ZXAiLCJjIiwibiIsImNiIiwiaW50ZXJfZGF0YSIsInJlZHVjZSIsImNfcG9zIiwibl9wb3MiLCJpc0VxdWFsIiwibGVuZ3RoIiwiY3VycmVudCIsInZhbHVlcyIsInR3ZWVuIiwiVFdFRU4iLCJUd2VlbiIsInRvIiwiUExBWUVSX1RJTUUiLCJvblVwZGF0ZSIsInNlbGYiLCJ0aGlzIiwiJCRwaGFzZSIsIiRhcHBseSIsInBsYXlpbmciLCJzdG9wIiwiaW50ZXJfYXJyYXkiLCJPYmplY3QiLCJrZXlzIiwic3BsaXQiLCJwYXJhbSIsImNsb25lX2RhdGEiLCJjbG9uZURlZXAiLCJmb3JFYWNoIiwib25Db21wbGV0ZSIsIm9uU3RvcCIsImNvbnNvbGUiLCJsb2ciLCJpbnRlcnBvbGF0aW9uIiwiSW50ZXJwb2xhdGlvbiIsIkJlemllciIsImVhc2luZyIsIkVhc2luZyIsIkxpbmVhciIsIk5vbmUiLCJkZWxheSIsInN0YXJ0IiwiRU1QVFlfVElNRSIsIkludGVycG9sYXRpb25UaW1lIiwidGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZSIsInBsYXkiLCJpdGVyIiwicHJvZmlsZSIsIkFwcGx5VGV4dCIsInRleHQiLCJtb2RlbCIsIlRleHQiLCJjdXJ2ZVNlZ21lbnRzIiwiYmV2ZWxFbmFibGVkIiwiYmV2ZWxUaGlja25lc3MiLCJiZXZlbFNpemUiLCJyb3RhdGlvbiIsIkdldFByb2ZpbGUiLCJQcm9maWxlIiwibmFtZSIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCIkbG9jYXRpb24iLCJlbnYiLCJwcm9kIiwicHJvdG9jb2wiLCJob3N0IiwicG9ydCIsInJvb3QiLCJkZXYiLCJnZXRBcGlQYXRoIiwicGF0aCIsImFwaSIsInJlc3QiLCJtZXRob2RzIiwiZGVmYXVsdFBhcmFtcyIsInJlc291cmNlIiwiQXBpU2VydmljZSIsImJhc2UiLCJtZXRob2QiLCIkcSIsInJlcXVlc3QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInRva2VuIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVqZWN0IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJ3aGVuIiwicmVzcG9uc2VFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsV0FBQUMsRUFBQUMsR0FDQUMsYUFBQUYsR0FBQUcsS0FBQUMsVUFBQUgsR0FHQSxRQUFBSSxjQUFBTCxHQUVBLEdBQUFNLEdBQUEsSUFDQSxLQUNBLEdBQUFDLEdBQUFMLGFBQUFGLEVBRUFRLFVBQUFELElBRUFELEVBQUFILEtBQUFNLE1BQUFGLElBR0EsTUFBQUcsSUFJQSxNQUFBSixHQUdBLFFBQUFLLGFBQUFYLEdBQ0FFLGFBQUFVLFdBQUFaLEdBR0EsUUFBQWEsZ0JBQUFDLEdBQ0EsTUFBQSxVQUFBQyxHQUNBLE1BQUEsWUFDQUEsRUFBQUQsS0FLQSxRQUFBRSxrQkFBQUMsR0FDQSxNQUFBLFNBQUFBLEdBQUEsS0FBQUEsRUFJQSxRQUFBQyxjQUFBQyxHQUNBLEdBQUFDLEdBQUFELElBQUFFLElBQUEsRUFBQUMsSUFBQSxLQUNBQyxFQUFBQyxPQUFBQyxTQUFBTCxHQUNBTSxFQUFBRixPQUFBQyxTQUFBTCxHQUNBTyxFQUFBSCxPQUFBQyxTQUFBTCxFQUNBLFFBQUFHLEVB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QXZJLGVBQUEsb0JBRUEwSSxpQkFBQTFJLGVBQUEiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNhdmVMb2NhbChrZXksIGRhdGEpIHtcclxuICAgIGxvY2FsU3RvcmFnZVtrZXldID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEpTT05Mb2NhbChrZXkpIHtcclxuXHJcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIHN0cl9qc29uID0gbG9jYWxTdG9yYWdlW2tleV07XHJcblxyXG4gICAgICAgIGlmIChzdHJfanNvbiE9PXVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShzdHJfanNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTG9jYWwoa2V5KSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDbG9zdXJlTWVzc2FnZShtZXNzYWdlKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihmbil7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGZuKG1lc3NhZ2UpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbXB0eU9yVW5kZWZpbmVkKHZhbHVlKXtcclxuICAgIHJldHVybiB2YWx1ZT09dm9pZCAwIHx8IHZhbHVlPT09XCJcIjtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIFJhbmRQb3NpdGlvbih2KSB7XHJcbiAgICB2YXIgcmFuZ2UgPSB2IHx8IHsgbWluOiAwLCBtYXg6IDEwMCB9O1xyXG4gICAgdmFyIHggPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgdmFyIHkgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgdmFyIHogPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2UpO1xyXG4gICAgcmV0dXJuIFt4LCB5LCB6XTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmFuZENvbG9yKHYpIHtcclxuICAgIHZhciByYW5nZUNvbG9yID0gdiB8fCB7IG1pbjogMCwgbWF4OiAxLCBmaXhlZDogMiB9O1xyXG4gICAgdmFyIHIgPSBjaGFuY2UuZmxvYXRpbmcocmFuZ2VDb2xvcik7XHJcbiAgICB2YXIgZyA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZUNvbG9yKTtcclxuICAgIHZhciBiID0gY2hhbmNlLmZsb2F0aW5nKHJhbmdlQ29sb3IpO1xyXG4gICAgcmV0dXJuIFtyLCBnLCBiLCAxXTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmFuZFNpemUodikge1xyXG4gICAgdmFyIHJhbmdlID0gdiB8fCB7IG1pbjogMC4xLCBtYXg6IDIsIGZpeGVkOiAxIH07XHJcbiAgICB2YXIgc2l6ZSA9IGNoYW5jZS5mbG9hdGluZyhyYW5nZSk7XHJcbiAgICByZXR1cm4gW3NpemUsIHNpemUsIHNpemVdO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUmFuZFJvdGF0aW9uKHYpe1xyXG4gICAgdmFyIHJhbmdlID0gdiB8fCB7IG1pbjogMCwgbWF4OiAzNjB9O1xyXG4gICAgdmFyIHg9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgdmFyIHk9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgdmFyIHo9TnVtYmVyKGNoYW5jZS5ib29sKCkpO1xyXG4gICAgcmV0dXJuICB7XHJcbiAgICAgICAgYW5nbGU6Y2hhbmNlLmludGVnZXIoeyBtaW46IDAsIG1heDogMzYwfSksXHJcbiAgICAgICAgYXhpczpbeCx5LHpdXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZShmbikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IGNoYW5jZS5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KTtcclxuICAgICAgICByZXR1cm4gQXJyYXkuYXBwbHkoMCwgQXJyYXkoY291bnQpKS5tYXAoZm4pO1xyXG4gICAgfTtcclxufSIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbJ3VpLnJvdXRlcicsIFwibmdSZXNvdXJjZVwiLCduZ0FuaW1hdGUnLCAnbmdNYXRlcmlhbCcsICdhbGV4YW5kcmEnXSk7IiwiKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL21haW4uaHRtbCcsXG4gICAgJ1xcbicgK1xuICAgICc8bWQtdG9vbGJhciBjbGFzcz1cIm1kLWFjY2VudCBtZC13aGl0ZWZyYW1lLTFkcFwiPlxcbicgK1xuICAgICcgICAgPGRpdiBjbGFzcz1cIm1kLXRvb2xiYXItdG9vbHNcIj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtbWVudSBmbGV4PVwiNVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIGFyaWEtbGFiZWw9XCJUeXBlIFN0YXRzXCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBidXR0b24tc3RhdHNcIiBuZy1jbGljaz1cIm9wZW5NZW51KCRtZE9wZW5NZW51LCAkZXZlbnQpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1tZW51LW9yaWdpbiBtZC1mb250LWljb249XCJtZGktY2hhcnQtYXJlYXNwbGluZVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLW1lbnUtY29udGVudCB3aWR0aD1cIjRcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiB1aS1zcmVmPVwiYXBwLm5vcm1hbFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktY2hhcnQtYnViYmxlXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIE5vcm1hbFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gIHVpLXNyZWY9XCJhcHAuc2xpZGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1jbG9jay1zdGFydFwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICBTbGlkZXJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtbWVudS1pdGVtPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLW1lbnUtZGl2aWRlcj48L21kLW1lbnUtZGl2aWRlcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5wbGF5ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBsYXktYm94LW91dGxpbmVcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgUGxheWVyXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLW1lbnUtaXRlbT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiAgdWktc3JlZj1cImFwcC5oZWlnaHRtYXBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLWFpcnBsYW5lLWxhbmRpbmdcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgSGVpZ2h0IE1hcFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1tZW51LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtbWVudS1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtbWVudT5cXG4nICtcbiAgICAnICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICA8aDI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuPlBpY2t5b3VyZGF5IDNEPC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgIDwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gZmxleD48L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwibG9nb3V0XCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBidXR0b24tcG93ZXJcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMHB4O1wiIG5nLWNsaWNrPVwibG9nb3V0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBvd2VyXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9tZC10b29sYmFyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzxkaXYgdWktdmlldz1cImNvbnRlbnRcIj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9oZWlnaHQtbWFwL21haW4uaHRtbCcsXG4gICAgJzxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBuZy1pZj1cImxvYWRpbmdcIj48L21kLXByb2dyZXNzLWxpbmVhcj5cXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50XCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICA8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICcgICAgPGRpdiBmbGV4PVwiMzVcIiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgc3RyZWNoXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLXNsaWRlciBjbGFzcz1cIm1kLXByaW1hcnlcIiBtZC1kaXNjcmV0ZSBzdGVwPVwiMVwiIG1pbj1cIjFcIiBtYXg9XCIzMFwiIGFyaWEtbGFiZWw9XCJyYXRpbmdcIiBuZy1zaG93PVwiIWxvYWRpbmdcIiBuZy1tb2RlbD1cImluZGV4XCIgbmctY2hhbmdlPVwic2VsZWN0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtc2xpZGVyPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXNsaWRlci1jb250YWluZXI+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvbG9naW4vbWFpbi5odG1sJyxcbiAgICAnPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8bWQtY2FyZD5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC10aXRsZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWNhcmQtdGl0bGUtdGV4dD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWQtaGVhZGxpbmVcIj5QaWNreW91cmRheSAzRDwvc3Bhbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtY2FyZC10aXRsZS10ZXh0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L21kLWNhcmQtdGl0bGU+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWNhcmQtY29udGVudCBsYXlvdXQ9XCJjb2x1bW5cIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtcHJpbWFyeSBtZC1yYWlzZWQgbWQtaHVlLTJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxsYWJlbD5FbWFpbDwvbGFiZWw+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ1c2VyLmVtYWlsXCIgdHlwZT1cImVtYWlsXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciBjbGFzcz1cIm1kLXByaW1hcnkgbWQtcmFpc2VkIG1kLWh1ZS0yXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bGFiZWw+UGFzc3dvcmQ8L2xhYmVsPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidXNlci5wYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLWNhcmQtY29udGVudD5cXG4nICtcbiAgICAnICAgICAgICA8bWQtY2FyZC1hY3Rpb25zIGxheW91dD1cInJvd1wiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLXByaW1hcnkgIG1kLXJhaXNlZCBtZC1odWUtMlwiIG5nLWNsaWNrPVwibG9naW4oKVwiPkxvZ2luPC9tZC1idXR0b24+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZC1hY3Rpb25zPlxcbicgK1xuICAgICcgICAgPC9tZC1jYXJkPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL25vcm1hbC9tYWluLmh0bWwnLFxuICAgICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgbmctaWY9XCJsb2FkaW5nXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+XFxuJyArXG4gICAgJzxkaXYgY2xhc3M9XCJwbGF5ZXItY29udGVudFwiIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICc8Y2FudmFzIGFsZXhhbmRyYS12aWV3IGRhdGEtaWQ9XCJ2aWV3XzFcIiBhbGV4YW5kcmEtY29uZmlnPVwiY29uZmlnXCIgYWxleGFuZHJhLXNvdXJjZT1cImRhdGFcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjYwMFwiPjwvY2FudmFzPlxcbicgK1xuICAgICcgIDxkaXYgZmxleD1cIjM1XCIgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICdcdDxwPlg6IHt7c2VsZWN0ZWRJbmZvWzBdfHxcXCdOL0FcXCd9fTwvcD5cXG4nICtcbiAgICAnXHQ8cD5ZOiB7e3NlbGVjdGVkSW5mb1sxXSB8fCBcXCcwXFwnfX08L3A+XFxuJyArXG4gICAgJ1x0PHA+Wjoge3tzZWxlY3RlZEluZm9bMl18fFxcJ04vQVxcJ319PC9wPlxcbicgK1xuICAgICcgIDwvZGl2PlxcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9wbGF5ZXIvbWFpbi5odG1sJyxcbiAgICAnPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiaW5kZXRlcm1pbmF0ZVwiIG5nLWlmPVwibG9hZGluZ1wiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPlxcbicgK1xuICAgICc8ZGl2IGNsYXNzPVwicGxheWVyLWNvbnRlbnRcIiBsYXlvdXQ9XCJyb3dcIj5cXG4nICtcbiAgICAnICAgIDxjYW52YXMgYWxleGFuZHJhLXZpZXcgZGF0YS1pZD1cInZpZXdfMVwiIGFsZXhhbmRyYS1jb25maWc9XCJjb25maWdcIiBhbGV4YW5kcmEtc291cmNlPVwiZGF0YVwiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNjAwXCI+PC9jYW52YXM+XFxuJyArXG4gICAgJyAgICA8ZGl2IGZsZXg9XCIzNVwiIGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cImNlbnRlciBzdHJlY2hcIj5cXG4nICtcbiAgICAnICAgICAgICA8ZGl2IGZsZXggbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIG5nLWNsaWNrPVwicGxheSgpXCIgbmctaWY9XCIhbG9hZGluZyYmIXBsYXlpbmdcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1wbGF5XCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICBQbGF5XFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBuZy1jbGljaz1cInN0b3AoKVwiIG5nLWlmPVwicGxheWluZ1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXN0b3BcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIFN0b3BcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxkaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1zbGlkZXItY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kLWJvZHktMVwiPnt7dmFsdWVzLmluZGV4fX08L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtc2xpZGVyIGNsYXNzPVwibWQtcHJpbWFyeVwiIG1kLWRpc2NyZXRlIHN0ZXA9XCIxXCIgbWluPVwiMVwiIG1heD1cIjMwXCIgYXJpYS1sYWJlbD1cInJhdGluZ1wiIG5nLXNob3c9XCIhbG9hZGluZ1wiIG5nLW1vZGVsPVwidmFsdWVzLmluZGV4XCIgbmctZGlzYWJsZWQ9XCJ0cnVlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLXNsaWRlcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1zbGlkZXItY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcnKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9zbGlkZXIvbWFpbi5odG1sJyxcbiAgICAnPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiaW5kZXRlcm1pbmF0ZVwiIG5nLWlmPVwibG9hZGluZ1wiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPlxcbicgK1xuICAgICc8ZGl2IGNsYXNzPVwicGxheWVyLWNvbnRlbnRcIiBsYXlvdXQ9XCJyb3dcIj5cXG4nICtcbiAgICAnICAgIDxjYW52YXMgYWxleGFuZHJhLXZpZXcgZGF0YS1pZD1cInZpZXdfMVwiIGFsZXhhbmRyYS1jb25maWc9XCJjb25maWdcIiBhbGV4YW5kcmEtc291cmNlPVwiZGF0YVwiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNjAwXCI+PC9jYW52YXM+XFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICAkbWRUb2FzdCwgJHN0YXRlKXtcclxuXHJcbiAgICAkcm9vdFNjb3BlLnNob3dUb2FzdCA9IGZ1bmN0aW9uKG1zZykge1xyXG4gICAgICBcclxuICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAudGV4dENvbnRlbnQobXNnKVxyXG4gICAgICAgICAgICAudGhlbWUoXCJwaWNrLXRoZW1lXCIpXHJcbiAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgICRyb290U2NvcGUuZ28gPSBmdW5jdGlvbiAoc3RhdGUsIHBhcmFtcykge1xyXG4gICAgICAgICRzdGF0ZS5nbyhzdGF0ZSwgcGFyYW1zKTtcclxuICAgIH07XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAgJG1kVGhlbWluZ1Byb3ZpZGVyKXtcclxuXHJcblxyXG4gICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAuc3RhdGUoXCJsb2dpblwiLCB7XHJcbiAgICAgICAgdXJsOiBcIi9sb2dpblwiLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmIChnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcC5wbGF5ZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luL21haW4uaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcgICAgICBcclxuXHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcFwiLCB7XHJcbiAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgaWYgKCFnZXRKU09OTG9jYWwoXCJ1c2VyXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9tYWluLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBDdHJsJyxcclxuICAgICAgICBhYnN0cmFjdDp0cnVlXHJcblxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHAubm9ybWFsXCIsIHtcclxuICAgICAgICB1cmw6ICdub3JtYWwnLFxyXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2V0SlNPTkxvY2FsKFwidXNlclwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvbm9ybWFsL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTm9ybWFsQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgLnN0YXRlKFwiYXBwLnNsaWRlclwiLCB7XHJcbiAgICAgICAgdXJsOiAnc2xpZGVyJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NsaWRlci9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1NsaWRlckN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcbiAgICAgLnN0YXRlKFwiYXBwLnBsYXllclwiLCB7XHJcbiAgICAgICAgdXJsOiAncGxheWVyJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3BsYXllci9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1BsYXllckN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoXCJhcHAuaGVpZ2h0bWFwXCIsIHtcclxuICAgICAgICB1cmw6ICdoZWlnaHQtbWFwJyxcclxuICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICBpZiAoIWdldEpTT05Mb2NhbChcInVzZXJcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2hlaWdodC1tYXAvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIZWlnaHRNYXBDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgXHJcbiAgICB9KVxyXG5cclxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvbG9naW5cIik7XHJcblxyXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcblxyXG4gICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAuYmFja2dyb3VuZFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICdkZWZhdWx0JzogJzUwMCcsIC8vIGJ5IGRlZmF1bHQgdXNlIHNoYWRlIDQwMCBmcm9tIHRoZSBwaW5rIHBhbGV0dGUgZm9yIHByaW1hcnkgaW50ZW50aW9uc1xyXG4gICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTInOiAnNjAwJywgLy8gdXNlIHNoYWRlIDYwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0yPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTMnOiAnQTEwMCcgLy8gdXNlIHNoYWRlIEExMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMzwvY29kZT4gY2xhc3NcclxuICAgIH0pXHJcbiAgICAucHJpbWFyeVBhbGV0dGUoJ2xpbWUnLCB7XHJcbiAgICAgICdkZWZhdWx0JzogJzQwMCcsIC8vIGJ5IGRlZmF1bHQgdXNlIHNoYWRlIDQwMCBmcm9tIHRoZSBwaW5rIHBhbGV0dGUgZm9yIHByaW1hcnkgaW50ZW50aW9uc1xyXG4gICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTInOiAnNjAwJywgLy8gdXNlIHNoYWRlIDYwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0yPC9jb2RlPiBjbGFzc1xyXG4gICAgICAnaHVlLTMnOiAnQTEwMCcgLy8gdXNlIHNoYWRlIEExMDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMzwvY29kZT4gY2xhc3NcclxuICAgIH0pXHJcbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBsZXNzIHRoYW4gYWxsIG9mIHRoZSBrZXlzLCBpdCB3aWxsIGluaGVyaXQgZnJvbSB0aGVcclxuICAgIC8vIGRlZmF1bHQgc2hhZGVzXHJcbiAgICAuYWNjZW50UGFsZXR0ZSgndGVhbCcsIHtcclxuICAgICAgJ2RlZmF1bHQnOiAnNTAwJyAvLyB1c2Ugc2hhZGUgMjAwIGZvciBkZWZhdWx0LCBhbmQga2VlcCBhbGwgb3RoZXIgc2hhZGVzIHRoZSBzYW1lXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxufSk7XHJcblxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE9hdXRoU2VydmljZSl7XHJcbiAgICBcclxuICAgIFxyXG4gICAgJHNjb3BlLm9wZW5NZW51ID0gZnVuY3Rpb24oJG1kT3Blbk1lbnUsIGV2KSB7XHJcbiAgICAgIG9yaWdpbmF0b3JFdiA9IGV2O1xyXG4gICAgICAkbWRPcGVuTWVudShldik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgICRzY29wZS5sb2dvdXQ9ZnVuY3Rpb24oKXtcclxuICAgICAgICBPYXV0aFNlcnZpY2UuIGxvZ291dCgpLlNlc3Npb24oZnVuY3Rpb24oKXtcclxuXHRcdCBkZWxldGVMb2NhbChcInVzZXJcIik7XHJcbiAgICAgICAgJHJvb3RTY29wZS5nbyhcImxvZ2luXCIpOyAgIFxyXG5cdH0sIGZ1bmN0aW9uKCl7fSk7XHJcbiAgICB9XHJcbiAgICBcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdIZWlnaHRNYXBDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBDb21wYW55U2VydmljZSwgJGFsZXhhbmRyYVV0aWxzKXtcclxuXHJcbiAgICAkc2NvcGUubG9hZGluZz10cnVlO1xyXG5cclxuICAgICRzY29wZS5jb25maWcgPSB7XHJcbiAgICAgICAgdHlwZTogXCJjdXN0b21cIixcclxuXHRcdGVuZ2luZTpcInBob25nX3Bvc2l0aW9uYWxcIixcclxuICAgICAgICBheGlzOiB0cnVlLFxyXG4gICAgICAgIGF4aXNMZW5ndGg6IDUwMCxcclxuICAgICAgICBzdHJlYW1pbmc6IHRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDogWzAuMywgMC4zLCAwLjNdLFxyXG4gICAgICAgIGdyaWQ6IHRydWUsXHJcbiAgICAgICAgZ3JpZENvbmZpZzoge1xyXG4gICAgICAgICAgICBsaW5lczogNjAsXHJcbiAgICAgICAgICAgIGRpbTogNTAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaWdodDp7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjpbLTEuMCwgLTEuMCwgLTFdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb2xvcnR5cGU6XCJ2YXJpYWJsZVwiLFxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcGxhbmU9e307XHJcblxyXG4gICAgJHNjb3BlLmluZGV4PTE7XHJcblxyXG4gICAgQ29tcGFueVNlcnZpY2UuUGljaygpLnN0YXRzKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgJHNjb3BlLmxvYWRpbmc9ZmFsc2U7XHJcbiAgICAgICAgcGxhbmU9cmVzLmRhdGEucGxhbmU7XHJcblxyXG4gICAgICAgIGFwcGx5UGxhbmUoKTtcclxuXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnNlbGVjdD1mdW5jdGlvbigpe1xyXG4gICAgICAgIGFwcGx5UGxhbmUoKTtcclxuICAgIH1cclxuXHR2YXIgY29sb3I9UmFuZENvbG9yKCk7XHJcblxyXG4gICAgdmFyIGFwcGx5UGxhbmU9ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY2FsZW5kYXI9cGxhbmUudmVydGljZXM7XHJcbiAgICAgICAgdmFyIGluZGV4PSRzY29wZS5pbmRleC0xO1xyXG4gICAgICAgIHZhciBjdXJyZW50X2RheT1jYWxlbmRhcltpbmRleF07XHJcblxyXG4gICAgICAgICRzY29wZS5kYXRhPXtcclxuICAgICAgICAgICAgbWVzaDokYWxleGFuZHJhVXRpbHMuUGxhbmUoe1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OnBsYW5lLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOnBsYW5lLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgd19zOnBsYW5lLnZXaWR0aCxcclxuICAgICAgICAgICAgICAgIGhfczpwbGFuZS52SGVpZ2h0XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHByZXYsIGl0ZW0sIGluZGV4KXtcclxuICAgICAgICAgICAgICAgIHZhciB4PWl0ZW0ueCwgeT1pdGVtLnosIHo9aXRlbS55O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjX3A9Xy5maW5kKGN1cnJlbnRfZGF5LCBmdW5jdGlvbihpKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5rZXk9PWluZGV4OyBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihjX3Ape1xyXG4gICAgICAgICAgICAgICAgICAgIHk9Y19wLnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcHJldi5wdXNoKHgpO1xyXG4gICAgICAgICAgICAgICAgcHJldi5wdXNoKHkpO1xyXG4gICAgICAgICAgICAgICAgcHJldi5wdXNoKHopO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjpbNTAsMCw1MF0sXHJcblx0XHRcdGNvbG9yOmNvbG9yXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBPYXV0aFNlcnZpY2UsIFJlcXVlc3RTZXJ2aWNlKXtcclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgJHNjb3BlLnVzZXIgPSB7ZW1haWw6XCJcIiwgcGFzc3dvcmQ6XCJcIn07XHJcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXN5bmMud2F0ZXJmYWxsKFtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKG5leHQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzRW1haWw9ZW1wdHlPclVuZGVmaW5lZCgkc2NvcGUudXNlci5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNQYXNzd29yZD1lbXB0eU9yVW5kZWZpbmVkKCRzY29wZS51c2VyLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgICAgIGlmKGlzRW1haWwgfHwgaXNQYXNzd29yZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaXNFbWFpbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoXCJFbWFpbCBFbXB0eVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNQYXNzd29yZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoXCJQYXNzd29yZCBFbXB0eVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gbG9naW4obmV4dCl7XHJcblxyXG4gICAgICAgICAgICAgICAgT2F1dGhTZXJ2aWNlLmxvZ2luKCkuU2Vzc2lvbigkc2NvcGUudXNlciwgZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXMuZXJyb3IpcmV0dXJuIG5leHQocmVzLmVycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dChudWxsLCByZXMuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgUmVxdWVzdFNlcnZpY2UuU2VydmVyTm90Rm91bmQobmV4dCkpO1xyXG5cclxuICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUm9sZSh1c2VyLCBuZXh0KXtcclxuICAgICAgICAgICAgICAgIE9hdXRoU2VydmljZS5yb2xlKCkuY2hlY2soe3JvbGU6dXNlci5yb2xlfSwgZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXMuZXJyb3IpcmV0dXJuIG5leHQocmVzLmVycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmRhdGE9PTIpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dChudWxsLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdFNlcnZpY2UuTm9Sb2xlQXV0aG9yaXplZChuZXh0KSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9LCBSZXF1ZXN0U2VydmljZS5TZXJ2ZXJOb3RGb3VuZChuZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBdLCBmdW5jdGlvbihlcnIsIHVzZXIpe1xyXG4gICAgICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRyb290U2NvcGUuc2hvd1RvYXN0KGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2F2ZUxvY2FsKFwidXNlclwiLCB1c2VyKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcC5ub3JtYWxcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH07XHJcblxyXG5cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdOb3JtYWxDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBDb21wYW55U2VydmljZSl7XHJcblxyXG4gICAgJHNjb3BlLmxvYWRpbmc9dHJ1ZTtcclxuICAgICRzY29wZS5kYXRhPVtdO1xyXG5cdCRzY29wZS5zZWxlY3RlZEluZm89e307XHJcblx0XHJcbiAgICB2YXIgY2FsZW5kYXI9W107XHJcblxyXG4gICAgJHNjb3BlLmNvbmZpZz17XHJcbiAgICAgICAgY29sb3J0eXBlOlwidmFyaWFibGVcIixcclxuICAgICAgICBlbmdpbmU6XCJ0b29uXCIsXHJcbiAgICAgICAgYXhpczp0cnVlLFxyXG4gICAgICAgIGF4aXNMZW5ndGg6NTAwLFxyXG4gICAgICAgIHN0cmVhbWluZzp0cnVlLFxyXG4gICAgICAgIGJhY2tncm91bmQ6WzAuMywwLjMsMC4zXSxcclxuICAgICAgICBncmlkOnRydWUsXHJcbiAgICAgICAgZ3JpZENvbmZpZzp7XHJcbiAgICAgICAgICAgIGxpbmVzOjYwLFxyXG4gICAgICAgICAgICBkaW06NTAwXHJcbiAgICAgICAgfSxcclxuXHRcdHNlbGVjdG9yOnRydWUsIFxyXG4gICAgICAgIG9uU2VsZWN0ZWQ6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdGlmKGRhdGEpXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEluZm89ZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGZldGNoPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgQ29tcGFueVNlcnZpY2UuUGljaygpLnN0YXRzKGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyPUltbXV0YWJsZS5MaXN0KHJlcy5kYXRhLnN0YXRzKTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGE9Xy5jbG9uZShjYWxlbmRhci5nZXQoMjMpKTtcclxuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmc9ZmFsc2U7IFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmZXRjaCgpO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1BsYXllckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbXBhbnlTZXJ2aWNlLCAkdGltZW91dCl7XHJcblxyXG4gICAgdmFyIFBMQVlFUl9USU1FPTIwMDA7XHJcbiAgICB2YXIgRU1QVFlfVElNRT01MDA7XHJcblxyXG4gICAgJHNjb3BlLmxvYWRpbmc9dHJ1ZTtcclxuICAgICRzY29wZS5wbGF5aW5nPWZhbHNlO1xyXG4gICAgJHNjb3BlLmRhdGE9W107XHJcbiAgICB2YXIgY2FsZW5kYXI9W107XHJcbiAgICB2YXIgdHdlZW49bnVsbDtcclxuXHJcbiAgICAkc2NvcGUudmFsdWVzPXtcclxuICAgICAgICBpbmRleDoxfTtcclxuXHJcbiAgICAkc2NvcGUuY29uZmlnPXtcclxuICAgICAgICBjb2xvcnR5cGU6XCJ2YXJpYWJsZVwiLFxyXG4gICAgICAgIGVuZ2luZTpcInRvb25cIixcclxuICAgICAgICBheGlzOnRydWUsXHJcbiAgICAgICAgYXhpc0xlbmd0aDo1MDAsXHJcbiAgICAgICAgc3RyZWFtaW5nOnRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDpbMC4zLDAuMywwLjNdLFxyXG4gICAgICAgIGdyaWQ6dHJ1ZSxcclxuICAgICAgICBncmlkQ29uZmlnOntcclxuICAgICAgICAgICAgbGluZXM6NjAsXHJcbiAgICAgICAgICAgIGRpbTo1MDBcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG5cclxuXHJcbiAgICBDb21wYW55U2VydmljZS5QaWNrKCkuc3RhdHMoZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICBjYWxlbmRhcj1JbW11dGFibGUuTGlzdChyZXMuZGF0YS5zdGF0cyk7XHJcbiAgICAgICAgJHNjb3BlLmRhdGE9Xy5jbG9uZURlZXAoY2FsZW5kYXIuZ2V0KDApKTtcclxuICAgICAgICAkc2NvcGUubG9hZGluZz1mYWxzZTsgXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZUNhbGVuZGFyKHN0ZXAsYywgbiwgY2Ipe1xyXG5cclxuICAgICAgICB2YXIgaW50ZXJfZGF0YT1jLnJlZHVjZShmdW5jdGlvbihwcmV2LGl0ZW0sIGluZGV4KXtcclxuICAgICAgICAgICAgdmFyIGNfcG9zPWl0ZW0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBuX3Bvcz1uW2luZGV4XS5wb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGlmKCFfLmlzRXF1YWwoY19wb3MsIG5fcG9zKSl7XHJcbiAgICAgICAgICAgICAgICBwcmV2Lmxlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgcHJldi5jdXJyZW50W1wieF9cIitpbmRleF09Y19wb3NbMF07XHJcbiAgICAgICAgICAgICAgICBwcmV2LmN1cnJlbnRbXCJ5X1wiK2luZGV4XT1jX3Bvc1sxXTtcclxuICAgICAgICAgICAgICAgIHByZXYuY3VycmVudFtcInpfXCIraW5kZXhdPWNfcG9zWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgIHByZXYubmV4dFtcInhfXCIraW5kZXhdPW5fcG9zWzBdO1xyXG4gICAgICAgICAgICAgICAgcHJldi5uZXh0W1wieV9cIitpbmRleF09bl9wb3NbMV07XHJcbiAgICAgICAgICAgICAgICBwcmV2Lm5leHRbXCJ6X1wiK2luZGV4XT1uX3Bvc1syXTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgY3VycmVudDp7fSxcclxuICAgICAgICAgICAgbmV4dDp7fSxcclxuICAgICAgICAgICAgbGVuZ3RoOjBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudmFsdWVzLmluZGV4PXN0ZXArMTtcclxuXHJcbiAgICAgICAgaWYoaW50ZXJfZGF0YS5sZW5ndGg+MCl7XHJcblxyXG4gICAgICAgICAgICB0d2VlbiA9IG5ldyBUV0VFTi5Ud2VlbihpbnRlcl9kYXRhLmN1cnJlbnQpXHJcbiAgICAgICAgICAgICAgICAudG8oaW50ZXJfZGF0YS5uZXh0LCBQTEFZRVJfVElNRSlcclxuICAgICAgICAgICAgICAgIC5vblVwZGF0ZShmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuJCRwaGFzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpeyBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wbGF5aW5nPT1mYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyX2FycmF5PU9iamVjdC5rZXlzKHNlbGYpLnJlZHVjZShmdW5jdGlvbihwcmV2LCBpdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZT1zZWxmW2l0ZW1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXM9aXRlbS5zcGxpdChcIl9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW09a2V5c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleD1rZXlzWzFdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XT1wcmV2W2luZGV4XXx8e31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2W2luZGV4XVtwYXJhbV09dmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0se30pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lX2RhdGE9Xy5jbG9uZURlZXAoJHNjb3BlLmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaW50ZXJfYXJyYXkpLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU9aW50ZXJfYXJyYXlbaXRlbV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVfZGF0YVtpdGVtXS5wb3NpdGlvbj1bdmFsdWUueCwgdmFsdWUueSwgdmFsdWUuel07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhPWNsb25lX2RhdGE7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uU3RvcChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJoZWxsb1wiKVxyXG4gICAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5pbnRlcnBvbGF0aW9uKCBUV0VFTi5JbnRlcnBvbGF0aW9uLkJlemllciApLmVhc2luZyggVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lICkuZGVsYXkoIDI1MCApXHJcbiAgICAgICAgICAgICAgICAuc3RhcnQoKVxyXG5cclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGNiLCBFTVBUWV9USU1FKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAkc2NvcGUucGxheT1mdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5wbGF5aW5nPXRydWU7XHJcbiAgICAgICAgZnVuY3Rpb24gaXRlcihpKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGk8Y2FsZW5kYXIuY291bnQoKS0xICYmICRzY29wZS5wbGF5aW5nKXtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50PV8uY2xvbmVEZWVwKGNhbGVuZGFyLmdldChpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dD1fLmNsb25lRGVlcChjYWxlbmRhci5nZXQoaSsxKSk7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlQ2FsZW5kYXIoaSwgY3VycmVudCwgbmV4dCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpdGVyKGkrMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5wbGF5aW5nPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlcy5pbmRleD0xO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGE9W107XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhPV8uY2xvbmVEZWVwKGNhbGVuZGFyLmdldCgwKSk7ICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaXRlcigwKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJHNjb3BlLnN0b3A9ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBsYXlpbmc9ZmFsc2U7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEludGVycG9sYXRpb25UaW1lKTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gSW50ZXJwb2xhdGlvblRpbWUodGltZSkge1xyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoSW50ZXJwb2xhdGlvblRpbWUpO1xyXG4gICAgICAgIFRXRUVOLnVwZGF0ZSh0aW1lKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1NsaWRlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBDb21wYW55U2VydmljZSwgJGFsZXhhbmRyYVV0aWxzKSB7XHJcblxyXG4gICAgICAgIHZhciBwcm9maWxlO1xyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xyXG5cclxuXHJcblxyXG4gICAgICAgICRzY29wZS5jb25maWcgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXHJcbiAgICAgICAgICAgIGVuZ2luZTpcInBob25nX3Bvc2l0aW9uYWxcIixcclxuICAgICAgICAgICAgY29sb3J0eXBlOlwidmFyaWFibGVcIixcclxuICAgICAgICAgICAgYXhpczogdHJ1ZSxcclxuICAgICAgICAgICAgYXhpc0xlbmd0aDogNTAwLFxyXG4gICAgICAgICAgICBzdHJlYW1pbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFswLjMsIDAuMywgMC4zXSxcclxuICAgICAgICAgICAgZ3JpZDogdHJ1ZSxcclxuICAgICAgICAgICAgZ3JpZENvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgbGluZXM6IDYwLFxyXG4gICAgICAgICAgICAgICAgZGltOiA1MDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjb2xvcj1SYW5kQ29sb3IoKTtcclxuXHJcbiAgICAgICAgdmFyIEFwcGx5VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBtb2RlbCA9ICRhbGV4YW5kcmFVdGlscy5UZXh0KHRleHQsIHtcclxuICAgICAgICAgICAgICAgIHNpemU6IDEwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwLjUsXHJcbiAgICAgICAgICAgICAgICBjdXJ2ZVNlZ21lbnRzOiAzMCxcclxuICAgICAgICAgICAgICAgIGJldmVsRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGJldmVsVGhpY2tuZXNzOiAxLjUsXHJcbiAgICAgICAgICAgICAgICBiZXZlbFNpemU6IDAuNVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNoOiBtb2RlbCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBbNTAsIDUwLDE1MF0sXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbjp7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6NDUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXhpczpbMCwxLDBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29sb3I6Y29sb3JcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIEdldFByb2ZpbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIENvbXBhbnlTZXJ2aWNlLlByb2ZpbGUoKS5nZXQoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKHJlcy5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBBcHBseVRleHQocHJvZmlsZS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2V0UHJvZmlsZSgpO1xyXG5cclxuXHJcblxyXG5cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIkFwaVNlcnZpY2VcIiwgZnVuY3Rpb24oJHJlc291cmNlLCAkbG9jYXRpb24pe1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLy9lbnY6JGxvY2F0aW9uLmFic1VybCgpLmluZGV4T2YoXCJsb2NhbGhvc3RcIik9PS0xP1wicHJvZFwiOlwiZGV2XCIsXHJcbiAgICAgICAgZW52OlwicHJvZFwiLFxyXG4gICAgICAgIHByb2Q6e1xyXG4gICAgICAgICAgICBwcm90b2NvbDpcImh0dHBzXCIsXHJcbiAgICAgICAgICAgIGhvc3Q6XCJwaWNreW91cmRheS5oZXJva3VhcHAuY29tXCIsXHJcbiAgICAgICAgICAgIHBvcnQ6XCJcIixcclxuICAgICAgICAgICAgcm9vdDpcImFwaVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXY6e1xyXG4gICAgICAgICAgICBwcm90b2NvbDpcImh0dHBcIixcclxuICAgICAgICAgICAgaG9zdDpcImxvY2FsaG9zdFwiLFxyXG4gICAgICAgICAgICBwb3J0OlwiNTAwMFwiLFxyXG4gICAgICAgICAgICByb290OlwiYXBpXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRBcGlQYXRoOmZ1bmN0aW9uKHBhdGgpe1xyXG4gICAgICAgICAgICB2YXIgYXBpPXRoaXNbdGhpcy5lbnZdO1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnByb3RvY29sK1wiOi8vXCIrYXBpLmhvc3QrKGFwaS5wb3J0IT09XCJcIj8oXCI6XCIrYXBpLnBvcnQpOlwiXCIpK1wiL1wiK2FwaS5yb290K1wiL1wiK3BhdGg7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVzdDpmdW5jdGlvbihwYXRoLCBtZXRob2RzLCBkZWZhdWx0UGFyYW1zKXtcclxuICAgICAgICAgICAgdmFyIHJlc291cmNlPSRyZXNvdXJjZShcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXBpUGF0aChwYXRoKSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYXJhbXMgfHwge30sXHJcbiAgICAgICAgICAgICAgICBtZXRob2RzIHx8IHt9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTtcclxuXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIkNvbXBhbnlTZXJ2aWNlXCIsIGZ1bmN0aW9uKEFwaVNlcnZpY2Upe1xyXG5cclxuICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgIGJhc2U6XCJjb21wYW55XCIsXHJcbiAgICAgICAgXHJcbiAgICAgICAgUGljazpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9zdGF0c1BpY2tzXCIsIHtcclxuICAgICAgICAgICAgICAgIHN0YXRzOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgUHJvZmlsZTpmdW5jdGlvbigpe1xyXG4gICAgICAgIFx0cmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvcHJvZmlsZVwiLHtcclxuICAgICAgICBcdFx0Z2V0OnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgIFx0fSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICB9O1xyXG59KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQXV0aEludGVyY2VwdG9yXCIsIGZ1bmN0aW9uKCRxLCAkbG9jYXRpb24pe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpe1xyXG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZXI9Z2V0SlNPTkxvY2FsKFwidXNlclwiKTtcclxuICAgICAgICAgICAgdmFyIHVzZXI9Z2V0SlNPTkxvY2FsKFwidXNlclwiKTtcclxuICAgICAgICAgICAgaWYgKCFjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uICYmIHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB1c2VyLnRva2VuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVlc3RFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAnRVJST1InKSB7IC8vRm9yY2UgZXJyb3JcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uKHJlamVjdGlvbil7XHJcbiAgICAgICAgICAgIGlmKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGUgYWNjZXNvJyk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudXNlciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiT2F1dGhTZXJ2aWNlXCIsIGZ1bmN0aW9uKEFwaVNlcnZpY2Upe1xyXG5cclxuICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgIGJhc2U6XCJvYXV0aFwiLFxyXG4gICAgICAgIGxvZ2luOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlLHtcclxuICAgICAgICAgICAgICAgIFNlc3Npb246e21ldGhvZDpcIlBPU1RcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvZ291dDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi9sb2dvdXRcIiwge1xyXG4gICAgICAgICAgICAgICAgU2Vzc2lvbjp7bWV0aG9kOlwiR0VUXCIsIHBhcmFtczp7fX1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByb2xlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL3JvbGUvOnJvbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICBjaGVjazp7bWV0aG9kOlwiR0VUXCIsIHBhcmFtczp7cm9sZTpcIkByb2xlXCJ9fSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcbn0pO1xyXG5cclxuXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIlJlcXVlc3RTZXJ2aWNlXCIsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgIFxyXG4gICAgICAgIFNlcnZlck5vdEZvdW5kOiBDbG9zdXJlTWVzc2FnZShcIlNlcnZlciBOb3QgRm91bmRcIiksXHJcblxyXG4gICAgICAgIE5vUm9sZUF1dGhvcml6ZWQ6IENsb3N1cmVNZXNzYWdlKFwiTm8gUm9sZSBBdXRob3JpemVkXCIpLFxyXG4gICAgICAgIFxyXG4gICAgXHJcbiAgICB9O1xyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
