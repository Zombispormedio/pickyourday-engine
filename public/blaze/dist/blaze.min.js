var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Blaze;!function(t){var e;!function(t){function e(t){for(var e=null,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=0;r<i.length;++r){try{e=t.getContext(i[r])}catch(n){}if(e)break}return null===e?(alert("Could not initialise WebGL"),null):(e.viewportWidth=t.width,e.viewportHeight=t.height,e)}function i(e,i,r,n){var o=e.createBuffer();switch(e.bindBuffer(e.ARRAY_BUFFER,o),n){case t.BUFFER_DRAW.STATIC:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW);break;case t.BUFFER_DRAW.DYNAMIC:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.DYNAMIC_DRAW);break;case t.BUFFER_DRAW.STREAM:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STREAM_DRAW);break;default:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)}return e.bindBuffer(e.ARRAY_BUFFER,null),r?(o.itemSize=2,o.numItems=i.length/2):(o.itemSize=3,o.numItems=i.length/3),o}function r(e,i,r){var n=e.createBuffer(e.ELEMENT_ARRAY_BUFFER);switch(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),r){case t.BUFFER_DRAW.STATIC:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW);break;case t.BUFFER_DRAW.DYNAMIC:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.DYNAMIC_DRAW);break;case t.BUFFER_DRAW.STREAM:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STREAM_DRAW);break;default:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW)}return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),n.itemSize=1,n.numItems=i.length,n}function n(t,e){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),i}function o(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)}function a(t,e){var i=o(t,t.FRAGMENT_SHADER,e.fragment),r=o(t,t.VERTEX_SHADER,e.vertex),n=t.createProgram();return t.attachShader(n,r),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||console.log(t.getProgramInfoLog(n)),t.useProgram(n),n}t.getGLContext=e,function(t){t[t.STATIC=0]="STATIC",t[t.STREAM=1]="STREAM",t[t.DYNAMIC=2]="DYNAMIC"}(t.BUFFER_DRAW||(t.BUFFER_DRAW={}));t.BUFFER_DRAW;t.createBuffer=i,t.createIndexBuffer=r,t.createTexture=n,t.createShader=o,t.createProgram=a}(e=t.WebGLUtils||(t.WebGLUtils={}));var i;!function(t){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function i(t){var i=e()+e();return t?t+i:i}function r(t){return t.map(function(t){return Number.isNaN(t)&&(t=0),t})}function n(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.addEventListener("load",function(){e(i.responseText)}),i.send()}function o(t){var e=t.split(".");return e[e.length-1]}function a(){return(new Date).getTime()}function s(t){return t*Math.PI/180}function u(t,e){for(var i=0,r=1,n=2,o=[],a=0;a<t.length;a++)o[a]=0;for(var a=0;a<e.length;a+=3){var s=[],u=[],c=[];s[i]=t[3*e[a+1]+i]-t[3*e[a]+i],s[r]=t[3*e[a+1]+r]-t[3*e[a]+r],s[n]=t[3*e[a+1]+n]-t[3*e[a]+n],u[i]=t[3*e[a+2]+i]-t[3*e[a+1]+i],u[r]=t[3*e[a+2]+r]-t[3*e[a+1]+r],u[n]=t[3*e[a+2]+n]-t[3*e[a+1]+n],c[i]=s[r]*u[n]-s[n]*u[r],c[r]=s[n]*u[i]-s[i]*u[n],c[n]=s[i]*u[r]-s[r]*u[i];for(var f=0;3>f;f++)o[3*e[a+f]+i]=o[3*e[a+f]+i]+c[i],o[3*e[a+f]+r]=o[3*e[a+f]+r]+c[r],o[3*e[a+f]+n]=o[3*e[a+f]+n]+c[n]}for(var a=0;a<t.length;a+=3){var h=[];h[i]=o[a+i],h[r]=o[a+r],h[n]=o[a+n];var l=Math.sqrt(h[i]*h[i]+h[r]*h[r]+h[n]*h[n]);0==l&&(l=1e-5),h[i]=h[i]/l,h[r]=h[r]/l,h[n]=h[n]/l,o[a+i]=h[i],o[a+r]=h[r],o[a+n]=h[n]}return o}t.s4=e,t.uuid=i,t.normalizeNaN=r,t.load=n,t.getExtension=o,t.nowInMilliseconds=a,t.degToRad=s,t.calculateNormals=u}(i=t.utils||(t.utils={})),function(t){t[t.ORBITING=0]="ORBITING",t[t.TRACKING=1]="TRACKING"}(t.CAMERA_TYPE||(t.CAMERA_TYPE={}));var r=t.CAMERA_TYPE,n=function(){function t(){}return t.setCanvasToContext=function(i,r){var n=e.getGLContext(r);t.setContext(i,n)},t.setContext=function(e,i){t._views[e].context=i},t.getContext=function(e){return t._views[e].context},t.createProgram=function(i,r){var n=t.getContext(i),o=e.createProgram(n,r);t.setProgram(i,o)},t.setProgram=function(e,i){t._views[e].program=i},t.getProgram=function(e){return t._views[e].program},t.createView=function(e){t._views[e]={}},t.setAttributeLocations=function(e,i){var r=t._views[e],n=r.context,o=r.program;r.attribs=i.reduce(function(t,e){return t[e]=n.getAttribLocation(o,e),t},{})},t.getAttrib=function(e,i){return t._views[e].attribs[i]},t.getUniform=function(e,i){return t._views[e].uniforms[i]},t.setUniformLocations=function(e,i){var r=t._views[e],n=r.context,o=r.program;r.uniforms=i.reduce(function(t,e){return t[e]=n.getUniformLocation(o,e),t},{})},t.enableAttrib=function(e,i,r){var n=t.getAttrib(e,i),o=t.getContext(e);o.enableVertexAttribArray(n),r?o.vertexAttribPointer(n,r.size||3,o.FLOAT,r.normalized||!1,r.stride||0,r.offset||0):o.vertexAttribPointer(n,3,o.FLOAT,!1,0,0)},t.disableAttrib=function(e,i){var r=t.getAttrib(e,i),n=t.getContext(e);n.disableVertexAttribArray(r)},t.renderLoop=function(t){setInterval(t,500)},t.addTexture=function(e,i){var r=t._views[e];r.textures=r.textures||[],r.textures.push(i)},t.activeTexture=function(e,i,r){var n=t._views[e],o=n.context,a=(n.program,n.textures.indexOf(i));if(a>-1){o.activeTexture(0===a?o.TEXTURE0:o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,r);var s=t.getUniform(e,"uSampler");o.uniform1i(s,a)}},t._views={},t}();t.Ketch=n;var o=function(){function t(t){this._graph_id=t}return Object.defineProperty(t.prototype,"graphID",{get:function(){return this._graph_id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gl",{get:function(){return n.getContext(this.graphID)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"program",{get:function(){return n.getProgram(this.graphID)},enumerable:!0,configurable:!0}),t.prototype.getUniform=function(t){return n.getUniform(this.graphID,t)},t}();t.Renderable=o;var a=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype.beginDraw=function(t){},e.prototype.endDraw=function(t){},e}(o);t.Entity=a;var s=function(t){function e(e){t.call(this,e),this._stack=[],this._mvMatrix=mat4.create(),this._pMatrix=mat4.create(),this._nMatrix=mat4.create()}return __extends(e,t),e.prototype.push=function(){var t=mat4.create();mat4.set(this._mvMatrix,t),this._stack.push(t)},e.prototype.pop=function(){if(0==this._stack.length)throw"invalid popMatrix";this._mvMatrix=this._stack.pop()},e.prototype.ModelView=function(){this._camera?this._mvMatrix=this._camera.modelView:mat4.identity(this._mvMatrix)},Object.defineProperty(e.prototype,"mvMatrix",{get:function(){return this._mvMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pMatrix",{get:function(){return this._pMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nMatrix",{get:function(){return this._nMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MainCamera",{set:function(t){this._camera=t},enumerable:!0,configurable:!0}),e.prototype.Perspective=function(){var t=this.gl;mat4.identity(this._pMatrix),mat4.perspective(45,t.viewportWidth/t.viewportHeight,.1,1e3,this._pMatrix)},e.prototype.Normal=function(){mat4.identity(this._nMatrix),mat4.set(this._mvMatrix,this._nMatrix),mat4.inverse(this._nMatrix),mat4.transpose(this._nMatrix)},e.prototype.init=function(){this.ModelView(),this.Perspective(),this.Normal()},e.prototype.setUp=function(){var t=this.gl;this.Normal();var e=this.getUniform("uMVMatrix");e&&t.uniformMatrix4fv(e,!1,this._mvMatrix);var i=this.getUniform("uPMatrix");i&&t.uniformMatrix4fv(i,!1,this._pMatrix);var r=this.getUniform("uNMatrix");r&&t.uniformMatrix4fv(r,!1,this._nMatrix)},e}(o);t.MatrixStack=s;var u;!function(t){var r=function(t){function r(e){t.call(this,e)}return __extends(r,t),Object.defineProperty(r.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"src",{set:function(t){var e=this,r=this,n=i.getExtension(t);i.load(t,function(t){var i;switch(n){case"obj":i=r.parseOBJ(t);break;case"json":i=r.parseJSON(t)}r.createBuffers(i),e._onload&&e._onload()})},enumerable:!0,configurable:!0}),r.prototype.parseJSON=function(t){var e={};try{e=JSON.parse(t)}catch(i){console.log(i)}return e},r.prototype.parseOBJ=function(t){var e={v:[],vn:[],vt:[],iv:[],"in":[],it:[]},i=t.split("\n"),r=i.filter(function(t){return"v"===t[0]}),n=i.filter(function(t){return"f"===t[0]});r.forEach(function(t){var i=t.replace("\r","").split(" "),r=i[0];e[r]=e[r].concat(i.slice(1).filter(function(t){return""!==t}))});var o=[];return n.forEach(function(t){var e=t.replace("\r","").replace("f","").split(" ");o=o.concat(e.slice(1).filter(function(t){return""!==t}))}),o.forEach(function(t){var i=t.split("/");e.iv.push(parseInt(i[0])-1),e["in"].push(parseInt(i[1])-1),e.it.push(parseInt(i[2])-1)}),e},r.prototype.createBuffers=function(t){function r(t){return e.createBuffer(o,t)}function n(t){return e.createIndexBuffer(o,t)}var o=this.gl;_.defaults(t,{v:[],vn:[],vt:[],iv:[],"in":[],it:[]}),t.v.length>0&&(this._vbo=r(t.v)),t.v.length>0&&t.iv.length>0&&(this._nbo=r(i.calculateNormals(t.v,t.iv))),t.vt.length>0&&(this._tbo=e.createBuffer(o,t.vt,!0)),t.iv.length>0&&(this._ivbo=n(t.iv)),t["in"].length>0&&(this._inbo=n(t["in"])),t.it.length>0&&(this._itbo=n(t.it))},Object.defineProperty(r.prototype,"vbo",{get:function(){return this._vbo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nbo",{get:function(){return this._nbo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tbo",{get:function(){return this._tbo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ivbo",{get:function(){return this._ivbo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inbo",{get:function(){return this._inbo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itbo",{get:function(){return this._itbo},enumerable:!0,configurable:!0}),r}(o);t.MeshBuffers=r;var a=function(t){function r(e){t.call(this,e),this._image=new Image,this._oid=i.uuid(this.constructor.name)}return __extends(r,t),Object.defineProperty(r.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"src",{set:function(t){this._image.onload=this.loadTextureImage(this._onload),this._image.src=t},enumerable:!0,configurable:!0}),r.prototype.loadTextureImage=function(t){var i=this,r=this;return function(){i._texture=e.createTexture(r.gl,r._image),n.addTexture(r.graphID,r._oid),t&&t()}},Object.defineProperty(r.prototype,"content",{get:function(){return this._texture},enumerable:!0,configurable:!0}),r}(o);t.MeshTexture=a;var s=function(t){function e(e,i,r,n,o){t.call(this,e),this._ambient=i?vec4.create(i):vec4.create(),this._diffuse=r?vec4.create(r):vec4.create(),this._specular=n?vec4.create(n):vec4.create(),this._shininess=o||200}return __extends(e,t),Object.defineProperty(e.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"src",{set:function(t){var e=this,r=this;i.load(t,function(t){var i=r.parse(t);e._ambient=i.Ka,e._diffuse=i.Kd,e._specular=i.Ks,e.shininess=i.Ns,e._onload&&e._onload()})},enumerable:!0,configurable:!0}),e.prototype.parse=function(t){var e={},i=["Ka","Kd","Ks","Ns"],r=t.split("\n");return r.forEach(function(t){var r=t.split(" "),n=r[0];if(i.indexOf(n)>-1)switch(n){case"Ns":e.Ns=Number(r[1]);break;default:var o=r.slice(1).map(function(t){return Number(t)});o.push(1),e[n]=o}}),e},Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){this._ambient=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){this._diffuse=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){this._specular=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shininess",{get:function(){return this._shininess},set:function(t){this._shininess=t},enumerable:!0,configurable:!0}),e}(o);t.MeshMaterial=s}(u=t.Resources||(t.Resources={}));var c;!function(t){var e=function(){function t(){}return t.Main="#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform float uShininess;\nuniform vec3 uLightDirection;\n\nuniform vec4 uLightAmbient;\nuniform vec4 uLightDiffuse;\nuniform vec4 uLightSpecular;\n\nuniform vec4 uMaterialAmbient;\nuniform vec4 uMaterialDiffuse;\nuniform vec4 uMaterialSpecular;\n\n\nuniform bool uWireframe;\nuniform vec4 uWireframeColor;\n\nvarying vec3 vNormal;\nvarying vec3 vEyeVec;\n\nvoid main(){\n\nif(uWireframe){\n          gl_FragColor =uWireframeColor;\n        \n        }else{\n        vec3 L= normalize(uLightDirection);\n        vec3 N= normalize(vNormal);\n        float lambertTerm=dot(N, -L);\n        \n        vec4 Ia= uLightAmbient*uMaterialAmbient;\n        \n        vec4 Id=vec4(0.0,0.0,0.0,1.0);\n        \n        vec4 Is=vec4(0.0,0.0,0.0,1.0);\n        \n        if(lambertTerm>0.0)\n        {\n            Id=uLightDiffuse*uMaterialDiffuse*lambertTerm;\n            \n            vec3 E= normalize(vEyeVec);\n            vec3 R= reflect(L, N);\n            float specular=pow(max(dot(R,E),0.0), uShininess);\n            Is=uLightSpecular*uMaterialSpecular*specular;\n        }\n        \n        vec4 finalColor=Ia+Id+Is;\n        finalColor.a=1.0;\n    \n        gl_FragColor =finalColor;\n        }\n    }\n\n\n",t}();t.Fragment=e;var i=function(){function t(){}return t.Main="attribute vec3 a_position;\nattribute vec3 a_normal;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uNMatrix;\n\nuniform bool uWireframe;\n\nvarying vec3 vNormal;\nvarying vec3 vEyeVec;\n\nvoid main(){\n\n    vec4 vertex = uMVMatrix * vec4(a_position, 1.0);\n      if (!uWireframe) {\n   vNormal = vec3(uNMatrix * vec4(a_normal, 1.0));\n   vEyeVec=-vec3(vertex.xyz);   \n   }\n  gl_Position =uPMatrix * vertex;\n\n}\n\n\n",t}();t.Vertex=i}(c=t.Shaders||(t.Shaders={}));var f=function(t){function e(e,i,r,n){t.call(this,e),this._frequency=i,this._interval_id=null,this._callback=n}return __extends(e,t),e.prototype.onFrame=function(){if(e.ElapseTime=i.nowInMilliseconds(),!(e.ElapseTime<5)){for(var t=Math.floor(e.ElapseTime/this._frequency);t>0&&e.Count!=this._times;)this._callback(),t--,e.Count++;e.Count===this._times&&this.stop()}},e.prototype.start=function(){this._intime=i.nowInMilliseconds(),this._interval_id=setInterval(this.onFrame,this._frequency/1e3)},e.prototype.stop=function(){this._interval_id&&clearInterval(this._interval_id)},e.prototype.beginDraw=function(){},e.prototype.endDraw=function(){},e.Count=0,e}(a);t.AnimationEntity=f;var h=function(t){function e(e,i,r,n){t.call(this,e),this._material=null,this._texture=null,this._buffers=null,this._meshfile=i||null,this._materialfile=r||null,this._texturefile=n||null}return __extends(e,t),e.prototype.loadBuffers=function(t,e){this._buffers=new u.MeshBuffers(this.graphID),this._buffers.onload=e,this._buffers.src=t},e.prototype.loadTexture=function(t,e){this._texture=new u.MeshTexture(this.graphID),this._texture.onload=e,this._texture.src=t},Object.defineProperty(e.prototype,"material",{set:function(t){this._material=t},enumerable:!0,configurable:!0}),e.prototype.loadMaterial=function(t,e){this._material=new u.MeshMaterial(this.graphID),this._material.onload=e,this._material.src=t},e.prototype.loadMesh=function(t){var e=this,i=this;async.waterfall([function(t){return i._meshfile?(console.log("Loading Buffers"),void i.loadBuffers(i._meshfile,function(){console.log("Loaded Buffers"),t()})):t()},function(t){return e._texturefile?(console.log("Loading Texture"),void i.loadTexture(i._texturefile,function(){console.log("Loaded Texture"),t()})):t()},function(t){return i._materialfile?(console.log("Loading Material"),void i.loadMaterial(i._materialfile,function(){console.log("Loaded Material"),t()})):t()}],function(e){return e?console.log(e):void(t&&t())})},e.prototype.loadMeshByObject=function(t){this._buffers=new u.MeshBuffers(this.graphID),this._buffers.createBuffers(t)},e.prototype.loadMaterialByObject=function(t){this._material=new u.MeshMaterial(this.graphID),t.ambient&&(this._material.ambient=t.ambient),t.specular&&(this._material.specular=t.specular),t.diffuse&&(this._material.diffuse=t.diffuse),t.shininess&&(this._material.shininess=t.shininess)},e.prototype.setWireFrame=function(t,e){this._wireframe=t,this._wireframe&&(this._wireframeColor=e)},e.prototype.WireFrame=function(){var t=this.gl,e=this.getUniform("uWireframe");if(e&&t.uniform1i(e,this._wireframe),this._wireframe){var i=this.getUniform("uWireframeColor");i&&t.uniform4fv(i,this._wireframeColor)}},e.prototype.setMaterialUniforms=function(){if(this._material){var t=this.gl;if(this._material.ambient){var e=this.getUniform("uMaterialAmbient");e&&t.uniform4fv(e,this._material.ambient)}if(this._material.diffuse){var i=this.getUniform("uMaterialDiffuse");i&&t.uniform4fv(i,this._material.diffuse)}if(this._material.specular){var r=this.getUniform("uMaterialSpecular");r&&t.uniform4fv(r,this._material.specular)}if(this._material.shininess){var n=this.getUniform("uShininess");n&&t.uniform1f(n,this._material.shininess)}}},e.prototype.beginDraw=function(){var t=this.gl;this.setMaterialUniforms(),this.WireFrame(),t.bindBuffer(t.ARRAY_BUFFER,this._buffers.vbo),n.enableAttrib(this.graphID,"a_position"),t.bindBuffer(t.ARRAY_BUFFER,this._buffers.nbo),n.enableAttrib(this.graphID,"a_normal");var e=this._buffers.ivbo;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.drawElements(t.TRIANGLES,e.numItems,t.UNSIGNED_SHORT,0)},e.prototype.endDraw=function(){var t=this.gl;n.disableAttrib(this.graphID,"a_position"),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},e}(a);t.MeshEntity=h;var l=function(t){function e(e,i,r,n){t.call(this,e),this._matrix=mat4.create(),this._position=i||vec3.create(),this._size=r||vec3.create([1,1,1]),this._rotation=n||{angle:0,axis:vec3.create()}}return __extends(e,t),e.prototype.identity=function(){mat4.identity(this._matrix)},e.prototype.setMatrix=function(t){this._matrix=t},e.prototype.transpose=function(){mat4.transpose(this._matrix,this._matrix)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),e.prototype.setAbsolutePosition=function(t,e,i){this._position=[t,e,i]},e.prototype.translate=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=this._position,n=vec3.create([t,e,i]);vec3.add(r,n,this._position)},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e,i){this._size=[t,e,i]},e.prototype.scale=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=this._size,n=vec3.create([t,e,i]);vec3.add(r,n,this._size)},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!0,configurable:!0}),e.prototype.setRotation=function(t,e){t&&(this._rotation.angle=t),e&&(this._rotation.axis=e)},e.prototype.setAngle=function(t){this._rotation.angle=t},e.prototype.setAxis=function(t){this._rotation.axis=t},e.prototype.rotateAngle=function(t){void 0===t&&(t=0),this._rotation.angle+=t},e.prototype.moveAxis=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=this._rotation.axis,n=vec3.create([t,e,i]);vec3.add(r,n,this._rotation.axis)},e.prototype.beginDraw=function(t){if(t.push(),t.ModelView(),this._matrix=t.mvMatrix,void 0!=this._position&&mat4.translate(this._matrix,this._position),void 0!=this._size&&mat4.scale(this._matrix,this._size),void 0!=this._rotation){var e=this._rotation.angle*Math.PI/180;mat4.rotate(this._matrix,e,this._rotation.axis)}t.setUp()},e.prototype.endDraw=function(t){t.pop()},e}(a);t.TransformEntity=l;var p=function(t){function e(e,i,r,n,o,a,s){t.call(this,e),this._ambient=i?vec4.create(i):null,this._diffuse=r?vec4.create(r):null,this._position=n?vec4.create(n):null,this._specular=o?vec4.create(o):null,this._direction=a?vec3.create(a):null,this._cutoff=s}return __extends(e,t),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){this._ambient=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){this._diffuse=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){this._specular=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._diffuse},set:function(t){this._position=i.normalizeNaN(vec3.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=i.normalizeNaN(vec3.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cutOff",{get:function(){return this._cutoff},set:function(t){this._cutoff=t},enumerable:!0,configurable:!0}),e.prototype.beginDraw=function(){var t=this.gl;if(this._ambient){var e=this.getUniform("uLightAmbient");e&&t.uniform4fv(e,this._ambient)}if(this._diffuse){var i=this.getUniform("uLightDiffuse");i&&t.uniform4fv(i,this._diffuse)}if(this._specular){var r=this.getUniform("uLightSpecular");r&&t.uniform4fv(r,this._specular)}if(this._position){var n=this.getUniform("uLightPosition");n&&t.uniform3fv(n,this._position)}if(this._direction){var o=this.getUniform("uLightDirection");o&&t.uniform3fv(o,this._direction)}},e.prototype.endDraw=function(){},e}(a);t.LightEntity=p;var d=function(t){function e(e,i){t.call(this,e),this._type=i||r.ORBITING,this._cmatrix=mat4.create(),mat4.identity(this._cmatrix),this._up=vec3.create(),this._right=vec3.create(),this._normal=vec3.create(),this._position=vec3.create(),this._azimuth=0,this._elevation=0,this._steps=0}return __extends(e,t),Object.defineProperty(e.prototype,"type",{set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"azimuth",{get:function(){return this._azimuth},set:function(t){var e=t-this._azimuth;this.changeAzimuth(e)},enumerable:!0,configurable:!0}),e.prototype.changeAzimuth=function(t){this._azimuth+=t,(this._azimuth>360||this._azimuth<-360)&&(this._azimuth=this._azimuth%360)},Object.defineProperty(e.prototype,"elevation",{get:function(){return this._elevation},set:function(t){var e=t-this._elevation;this.changeElevation(e)},enumerable:!0,configurable:!0}),e.prototype.changeElevation=function(t){this._elevation+=t,(this._elevation>360||this._elevation<-360)&&(this._elevation=this._elevation%360)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this._steps},set:function(t){var e=vec3.create(),i=vec3.create();e=this.position;var n=t-this._steps;vec3.normalize(this._normal,i);var o=vec3.create();this._type===r.TRACKING?(o[0]=e[0]-n*i[0],o[1]=e[1]-n*i[1],o[2]=e[2]-n*i[2]):(o[0]=e[0],o[1]=e[1],o[2]=e[2]-n),this.position=o,this._steps=t},enumerable:!0,configurable:!0}),e.prototype.calculateOrientation=function(){var t=this._cmatrix;mat4.multiplyVec4(t,[1,0,0,0],this._right),mat4.multiplyVec4(t,[0,1,0,0],this._up),mat4.multiplyVec4(t,[0,0,1,0],this._normal)},e.prototype.beginDraw=function(){mat4.identity(this._cmatrix),this.calculateOrientation(),this._type===r.TRACKING?(mat4.translate(this._cmatrix,this._position),mat4.rotateY(this._cmatrix,this._azimuth*Math.PI/180),mat4.rotateX(this._cmatrix,this._elevation*Math.PI/180)):(mat4.rotateY(this._cmatrix,this._azimuth*Math.PI/180),mat4.rotateX(this._cmatrix,this._elevation*Math.PI/180),mat4.translate(this._cmatrix,this._position)),this.calculateOrientation(),this._type===r.TRACKING&&mat4.multiplyVec4(m,[0,0,0,1],this._position)},Object.defineProperty(e.prototype,"modelView",{get:function(){var t=mat4.create();return mat4.inverse(this._cmatrix,t),t},enumerable:!0,configurable:!0}),e.prototype.endDraw=function(){},e}(a);t.CameraEntity=d;var v=function(){function t(t,e,r){this._parentNode=t,this._parentNode&&this._parentNode.addChildNode(this),this._childNodes=[],this._type=e,this._oid=i.uuid(this._type||this.constructor.name),this._entity=r}return Object.defineProperty(t.prototype,"oid",{get:function(){return this._oid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(t){this._entity=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),t.prototype.addChildNode=function(t){this._childNodes.push(t)},t.prototype.removeChildNode=function(t){var e=this.indexOf(t);e>-1&&this._childNodes.splice(e,1)},t.prototype.getChildNodeByIndex=function(t){return this._childNodes[t]||void 0},t.prototype.existsChildNode=function(t){return void 0!==this._childNodes[t]},t.prototype["delete"]=function(){this._parentNode.removeChildNode(this)},t.prototype.createChildNode=function(e,i){return new t(this,e,i)},t.prototype.isRoot=function(){return void 0===this._parentNode},t.prototype.indexOf=function(t){var e=t.oid;return _.findIndex(this._childNodes,function(t){return t.oid===e})},t.prototype.indexInParent=function(){var t=-1;return this.isRoot()||(t=this._parentNode.indexOf(this)),t},t.prototype.hasSibling=function(t){var e=!1;if(!this.isRoot()){var i=this._parentNode.indexOf(this);i>-1&&(t?this._parentNode.getChildNodeByIndex(i-1)&&(e=!0):this._parentNode.getChildNodeByIndex(i+1)&&(e=!0))}return e},t.prototype.nextSibling=function(){var t=null;if(!this.isRoot()&&this.hasSibling()){var e=this._parentNode.indexOf(this);t=this._parentNode.getChildNodeByIndex(e+1)}return t},t.prototype.previousSibling=function(){var t=null;if(!this.isRoot()&&this.hasSibling(!0)){var e=this._parentNode.indexOf(this);t=this._parentNode.getChildNodeByIndex(e-1)}return t},t.prototype.firstChild=function(){return this.getChildNodeByIndex(0)},t.prototype.lastChild=function(){return this.getChildNodeByIndex(this._childNodes.length-1)},t.prototype.removeChildNodes=function(){this._childNodes=[]},t.prototype.draw=function(t){this._entity&&this._entity.beginDraw(t);for(var e=0;e<this._childNodes.length;e++){var i=this._childNodes[e];i.draw(t)}this._entity&&this._entity.endDraw(t)},t}();t.NodeElement=v;var g=function(t){function e(){var e=i.uuid();t.call(this,e),this._oid=e,this._scene=new v(void 0,"Scene"),this._matrixStack=new s(this._oid),this._loaderBuffer=[],this._isDrawing=!1,n.createView(this._oid)}return __extends(e,t),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDrawing",{get:function(){return this._isDrawing},enumerable:!0,configurable:!0}),e.prototype.Environment=function(){var t=this.gl;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.clearColor(0,0,0,1),t.clearDepth(1)},e.prototype.draw=function(){var t=this.gl;this._isDrawing=!0,t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this._scene.draw(this._matrixStack),this._isDrawing=!1},e.prototype.createMainChildNode=function(t,e){return this._scene.createChildNode(t,e)},e.prototype.removeMainChildNode=function(t){this._scene.removeChildNode(t)},Object.defineProperty(e.prototype,"oid",{get:function(){return this._oid},enumerable:!0,configurable:!0}),e.prototype.setContext=function(t){n.setCanvasToContext(this.oid,t)},e.prototype.Program=function(){n.createProgram(this._oid,{fragment:c.Fragment.Main,vertex:c.Vertex.Main})},e.prototype.createMesh=function(t){var e=new h(this.oid);if(t.mesh&&e.loadMeshByObject(t.mesh),t.material&&e.loadMaterialByObject(t.material),t.wireframe){var i=t.wireframe;e.setWireFrame(i.is,i.color)}return e},e.prototype.createMeshByLoader=function(t){var e=new h(this.oid,t.mesh,t.material,t.texture);return this._loaderBuffer.push(e),e},e.prototype.createTransform=function(t,e,i){return new l(this.oid,t,e,i)},e.prototype.createLight=function(t){return new p(this.oid,t.ambient,t.diffuse,t.position,t.specular,t.direction,t.cutoff)},e.prototype.createCamera=function(t){return new d(this.oid,t)},Object.defineProperty(e.prototype,"MainCamera",{set:function(t){this._matrixStack.MainCamera=t},enumerable:!0,configurable:!0}),e.prototype.startLoader=function(t){async.eachSeries(this._loaderBuffer,function(t,e){t.loadMesh(function(){console.log(t),e()})},t)},e.prototype.configure=function(){var t=this;t.Environment(),t.Program(),n.setAttributeLocations(t._oid,e.ATTRIBUTES),n.setUniformLocations(t._oid,e.UNIFORMS),this._matrixStack.init()},e.prototype.configureWithLoader=function(t){var e=this;e.configure(),e.startLoader(t)},e.UNIFORMS=["uPMatrix","uMVMatrix","uNMatrix","uLightDirection","uLightAmbient","uMaterialAmbient","uLightDiffuse","uMaterialDiffuse","uLightSpecular","uMaterialSpecular","uShininess","uWireframe","uWireframeColor"],e.ATTRIBUTES=["a_position","a_normal"],e}(o);t.SceneGraph=g}(Blaze||(Blaze={}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsYXplLmpzIl0sIm5hbWVzIjpbIl9fZXh0ZW5kcyIsInRoaXMiLCJkIiwiYiIsIl9fIiwiY29uc3RydWN0b3IiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJCbGF6ZSIsIldlYkdMVXRpbHMiLCJnZXRHTENvbnRleHQiLCJjYW52YXMiLCJjdHgiLCJuYW1lcyIsImkiLCJsZW5ndGgiLCJnZXRDb250ZXh0IiwiZSIsImFsZXJ0Iiwidmlld3BvcnRXaWR0aCIsIndpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJoZWlnaHQiLCJjcmVhdGVCdWZmZXIiLCJnbCIsImRhdGEiLCJpczJEIiwidHlwZV9kcmF3IiwiYnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsIkJVRkZFUl9EUkFXIiwiU1RBVElDIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiRFlOQU1JQyIsIkRZTkFNSUNfRFJBVyIsIlNUUkVBTSIsIlNUUkVBTV9EUkFXIiwiaXRlbVNpemUiLCJudW1JdGVtcyIsImNyZWF0ZUluZGV4QnVmZmVyIiwiaW5kZXhCdWZmZXIiLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsIlVpbnQxNkFycmF5IiwiY3JlYXRlVGV4dHVyZSIsInRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiTElORUFSIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTElORUFSX01JUE1BUF9ORUFSRVNUIiwiZ2VuZXJhdGVNaXBtYXAiLCJjcmVhdGVTaGFkZXIiLCJ0eXBlIiwic2hhZGVyU291cmNlIiwic2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiY29uc29sZSIsImxvZyIsImdldFNoYWRlckluZm9Mb2ciLCJjcmVhdGVQcm9ncmFtIiwic2hhZGVycyIsImZyYWdtZW50U2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwiZnJhZ21lbnQiLCJ2ZXJ0ZXhTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwidmVydGV4IiwicHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2VQcm9ncmFtIiwidXRpbHMiLCJzNCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwidXVpZCIsIm5hbWUiLCJpZCIsIm5vcm1hbGl6ZU5hTiIsInZlYyIsIm1hcCIsImEiLCJOdW1iZXIiLCJpc05hTiIsImxvYWQiLCJ1cmwiLCJjYWxsYmFjayIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVzcG9uc2VUZXh0Iiwic2VuZCIsImdldEV4dGVuc2lvbiIsInN0ciIsImVsZW1zIiwic3BsaXQiLCJub3dJbk1pbGxpc2Vjb25kcyIsIkRhdGUiLCJnZXRUaW1lIiwiZGVnVG9SYWQiLCJQSSIsImNhbGN1bGF0ZU5vcm1hbHMiLCJ2cyIsImluZCIsIngiLCJ5IiwieiIsIm5zIiwidjEiLCJ2MiIsIm5vcm1hbCIsImoiLCJubiIsImxlbiIsInNxcnQiLCJDQU1FUkFfVFlQRSIsIktldGNoIiwic2V0Q2FudmFzVG9Db250ZXh0Iiwia2V5IiwiY29udGV4dCIsInNldENvbnRleHQiLCJfdmlld3MiLCJzZXRQcm9ncmFtIiwiZ2V0UHJvZ3JhbSIsImNyZWF0ZVZpZXciLCJzZXRBdHRyaWJ1dGVMb2NhdGlvbnMiLCJhdHRyaWJzX25hbWVzIiwidmlldyIsInByZyIsImF0dHJpYnMiLCJyZWR1Y2UiLCJwcmV2IiwiYXR0ciIsImdldEF0dHJpYkxvY2F0aW9uIiwiZ2V0QXR0cmliIiwidmlld19rZXkiLCJhdHRyX2tleSIsImdldFVuaWZvcm0iLCJ1bmlmb3JtX2tleSIsInVuaWZvcm1zIiwic2V0VW5pZm9ybUxvY2F0aW9ucyIsInVuaWZvcm1fbmFtZXMiLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJlbmFibGVBdHRyaWIiLCJwb2ludGVyIiwiaW5kZXgiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJzaXplIiwiRkxPQVQiLCJub3JtYWxpemVkIiwic3RyaWRlIiwib2Zmc2V0IiwiZGlzYWJsZUF0dHJpYiIsImRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInJlbmRlckxvb3AiLCJjYiIsInNldEludGVydmFsIiwiYWRkVGV4dHVyZSIsInRleHR1cmVfaWQiLCJ0ZXh0dXJlcyIsInB1c2giLCJhY3RpdmVUZXh0dXJlIiwiaW5kZXhPZiIsIlRFWFRVUkUwIiwidVNhbXBsZXIiLCJ1bmlmb3JtMWkiLCJSZW5kZXJhYmxlIiwiZ3JhcGhfaWQiLCJfZ3JhcGhfaWQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJncmFwaElEIiwiRW50aXR5IiwiX3N1cGVyIiwiY2FsbCIsImJlZ2luRHJhdyIsIm1hdHJpeFN0YWNrIiwiZW5kRHJhdyIsIk1hdHJpeFN0YWNrIiwiX3N0YWNrIiwiX212TWF0cml4IiwibWF0NCIsIl9wTWF0cml4IiwiX25NYXRyaXgiLCJjb3B5Iiwic2V0IiwicG9wIiwiTW9kZWxWaWV3IiwiX2NhbWVyYSIsIm1vZGVsVmlldyIsImlkZW50aXR5IiwiY2FtZXJhIiwiUGVyc3BlY3RpdmUiLCJwZXJzcGVjdGl2ZSIsIk5vcm1hbCIsImludmVyc2UiLCJ0cmFuc3Bvc2UiLCJpbml0Iiwic2V0VXAiLCJtdk1hdHJpeCIsInVuaWZvcm1NYXRyaXg0ZnYiLCJwTWF0cml4Iiwibk1hdHJpeCIsIlJlc291cmNlcyIsIk1lc2hCdWZmZXJzIiwiX29ubG9hZCIsInNyYyIsIl90aGlzIiwic2VsZiIsImV4dCIsIm9iaiIsInBhcnNlT0JKIiwicGFyc2VKU09OIiwiY3JlYXRlQnVmZmVycyIsIkpTT04iLCJwYXJzZSIsInYiLCJ2biIsInZ0IiwiaXYiLCJpbiIsIml0IiwibGluZXMiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiaXRlbSIsInJlcGxhY2UiLCJjb25jYXQiLCJzbGljZSIsInRlbXBJbmRleCIsInBhcnNlSW50IiwiXyIsImRlZmF1bHRzIiwiX3ZibyIsIl9uYm8iLCJfdGJvIiwiX2l2Ym8iLCJfaW5ibyIsIl9pdGJvIiwiTWVzaFRleHR1cmUiLCJfaW1hZ2UiLCJJbWFnZSIsIl9vaWQiLCJmaWxlbmFtZSIsIm9ubG9hZCIsImxvYWRUZXh0dXJlSW1hZ2UiLCJfdGV4dHVyZSIsIk1lc2hNYXRlcmlhbCIsImFtYmllbnQiLCJkaWZmdXNlIiwic3BlY3VsYXIiLCJzaGluaW5lc3MiLCJfYW1iaWVudCIsInZlYzQiLCJfZGlmZnVzZSIsIl9zcGVjdWxhciIsIl9zaGluaW5lc3MiLCJ0ZW1wIiwiS2EiLCJLZCIsIktzIiwiTnMiLCJrZXlzIiwibGluZSIsIlNoYWRlcnMiLCJGcmFnbWVudCIsIk1haW4iLCJWZXJ0ZXgiLCJBbmltYXRpb25FbnRpdHkiLCJmcmVxdWVuY3kiLCJ0aW1lcyIsIl9mcmVxdWVuY3kiLCJfaW50ZXJ2YWxfaWQiLCJfY2FsbGJhY2siLCJvbkZyYW1lIiwiRWxhcHNlVGltZSIsInN0ZXBzIiwiQ291bnQiLCJfdGltZXMiLCJzdG9wIiwic3RhcnQiLCJfaW50aW1lIiwiY2xlYXJJbnRlcnZhbCIsIk1lc2hFbnRpdHkiLCJtZXNoZmlsZSIsIm1hdGVyaWFsZmlsZSIsInRleHR1cmVmaWxlIiwiX21hdGVyaWFsIiwiX2J1ZmZlcnMiLCJfbWVzaGZpbGUiLCJfbWF0ZXJpYWxmaWxlIiwiX3RleHR1cmVmaWxlIiwibG9hZEJ1ZmZlcnMiLCJsb2FkVGV4dHVyZSIsImxvYWRNYXRlcmlhbCIsImxvYWRNZXNoIiwiYXN5bmMiLCJ3YXRlcmZhbGwiLCJuZXh0IiwiZXJyIiwibG9hZE1lc2hCeU9iamVjdCIsImxvYWRNYXRlcmlhbEJ5T2JqZWN0Iiwic2V0V2lyZUZyYW1lIiwiaXNfd2lyZWZyYW1lIiwiY29sb3IiLCJfd2lyZWZyYW1lIiwiX3dpcmVmcmFtZUNvbG9yIiwiV2lyZUZyYW1lIiwidVdpcmVmcmFtZSIsInVXaXJlZnJhbWVDb2xvciIsInVuaWZvcm00ZnYiLCJzZXRNYXRlcmlhbFVuaWZvcm1zIiwidU1hdGVyaWFsQW1iaWVudCIsInVNYXRlcmlhbERpZmZ1c2UiLCJ1TWF0ZXJpYWxTcGVjdWxhciIsInVTaGluaW5lc3MiLCJ1bmlmb3JtMWYiLCJ2Ym8iLCJuYm8iLCJpdmJvIiwiZHJhd0VsZW1lbnRzIiwiVFJJQU5HTEVTIiwiVU5TSUdORURfU0hPUlQiLCJUcmFuc2Zvcm1FbnRpdHkiLCJwb3NpdGlvbiIsInJvdGF0aW9uIiwiX21hdHJpeCIsIl9wb3NpdGlvbiIsInZlYzMiLCJfc2l6ZSIsIl9yb3RhdGlvbiIsImFuZ2xlIiwiYXhpcyIsInNldE1hdHJpeCIsIm5ld19tYXRyaXgiLCJzZXRBYnNvbHV0ZVBvc2l0aW9uIiwidHJhbnNsYXRlIiwib3BlcmFuZDEiLCJvcGVyYW5kMiIsImFkZCIsInNldFNpemUiLCJzY2FsZSIsInNldFJvdGF0aW9uIiwic2V0QW5nbGUiLCJzZXRBeGlzIiwicm90YXRlQW5nbGUiLCJtb3ZlQXhpcyIsInJhZCIsInJvdGF0ZSIsIkxpZ2h0RW50aXR5IiwiZGlyZWN0aW9uIiwiY3V0b2ZmIiwiX2RpcmVjdGlvbiIsIl9jdXRvZmYiLCJ1TGlnaHRBbWJpZW50IiwidUxpZ2h0RGlmZnVzZSIsInVMaWdodFNwZWN1bGFyIiwidUxpZ2h0UG9zaXRpb24iLCJ1bmlmb3JtM2Z2IiwidURpcmVjdGlvbiIsIkNhbWVyYUVudGl0eSIsIl90eXBlIiwiT1JCSVRJTkciLCJfY21hdHJpeCIsIl91cCIsIl9yaWdodCIsIl9ub3JtYWwiLCJfYXppbXV0aCIsIl9lbGV2YXRpb24iLCJfc3RlcHMiLCJwb3MiLCJheiIsInRlbXBfYXoiLCJjaGFuZ2VBemltdXRoIiwiZWwiLCJ0ZW1wX2VsIiwiY2hhbmdlRWxldmF0aW9uIiwibiIsInN0ZXAiLCJub3JtYWxpemUiLCJuZXdfcG9zaXRpb24iLCJUUkFDS0lORyIsImNhbGN1bGF0ZU9yaWVudGF0aW9uIiwibSIsIm11bHRpcGx5VmVjNCIsInJvdGF0ZVkiLCJyb3RhdGVYIiwiTm9kZUVsZW1lbnQiLCJwYXJlbnQiLCJlbnRpdHkiLCJfcGFyZW50Tm9kZSIsImFkZENoaWxkTm9kZSIsIl9jaGlsZE5vZGVzIiwiX2VudGl0eSIsImNoaWxkIiwicmVtb3ZlQ2hpbGROb2RlIiwic3BsaWNlIiwiZ2V0Q2hpbGROb2RlQnlJbmRleCIsImV4aXN0c0NoaWxkTm9kZSIsImNyZWF0ZUNoaWxkTm9kZSIsImlzUm9vdCIsIm9pZCIsImZpbmRJbmRleCIsInMiLCJpbmRleEluUGFyZW50IiwiaGFzU2libGluZyIsIl9oYXZlIiwibmV4dFNpYmxpbmciLCJzaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIiwiZmlyc3RDaGlsZCIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkTm9kZXMiLCJkcmF3IiwiU2NlbmVHcmFwaCIsIl9zY2VuZSIsIl9tYXRyaXhTdGFjayIsIl9sb2FkZXJCdWZmZXIiLCJfaXNEcmF3aW5nIiwiRW52aXJvbm1lbnQiLCJlbmFibGUiLCJERVBUSF9URVNUIiwiZGVwdGhGdW5jIiwiTEVRVUFMIiwiQkxFTkQiLCJibGVuZEZ1bmMiLCJTUkNfQUxQSEEiLCJPTkVfTUlOVVNfU1JDX0FMUEhBIiwicGl4ZWxTdG9yZWkiLCJVTlBBQ0tfRkxJUF9ZX1dFQkdMIiwiY2xlYXJDb2xvciIsImNsZWFyRGVwdGgiLCJ2aWV3cG9ydCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJjcmVhdGVNYWluQ2hpbGROb2RlIiwicmVtb3ZlTWFpbkNoaWxkTm9kZSIsIm5vZGUiLCJQcm9ncmFtIiwiY3JlYXRlTWVzaCIsImNvbmZpZyIsIm1lc2hFbnRpdHkiLCJtZXNoIiwibWF0ZXJpYWwiLCJ3aXJlZnJhbWUiLCJpcyIsImNyZWF0ZU1lc2hCeUxvYWRlciIsImNyZWF0ZVRyYW5zZm9ybSIsImNyZWF0ZUxpZ2h0IiwiY3JlYXRlQ2FtZXJhIiwiTWFpbkNhbWVyYSIsInN0YXJ0TG9hZGVyIiwiZWFjaFNlcmllcyIsImNvbmZpZ3VyZSIsIkFUVFJJQlVURVMiLCJVTklGT1JNUyIsImNvbmZpZ3VyZVdpdGhMb2FkZXIiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFdBQWFDLE1BQVFBLEtBQUtELFdBQWMsU0FBVUUsRUFBR0MsR0FFckQsUUFBU0MsS0FBT0gsS0FBS0ksWUFBY0gsRUFEbkMsSUFBSyxHQUFJSSxLQUFLSCxHQUFPQSxFQUFFSSxlQUFlRCxLQUFJSixFQUFFSSxHQUFLSCxFQUFFRyxHQUVuREosR0FBRU0sVUFBa0IsT0FBTkwsRUFBYU0sT0FBT0MsT0FBT1AsSUFBTUMsRUFBR0ksVUFBWUwsRUFBRUssVUFBVyxHQUFJSixLQUUvRU8sT0FDSixTQUFXQSxHQUNQLEdBQUlDLElBQ0osU0FBV0EsR0FDUCxRQUFTQyxHQUFhQyxHQUdsQixJQUFLLEdBRkRDLEdBQU0sS0FDTkMsR0FBUyxRQUFTLHFCQUFzQixZQUFhLGFBQ2hEQyxFQUFJLEVBQUdBLEVBQUlELEVBQU1FLFNBQVVELEVBQUcsQ0FDbkMsSUFDSUYsRUFBTUQsRUFBT0ssV0FBV0gsRUFBTUMsSUFFbEMsTUFBT0csSUFDUCxHQUFJTCxFQUNBLE1BR1IsTUFBWSxRQUFSQSxHQUNBTSxNQUFNLDhCQUNDLE9BR1BOLEVBQUlPLGNBQWdCUixFQUFPUyxNQUMzQlIsRUFBSVMsZUFBaUJWLEVBQU9XLE9BQ3JCVixHQVVmLFFBQVNXLEdBQWFDLEVBQUlDLEVBQU1DLEVBQU1DLEdBQ2xDLEdBQUlDLEdBQVNKLEVBQUdELGNBRWhCLFFBREFDLEVBQUdLLFdBQVdMLEVBQUdNLGFBQWNGLEdBQ3ZCRCxHQUNKLElBQUtsQixHQUFXc0IsWUFBWUMsT0FDeEJSLEVBQUdTLFdBQVdULEVBQUdNLGFBQWMsR0FBSUksY0FBYVQsR0FBT0QsRUFBR1csWUFDMUQsTUFDSixLQUFLMUIsR0FBV3NCLFlBQVlLLFFBQ3hC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dWEsSUFBS3pXLElBRXRDdEQsT0FBT3FMLGVBQWV1UCxFQUFXN2EsVUFBVyxjQUN4Q3dNLElBQUssU0FBVU0sR0FDWHJOLEtBQUtzYixhQUFhbUMsV0FBYXBRLEdBRW5DdEIsWUFBWSxFQUNaQyxjQUFjLElBRWxCb1AsRUFBVzdhLFVBQVVtZCxZQUFjLFNBQVUzUyxHQUN6QytJLE1BQU02SixXQUFXM2QsS0FBS3ViLGNBQWUsU0FBVWhNLEVBQU15RSxHQUNqRHpFLEVBQUtzRSxTQUFTLFdBQ1Z6UCxRQUFRQyxJQUFJa0wsR0FDWnlFLE9BRUxqSixJQUVQcVEsRUFBVzdhLFVBQVVxZCxVQUFZLFdBQzdCLEdBQUl0UCxHQUFPdE8sSUFDWHNPLEdBQUttTixjQUNMbk4sRUFBS3VPLFVBQ0x0VSxFQUFNUyxzQkFBc0JzRixFQUFLa0MsS0FBTTRLLEVBQVd5QyxZQUNsRHRWLEVBQU13QixvQkFBb0J1RSxFQUFLa0MsS0FBTTRLLEVBQVcwQyxVQUNoRDlkLEtBQUtzYixhQUFhM04sUUFFdEJ5TixFQUFXN2EsVUFBVXdkLG9CQUFzQixTQUFVaFQsR0FDakQsR0FBSXVELEdBQU90TyxJQUNYc08sR0FBS3NQLFlBQ0x0UCxFQUFLb1AsWUFBWTNTLElBRXJCcVEsRUFBVzBDLFVBQ1AsV0FDQSxZQUNBLFdBQ0Esa0JBQ0EsZ0JBQ0EsbUJBQ0EsZ0JBQ0EsbUJBQ0EsaUJBQ0Esb0JBQ0EsYUFDQSxhQUNBLG1CQUVKMUMsRUFBV3lDLFlBQWMsYUFBYyxZQUNoQ3pDLEdBQ1QxUCxFQUNGaEwsR0FBTTBhLFdBQWFBLEdBQ3BCMWEsUUFBVUEiLCJmaWxlIjoiYmxhemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgQmxhemU7XHJcbihmdW5jdGlvbiAoQmxhemUpIHtcclxuICAgIHZhciBXZWJHTFV0aWxzO1xyXG4gICAgKGZ1bmN0aW9uIChXZWJHTFV0aWxzKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0R0xDb250ZXh0KGNhbnZhcykge1xyXG4gICAgICAgICAgICB2YXIgY3R4ID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIiwgXCJ3ZWJraXQtM2RcIiwgXCJtb3otd2ViZ2xcIl07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN0eCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdHggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGluaXRpYWxpc2UgV2ViR0xcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN0eC52aWV3cG9ydFdpZHRoID0gY2FudmFzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgY3R4LnZpZXdwb3J0SGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgV2ViR0xVdGlscy5nZXRHTENvbnRleHQgPSBnZXRHTENvbnRleHQ7XHJcbiAgICAgICAgKGZ1bmN0aW9uIChCVUZGRVJfRFJBVykge1xyXG4gICAgICAgICAgICBCVUZGRVJfRFJBV1tCVUZGRVJfRFJBV1tcIlNUQVRJQ1wiXSA9IDBdID0gXCJTVEFUSUNcIjtcclxuICAgICAgICAgICAgQlVGRkVSX0RSQVdbQlVGRkVSX0RSQVdbXCJTVFJFQU1cIl0gPSAxXSA9IFwiU1RSRUFNXCI7XHJcbiAgICAgICAgICAgIEJVRkZFUl9EUkFXW0JVRkZFUl9EUkFXW1wiRFlOQU1JQ1wiXSA9IDJdID0gXCJEWU5BTUlDXCI7XHJcbiAgICAgICAgfSkoV2ViR0xVdGlscy5CVUZGRVJfRFJBVyB8fCAoV2ViR0xVdGlscy5CVUZGRVJfRFJBVyA9IHt9KSk7XHJcbiAgICAgICAgdmFyIEJVRkZFUl9EUkFXID0gV2ViR0xVdGlscy5CVUZGRVJfRFJBVztcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVCdWZmZXIoZ2wsIGRhdGEsIGlzMkQsIHR5cGVfZHJhdykge1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVfZHJhdykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXZWJHTFV0aWxzLkJVRkZFUl9EUkFXLlNUQVRJQzpcclxuICAgICAgICAgICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXZWJHTFV0aWxzLkJVRkZFUl9EUkFXLkRZTkFNSUM6XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoZGF0YSksIGdsLkRZTkFNSUNfRFJBVyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdlYkdMVXRpbHMuQlVGRkVSX0RSQVcuU1RSRUFNOlxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KGRhdGEpLCBnbC5TVFJFQU1fRFJBVyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGlzMkQpIHtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlci5pdGVtU2l6ZSA9IDI7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIubnVtSXRlbXMgPSBkYXRhLmxlbmd0aCAvIDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIuaXRlbVNpemUgPSAzO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyLm51bUl0ZW1zID0gZGF0YS5sZW5ndGggLyAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFdlYkdMVXRpbHMuY3JlYXRlQnVmZmVyID0gY3JlYXRlQnVmZmVyO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUluZGV4QnVmZmVyKGdsLCBkYXRhLCB0eXBlX2RyYXcpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhCdWZmZXIpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVfZHJhdykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXZWJHTFV0aWxzLkJVRkZFUl9EUkFXLlNUQVRJQzpcclxuICAgICAgICAgICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDE2QXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2ViR0xVdGlscy5CVUZGRVJfRFJBVy5EWU5BTUlDOlxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBVaW50MTZBcnJheShkYXRhKSwgZ2wuRFlOQU1JQ19EUkFXKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2ViR0xVdGlscy5CVUZGRVJfRFJBVy5TVFJFQU06XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IFVpbnQxNkFycmF5KGRhdGEpLCBnbC5TVFJFQU1fRFJBVyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDE2QXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICAgICAgaW5kZXhCdWZmZXIuaXRlbVNpemUgPSAxO1xyXG4gICAgICAgICAgICBpbmRleEJ1ZmZlci5udW1JdGVtcyA9IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXhCdWZmZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFdlYkdMVXRpbHMuY3JlYXRlSW5kZXhCdWZmZXIgPSBjcmVhdGVJbmRleEJ1ZmZlcjtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUZXh0dXJlKGdsLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBkYXRhKTtcclxuICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XHJcbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVJfTUlQTUFQX05FQVJFU1QpO1xyXG4gICAgICAgICAgICBnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKTtcclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBXZWJHTFV0aWxzLmNyZWF0ZVRleHR1cmUgPSBjcmVhdGVUZXh0dXJlO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbCwgdHlwZSwgc2hhZGVyU291cmNlKSB7XHJcbiAgICAgICAgICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICAgICAgICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNoYWRlclNvdXJjZSk7XHJcbiAgICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuICAgICAgICAgICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBXZWJHTFV0aWxzLmNyZWF0ZVNoYWRlciA9IGNyZWF0ZVNoYWRlcjtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGdsLCBzaGFkZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBmcmFnbWVudFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBzaGFkZXJzLmZyYWdtZW50KTtcclxuICAgICAgICAgICAgdmFyIHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgc2hhZGVycy52ZXJ0ZXgpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgICAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgICAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgV2ViR0xVdGlscy5jcmVhdGVQcm9ncmFtID0gY3JlYXRlUHJvZ3JhbTtcclxuICAgIH0pKFdlYkdMVXRpbHMgPSBCbGF6ZS5XZWJHTFV0aWxzIHx8IChCbGF6ZS5XZWJHTFV0aWxzID0ge30pKTtcclxuICAgIHZhciB1dGlscztcclxuICAgIChmdW5jdGlvbiAodXRpbHMpIHtcclxuICAgICAgICBmdW5jdGlvbiBzNCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXHJcbiAgICAgICAgICAgICAgICAuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dGlscy5zNCA9IHM0O1xyXG4gICAgICAgIGZ1bmN0aW9uIHV1aWQobmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBzNCgpICsgczQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5hbWUgPyBuYW1lICsgaWQgOiBpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMudXVpZCA9IHV1aWQ7XHJcbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplTmFOKHZlYykge1xyXG4gICAgICAgICAgICByZXR1cm4gdmVjLm1hcChmdW5jdGlvbiAoYSkgeyBpZiAoTnVtYmVyLmlzTmFOKGEpKVxyXG4gICAgICAgICAgICAgICAgYSA9IDA7IHJldHVybiBhOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMubm9ybWFsaXplTmFOID0gbm9ybWFsaXplTmFOO1xyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWQodXJsLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dGlscy5sb2FkID0gbG9hZDtcclxuICAgICAgICBmdW5jdGlvbiBnZXRFeHRlbnNpb24oc3RyKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtcyA9IHN0ci5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtc1tlbGVtcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMuZ2V0RXh0ZW5zaW9uID0gZ2V0RXh0ZW5zaW9uO1xyXG4gICAgICAgIGZ1bmN0aW9uIG5vd0luTWlsbGlzZWNvbmRzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMubm93SW5NaWxsaXNlY29uZHMgPSBub3dJbk1pbGxpc2Vjb25kcztcclxuICAgICAgICBmdW5jdGlvbiBkZWdUb1JhZChkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMuZGVnVG9SYWQgPSBkZWdUb1JhZDtcclxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVOb3JtYWxzKHZzLCBpbmQpIHtcclxuICAgICAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgICAgICB2YXIgeSA9IDE7XHJcbiAgICAgICAgICAgIHZhciB6ID0gMjtcclxuICAgICAgICAgICAgdmFyIG5zID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG5zW2ldID0gMC4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kLmxlbmd0aDsgaSA9IGkgKyAzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdjEgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciB2MiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgLy9wMSAtIHAwXHJcbiAgICAgICAgICAgICAgICB2MVt4XSA9IHZzWzMgKiBpbmRbaSArIDFdICsgeF0gLSB2c1szICogaW5kW2ldICsgeF07XHJcbiAgICAgICAgICAgICAgICB2MVt5XSA9IHZzWzMgKiBpbmRbaSArIDFdICsgeV0gLSB2c1szICogaW5kW2ldICsgeV07XHJcbiAgICAgICAgICAgICAgICB2MVt6XSA9IHZzWzMgKiBpbmRbaSArIDFdICsgel0gLSB2c1szICogaW5kW2ldICsgel07XHJcbiAgICAgICAgICAgICAgICAvLyBwMCAtIHAxXHJcbiAgICAgICAgICAgICAgICB2Mlt4XSA9IHZzWzMgKiBpbmRbaSArIDJdICsgeF0gLSB2c1szICogaW5kW2kgKyAxXSArIHhdO1xyXG4gICAgICAgICAgICAgICAgdjJbeV0gPSB2c1szICogaW5kW2kgKyAyXSArIHldIC0gdnNbMyAqIGluZFtpICsgMV0gKyB5XTtcclxuICAgICAgICAgICAgICAgIHYyW3pdID0gdnNbMyAqIGluZFtpICsgMl0gKyB6XSAtIHZzWzMgKiBpbmRbaSArIDFdICsgel07XHJcbiAgICAgICAgICAgICAgICAvL3AyIC0gcDFcclxuICAgICAgICAgICAgICAgIC8vIHYxW3hdID0gdnNbMyppbmRbaSsyXSt4XSAtIHZzWzMqaW5kW2krMV0reF07XHJcbiAgICAgICAgICAgICAgICAvLyB2MVt5XSA9IHZzWzMqaW5kW2krMl0reV0gLSB2c1szKmluZFtpKzFdK3ldO1xyXG4gICAgICAgICAgICAgICAgLy8gdjFbel0gPSB2c1szKmluZFtpKzJdK3pdIC0gdnNbMyppbmRbaSsxXSt6XTtcclxuICAgICAgICAgICAgICAgIC8vIHAwIC0gcDFcclxuICAgICAgICAgICAgICAgIC8vIHYyW3hdID0gdnNbMyppbmRbaV0reF0gLSB2c1szKmluZFtpKzFdK3hdO1xyXG4gICAgICAgICAgICAgICAgLy8gdjJbeV0gPSB2c1szKmluZFtpXSt5XSAtIHZzWzMqaW5kW2krMV0reV07XHJcbiAgICAgICAgICAgICAgICAvLyB2Mlt6XSA9IHZzWzMqaW5kW2ldK3pdIC0gdnNbMyppbmRbaSsxXSt6XTtcclxuICAgICAgICAgICAgICAgIC8vY3Jvc3MgcHJvZHVjdCBieSBTYXJydXMgUnVsZVxyXG4gICAgICAgICAgICAgICAgbm9ybWFsW3hdID0gdjFbeV0gKiB2Mlt6XSAtIHYxW3pdICogdjJbeV07XHJcbiAgICAgICAgICAgICAgICBub3JtYWxbeV0gPSB2MVt6XSAqIHYyW3hdIC0gdjFbeF0gKiB2Mlt6XTtcclxuICAgICAgICAgICAgICAgIG5vcm1hbFt6XSA9IHYxW3hdICogdjJbeV0gLSB2MVt5XSAqIHYyW3hdO1xyXG4gICAgICAgICAgICAgICAgLy8gbnNbMyppbmRbaV0reF0gKz0gbm9ybWFsW3hdO1xyXG4gICAgICAgICAgICAgICAgLy8gbnNbMyppbmRbaV0reV0gKz0gbm9ybWFsW3ldO1xyXG4gICAgICAgICAgICAgICAgLy8gbnNbMyppbmRbaV0rel0gKz0gbm9ybWFsW3pdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBuc1szICogaW5kW2kgKyBqXSArIHhdID0gbnNbMyAqIGluZFtpICsgal0gKyB4XSArIG5vcm1hbFt4XTtcclxuICAgICAgICAgICAgICAgICAgICBuc1szICogaW5kW2kgKyBqXSArIHldID0gbnNbMyAqIGluZFtpICsgal0gKyB5XSArIG5vcm1hbFt5XTtcclxuICAgICAgICAgICAgICAgICAgICBuc1szICogaW5kW2kgKyBqXSArIHpdID0gbnNbMyAqIGluZFtpICsgal0gKyB6XSArIG5vcm1hbFt6XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL25vcm1hbGl6ZSB0aGUgcmVzdWx0XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdnMubGVuZ3RoOyBpID0gaSArIDMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBubiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbm5beF0gPSBuc1tpICsgeF07XHJcbiAgICAgICAgICAgICAgICBublt5XSA9IG5zW2kgKyB5XTtcclxuICAgICAgICAgICAgICAgIG5uW3pdID0gbnNbaSArIHpdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IE1hdGguc3FydCgobm5beF0gKiBublt4XSkgKyAobm5beV0gKiBublt5XSkgKyAobm5bel0gKiBublt6XSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IDAuMDAwMDE7XHJcbiAgICAgICAgICAgICAgICBublt4XSA9IG5uW3hdIC8gbGVuO1xyXG4gICAgICAgICAgICAgICAgbm5beV0gPSBublt5XSAvIGxlbjtcclxuICAgICAgICAgICAgICAgIG5uW3pdID0gbm5bel0gLyBsZW47XHJcbiAgICAgICAgICAgICAgICBuc1tpICsgeF0gPSBublt4XTtcclxuICAgICAgICAgICAgICAgIG5zW2kgKyB5XSA9IG5uW3ldO1xyXG4gICAgICAgICAgICAgICAgbnNbaSArIHpdID0gbm5bel07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5zO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dGlscy5jYWxjdWxhdGVOb3JtYWxzID0gY2FsY3VsYXRlTm9ybWFscztcclxuICAgIH0pKHV0aWxzID0gQmxhemUudXRpbHMgfHwgKEJsYXplLnV0aWxzID0ge30pKTtcclxuICAgIChmdW5jdGlvbiAoQ0FNRVJBX1RZUEUpIHtcclxuICAgICAgICBDQU1FUkFfVFlQRVtDQU1FUkFfVFlQRVtcIk9SQklUSU5HXCJdID0gMF0gPSBcIk9SQklUSU5HXCI7XHJcbiAgICAgICAgQ0FNRVJBX1RZUEVbQ0FNRVJBX1RZUEVbXCJUUkFDS0lOR1wiXSA9IDFdID0gXCJUUkFDS0lOR1wiO1xyXG4gICAgfSkoQmxhemUuQ0FNRVJBX1RZUEUgfHwgKEJsYXplLkNBTUVSQV9UWVBFID0ge30pKTtcclxuICAgIHZhciBDQU1FUkFfVFlQRSA9IEJsYXplLkNBTUVSQV9UWVBFO1xyXG4gICAgdmFyIEtldGNoID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBLZXRjaCgpIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgS2V0Y2guc2V0Q2FudmFzVG9Db250ZXh0ID0gZnVuY3Rpb24gKGtleSwgY2FudmFzKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gV2ViR0xVdGlscy5nZXRHTENvbnRleHQoY2FudmFzKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0Q29udGV4dChrZXksIGNvbnRleHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChrZXksIGNvbnRleHQpIHtcclxuICAgICAgICAgICAgS2V0Y2guX3ZpZXdzW2tleV0uY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guX3ZpZXdzW2tleV0uY29udGV4dDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmNyZWF0ZVByb2dyYW0gPSBmdW5jdGlvbiAoa2V5LCBzaGFkZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IEtldGNoLmdldENvbnRleHQoa2V5KTtcclxuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSBXZWJHTFV0aWxzLmNyZWF0ZVByb2dyYW0oZ2wsIHNoYWRlcnMpO1xyXG4gICAgICAgICAgICBLZXRjaC5zZXRQcm9ncmFtKGtleSwgcHJvZ3JhbSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5zZXRQcm9ncmFtID0gZnVuY3Rpb24gKGtleSwgcHJvZ3JhbSkge1xyXG4gICAgICAgICAgICBLZXRjaC5fdmlld3Nba2V5XS5wcm9ncmFtID0gcHJvZ3JhbTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmdldFByb2dyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZXRjaC5fdmlld3Nba2V5XS5wcm9ncmFtO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guY3JlYXRlVmlldyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgS2V0Y2guX3ZpZXdzW2tleV0gPSB7fTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLnNldEF0dHJpYnV0ZUxvY2F0aW9ucyA9IGZ1bmN0aW9uIChrZXksIGF0dHJpYnNfbmFtZXMpIHtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBLZXRjaC5fdmlld3Nba2V5XTtcclxuICAgICAgICAgICAgdmFyIGdsID0gdmlldy5jb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgcHJnID0gdmlldy5wcm9ncmFtO1xyXG4gICAgICAgICAgICB2aWV3LmF0dHJpYnMgPSBhdHRyaWJzX25hbWVzLnJlZHVjZShmdW5jdGlvbiAocHJldiwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgcHJldlthdHRyXSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByZywgYXR0cik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guZ2V0QXR0cmliID0gZnVuY3Rpb24gKHZpZXdfa2V5LCBhdHRyX2tleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guX3ZpZXdzW3ZpZXdfa2V5XS5hdHRyaWJzW2F0dHJfa2V5XTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmdldFVuaWZvcm0gPSBmdW5jdGlvbiAodmlld19rZXksIHVuaWZvcm1fa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZXRjaC5fdmlld3Nbdmlld19rZXldLnVuaWZvcm1zW3VuaWZvcm1fa2V5XTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLnNldFVuaWZvcm1Mb2NhdGlvbnMgPSBmdW5jdGlvbiAoa2V5LCB1bmlmb3JtX25hbWVzKSB7XHJcbiAgICAgICAgICAgIHZhciB2aWV3ID0gS2V0Y2guX3ZpZXdzW2tleV07XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHZpZXcuY29udGV4dDtcclxuICAgICAgICAgICAgdmFyIHByZyA9IHZpZXcucHJvZ3JhbTtcclxuICAgICAgICAgICAgdmlldy51bmlmb3JtcyA9IHVuaWZvcm1fbmFtZXMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2W2F0dHJdID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZywgYXR0cik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guZW5hYmxlQXR0cmliID0gZnVuY3Rpb24gKHZpZXdfa2V5LCBhdHRyX2tleSwgcG9pbnRlcikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBLZXRjaC5nZXRBdHRyaWIodmlld19rZXksIGF0dHJfa2V5KTtcclxuICAgICAgICAgICAgdmFyIGdsID0gS2V0Y2guZ2V0Q29udGV4dCh2aWV3X2tleSk7XHJcbiAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoaW5kZXgsIHBvaW50ZXIuc2l6ZSB8fCAzLCBnbC5GTE9BVCwgcG9pbnRlci5ub3JtYWxpemVkIHx8IGZhbHNlLCBwb2ludGVyLnN0cmlkZSB8fCAwLCBwb2ludGVyLm9mZnNldCB8fCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoaW5kZXgsIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmRpc2FibGVBdHRyaWIgPSBmdW5jdGlvbiAodmlld19rZXksIGF0dHJfa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IEtldGNoLmdldEF0dHJpYih2aWV3X2tleSwgYXR0cl9rZXkpO1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSBLZXRjaC5nZXRDb250ZXh0KHZpZXdfa2V5KTtcclxuICAgICAgICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLnJlbmRlckxvb3AgPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoY2IsIDUwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5hZGRUZXh0dXJlID0gZnVuY3Rpb24gKGtleSwgdGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IEtldGNoLl92aWV3c1trZXldO1xyXG4gICAgICAgICAgICB2aWV3LnRleHR1cmVzID0gdmlldy50ZXh0dXJlcyB8fCBbXTtcclxuICAgICAgICAgICAgdmlldy50ZXh0dXJlcy5wdXNoKHRleHR1cmVfaWQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guYWN0aXZlVGV4dHVyZSA9IGZ1bmN0aW9uIChrZXksIHRleHR1cmVfaWQsIHRleHR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBLZXRjaC5fdmlld3Nba2V5XTtcclxuICAgICAgICAgICAgdmFyIGdsID0gdmlldy5jb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgcHJnID0gdmlldy5wcm9ncmFtO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB2aWV3LnRleHR1cmVzLmluZGV4T2YodGV4dHVyZV9pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGluZGV4ID09PSAwID8gZ2wuVEVYVFVSRTAgOiBnbC5URVhUVVJFMCArIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVTYW1wbGVyID0gS2V0Y2guZ2V0VW5pZm9ybShrZXksIFwidVNhbXBsZXJcIik7XHJcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWkodVNhbXBsZXIsIGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guX3ZpZXdzID0ge307XHJcbiAgICAgICAgcmV0dXJuIEtldGNoO1xyXG4gICAgfSgpKTtcclxuICAgIEJsYXplLktldGNoID0gS2V0Y2g7XHJcbiAgICB2YXIgUmVuZGVyYWJsZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyYWJsZShncmFwaF9pZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFwaF9pZCA9IGdyYXBoX2lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVuZGVyYWJsZS5wcm90b3R5cGUsIFwiZ3JhcGhJRFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyYXBoX2lkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVuZGVyYWJsZS5wcm90b3R5cGUsIFwiZ2xcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBLZXRjaC5nZXRDb250ZXh0KHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZW5kZXJhYmxlLnByb3RvdHlwZSwgXCJwcm9ncmFtXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gS2V0Y2guZ2V0UHJvZ3JhbSh0aGlzLmdyYXBoSUQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBSZW5kZXJhYmxlLnByb3RvdHlwZS5nZXRVbmlmb3JtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guZ2V0VW5pZm9ybSh0aGlzLmdyYXBoSUQsIGtleSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUmVuZGVyYWJsZTtcclxuICAgIH0oKSk7XHJcbiAgICBCbGF6ZS5SZW5kZXJhYmxlID0gUmVuZGVyYWJsZTtcclxuICAgIHZhciBFbnRpdHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhFbnRpdHksIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gRW50aXR5KGdyYXBoX2lkKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAobWF0cml4U3RhY2spIHtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uIChtYXRyaXhTdGFjaykge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIEVudGl0eTtcclxuICAgIH0oUmVuZGVyYWJsZSkpO1xyXG4gICAgQmxhemUuRW50aXR5ID0gRW50aXR5O1xyXG4gICAgdmFyIE1hdHJpeFN0YWNrID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICBfX2V4dGVuZHMoTWF0cml4U3RhY2ssIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gTWF0cml4U3RhY2soZ3JhcGhfaWQpIHtcclxuICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFjayA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLl9tdk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BNYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9uTWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3B5ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgbWF0NC5zZXQodGhpcy5fbXZNYXRyaXgsIGNvcHkpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFjay5wdXNoKGNvcHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YWNrLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJpbnZhbGlkIHBvcE1hdHJpeFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9tdk1hdHJpeCA9IHRoaXMuX3N0YWNrLnBvcCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLk1vZGVsVmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXZNYXRyaXggPSB0aGlzLl9jYW1lcmEubW9kZWxWaWV3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLl9tdk1hdHJpeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXhTdGFjay5wcm90b3R5cGUsIFwibXZNYXRyaXhcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tdk1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJwTWF0cml4XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcE1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJuTWF0cml4XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbk1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJNYWluQ2FtZXJhXCIsIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE1hdHJpeFN0YWNrLnByb3RvdHlwZS5QZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLl9wTWF0cml4KTtcclxuICAgICAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZSg0NSwgZ2wudmlld3BvcnRXaWR0aCAvIGdsLnZpZXdwb3J0SGVpZ2h0LCAwLjEsIDEwMDAuMCwgdGhpcy5fcE1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNYXRyaXhTdGFjay5wcm90b3R5cGUuTm9ybWFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KHRoaXMuX25NYXRyaXgpO1xyXG4gICAgICAgICAgICBtYXQ0LnNldCh0aGlzLl9tdk1hdHJpeCwgdGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgICAgIG1hdDQuaW52ZXJzZSh0aGlzLl9uTWF0cml4KTtcclxuICAgICAgICAgICAgbWF0NC50cmFuc3Bvc2UodGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNYXRyaXhTdGFjay5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5Nb2RlbFZpZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5QZXJzcGVjdGl2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLk5vcm1hbCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnNldFVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB0aGlzLk5vcm1hbCgpO1xyXG4gICAgICAgICAgICB2YXIgbXZNYXRyaXggPSB0aGlzLmdldFVuaWZvcm0oXCJ1TVZNYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChtdk1hdHJpeClcclxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobXZNYXRyaXgsIGZhbHNlLCB0aGlzLl9tdk1hdHJpeCk7XHJcbiAgICAgICAgICAgIHZhciBwTWF0cml4ID0gdGhpcy5nZXRVbmlmb3JtKFwidVBNYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChwTWF0cml4KVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihwTWF0cml4LCBmYWxzZSwgdGhpcy5fcE1hdHJpeCk7XHJcbiAgICAgICAgICAgIHZhciBuTWF0cml4ID0gdGhpcy5nZXRVbmlmb3JtKFwidU5NYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChuTWF0cml4KVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihuTWF0cml4LCBmYWxzZSwgdGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gTWF0cml4U3RhY2s7XHJcbiAgICB9KFJlbmRlcmFibGUpKTtcclxuICAgIEJsYXplLk1hdHJpeFN0YWNrID0gTWF0cml4U3RhY2s7XHJcbiAgICB2YXIgUmVzb3VyY2VzO1xyXG4gICAgKGZ1bmN0aW9uIChSZXNvdXJjZXMpIHtcclxuICAgICAgICB2YXIgTWVzaEJ1ZmZlcnMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgICAgICBfX2V4dGVuZHMoTWVzaEJ1ZmZlcnMsIF9zdXBlcik7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIE1lc2hCdWZmZXJzKGdyYXBoX2lkKSB7XHJcbiAgICAgICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJvbmxvYWRcIiwge1xyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbmxvYWQgPSBjYjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcInNyY1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ID0gdXRpbHMuZ2V0RXh0ZW5zaW9uKHNyYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMubG9hZChzcmMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2JqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5wYXJzZU9CSihkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5wYXJzZUpTT04oZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVCdWZmZXJzKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fb25sb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29ubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE1lc2hCdWZmZXJzLnByb3RvdHlwZS5wYXJzZUpTT04gPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1lc2hCdWZmZXJzLnByb3RvdHlwZS5wYXJzZU9CSiA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZuOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB2dDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpdDogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZXMgPSBkYXRhLnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZlcnRleCA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhWzBdID09PSAndic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhWzBdID09PSAnZic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZlcnRleC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1zID0gaXRlbS5yZXBsYWNlKFwiXFxyXCIsIFwiXCIpLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZWxlbXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5jb25jYXQoZWxlbXMuc2xpY2UoMSkuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICE9PSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBJbmRleCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaW5kZXguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IGl0ZW0ucmVwbGFjZShcIlxcclwiLCBcIlwiKS5yZXBsYWNlKFwiZlwiLCBcIlwiKS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEluZGV4ID0gdGVtcEluZGV4LmNvbmNhdChlbGVtcy5zbGljZSgxKS5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgIT09IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wSW5kZXguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IGl0ZW0uc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdi5wdXNoKHBhcnNlSW50KGVsZW1zWzBdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pbi5wdXNoKHBhcnNlSW50KGVsZW1zWzFdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdC5wdXNoKHBhcnNlSW50KGVsZW1zWzJdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNoQnVmZmVycy5wcm90b3R5cGUuY3JlYXRlQnVmZmVycyA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgICAgICBfLmRlZmF1bHRzKG9iaiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZuOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB2dDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpdDogW11cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2ViR0xVdGlscy5jcmVhdGVCdWZmZXIoZ2wsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai52Lmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmJvID0gY3JlYXRlQnVmZmVyKG9iai52KTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoudi5sZW5ndGggPiAwICYmIG9iai5pdi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmJvID0gY3JlYXRlQnVmZmVyKHV0aWxzLmNhbGN1bGF0ZU5vcm1hbHMob2JqLnYsIG9iai5pdikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai52dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGJvID0gV2ViR0xVdGlscy5jcmVhdGVCdWZmZXIoZ2wsIG9iai52dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbmRleEJ1ZmZlcihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdlYkdMVXRpbHMuY3JlYXRlSW5kZXhCdWZmZXIoZ2wsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pdi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l2Ym8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaXYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pbi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luYm8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pdC5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0Ym8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaXQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcInZib1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmJvO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoQnVmZmVycy5wcm90b3R5cGUsIFwibmJvXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9uYm87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJ0Ym9cIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RibztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcIml2Ym9cIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l2Ym87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJpbmJvXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmJvO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoQnVmZmVycy5wcm90b3R5cGUsIFwiaXRib1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXRibztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gTWVzaEJ1ZmZlcnM7XHJcbiAgICAgICAgfShSZW5kZXJhYmxlKSk7XHJcbiAgICAgICAgUmVzb3VyY2VzLk1lc2hCdWZmZXJzID0gTWVzaEJ1ZmZlcnM7XHJcbiAgICAgICAgdmFyIE1lc2hUZXh0dXJlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICAgICAgX19leHRlbmRzKE1lc2hUZXh0dXJlLCBfc3VwZXIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBNZXNoVGV4dHVyZShncmFwaF9pZCkge1xyXG4gICAgICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29pZCA9IHV0aWxzLnV1aWQodGhpcy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaFRleHR1cmUucHJvdG90eXBlLCBcIm9ubG9hZFwiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29ubG9hZCA9IGNiO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoVGV4dHVyZS5wcm90b3R5cGUsIFwic3JjXCIsIHtcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGZpbGVuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW1hZ2Uub25sb2FkID0gdGhpcy5sb2FkVGV4dHVyZUltYWdlKHRoaXMuX29ubG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gZmlsZW5hbWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgTWVzaFRleHR1cmUucHJvdG90eXBlLmxvYWRUZXh0dXJlSW1hZ2UgPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl90ZXh0dXJlID0gV2ViR0xVdGlscy5jcmVhdGVUZXh0dXJlKHNlbGYuZ2wsIHNlbGYuX2ltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBLZXRjaC5hZGRUZXh0dXJlKHNlbGYuZ3JhcGhJRCwgc2VsZi5fb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaFRleHR1cmUucHJvdG90eXBlLCBcImNvbnRlbnRcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIE1lc2hUZXh0dXJlO1xyXG4gICAgICAgIH0oUmVuZGVyYWJsZSkpO1xyXG4gICAgICAgIFJlc291cmNlcy5NZXNoVGV4dHVyZSA9IE1lc2hUZXh0dXJlO1xyXG4gICAgICAgIHZhciBNZXNoTWF0ZXJpYWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgICAgICBfX2V4dGVuZHMoTWVzaE1hdGVyaWFsLCBfc3VwZXIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBNZXNoTWF0ZXJpYWwoZ3JhcGhfaWQsIGFtYmllbnQsIGRpZmZ1c2UsIHNwZWN1bGFyLCBzaGluaW5lc3MpIHtcclxuICAgICAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FtYmllbnQgPSBhbWJpZW50ID8gdmVjNC5jcmVhdGUoYW1iaWVudCkgOiB2ZWM0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlmZnVzZSA9IGRpZmZ1c2UgPyB2ZWM0LmNyZWF0ZShkaWZmdXNlKSA6IHZlYzQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zcGVjdWxhciA9IHNwZWN1bGFyID8gdmVjNC5jcmVhdGUoc3BlY3VsYXIpIDogdmVjNC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NoaW5pbmVzcyA9IHNoaW5pbmVzcyB8fCAyMDAuMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaE1hdGVyaWFsLnByb3RvdHlwZSwgXCJvbmxvYWRcIiwge1xyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbmxvYWQgPSBjYjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaE1hdGVyaWFsLnByb3RvdHlwZSwgXCJzcmNcIiwge1xyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoc3JjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMubG9hZChzcmMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc2VsZi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2FtYmllbnQgPSB0ZW1wLkthO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZGlmZnVzZSA9IHRlbXAuS2Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9zcGVjdWxhciA9IHRlbXAuS3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNoaW5pbmVzcyA9IHRlbXAuTnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fb25sb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29ubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE1lc2hNYXRlcmlhbC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBbXCJLYVwiLCBcIktkXCIsIFwiS3NcIiwgXCJOc1wiXTtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IGRhdGEuc3BsaXQoXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1zID0gbGluZS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGVsZW1zWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTnNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbXCJOc1wiXSA9IE51bWJlcihlbGVtc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBlbGVtcy5zbGljZSgxKS5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIE51bWJlcihhKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5wdXNoKDEuMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaE1hdGVyaWFsLnByb3RvdHlwZSwgXCJhbWJpZW50XCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbWJpZW50O1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGFtYmllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbWJpZW50ID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKGFtYmllbnQpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaE1hdGVyaWFsLnByb3RvdHlwZSwgXCJkaWZmdXNlXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaWZmdXNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRpZmZ1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWZmdXNlID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKGRpZmZ1c2UpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaE1hdGVyaWFsLnByb3RvdHlwZSwgXCJzcGVjdWxhclwiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3BlY3VsYXI7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoc3BlY3VsYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zcGVjdWxhciA9IHV0aWxzLm5vcm1hbGl6ZU5hTih2ZWM0LmNyZWF0ZShzcGVjdWxhcikpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcInNoaW5pbmVzc1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2hpbmluZXNzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaGluaW5lc3MgPSB2O1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBNZXNoTWF0ZXJpYWw7XHJcbiAgICAgICAgfShSZW5kZXJhYmxlKSk7XHJcbiAgICAgICAgUmVzb3VyY2VzLk1lc2hNYXRlcmlhbCA9IE1lc2hNYXRlcmlhbDtcclxuICAgIH0pKFJlc291cmNlcyA9IEJsYXplLlJlc291cmNlcyB8fCAoQmxhemUuUmVzb3VyY2VzID0ge30pKTtcclxuICAgIHZhciBTaGFkZXJzO1xyXG4gICAgKGZ1bmN0aW9uIChTaGFkZXJzKSB7XHJcbiAgICAgICAgdmFyIEZyYWdtZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gRnJhZ21lbnQoKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRnJhZ21lbnQuTWFpbiA9IFwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCB1U2hpbmluZXNzO1xcbnVuaWZvcm0gdmVjMyB1TGlnaHREaXJlY3Rpb247XFxuXFxudW5pZm9ybSB2ZWM0IHVMaWdodEFtYmllbnQ7XFxudW5pZm9ybSB2ZWM0IHVMaWdodERpZmZ1c2U7XFxudW5pZm9ybSB2ZWM0IHVMaWdodFNwZWN1bGFyO1xcblxcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxBbWJpZW50O1xcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxEaWZmdXNlO1xcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxTcGVjdWxhcjtcXG5cXG5cXG51bmlmb3JtIGJvb2wgdVdpcmVmcmFtZTtcXG51bmlmb3JtIHZlYzQgdVdpcmVmcmFtZUNvbG9yO1xcblxcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2RXllVmVjO1xcblxcbnZvaWQgbWFpbigpe1xcblxcbmlmKHVXaXJlZnJhbWUpe1xcbiAgICAgICAgICBnbF9GcmFnQ29sb3IgPXVXaXJlZnJhbWVDb2xvcjtcXG4gICAgICAgIFxcbiAgICAgICAgfWVsc2V7XFxuICAgICAgICB2ZWMzIEw9IG5vcm1hbGl6ZSh1TGlnaHREaXJlY3Rpb24pO1xcbiAgICAgICAgdmVjMyBOPSBub3JtYWxpemUodk5vcm1hbCk7XFxuICAgICAgICBmbG9hdCBsYW1iZXJ0VGVybT1kb3QoTiwgLUwpO1xcbiAgICAgICAgXFxuICAgICAgICB2ZWM0IElhPSB1TGlnaHRBbWJpZW50KnVNYXRlcmlhbEFtYmllbnQ7XFxuICAgICAgICBcXG4gICAgICAgIHZlYzQgSWQ9dmVjNCgwLjAsMC4wLDAuMCwxLjApO1xcbiAgICAgICAgXFxuICAgICAgICB2ZWM0IElzPXZlYzQoMC4wLDAuMCwwLjAsMS4wKTtcXG4gICAgICAgIFxcbiAgICAgICAgaWYobGFtYmVydFRlcm0+MC4wKVxcbiAgICAgICAge1xcbiAgICAgICAgICAgIElkPXVMaWdodERpZmZ1c2UqdU1hdGVyaWFsRGlmZnVzZSpsYW1iZXJ0VGVybTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICB2ZWMzIEU9IG5vcm1hbGl6ZSh2RXllVmVjKTtcXG4gICAgICAgICAgICB2ZWMzIFI9IHJlZmxlY3QoTCwgTik7XFxuICAgICAgICAgICAgZmxvYXQgc3BlY3VsYXI9cG93KG1heChkb3QoUixFKSwwLjApLCB1U2hpbmluZXNzKTtcXG4gICAgICAgICAgICBJcz11TGlnaHRTcGVjdWxhcip1TWF0ZXJpYWxTcGVjdWxhcipzcGVjdWxhcjtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgdmVjNCBmaW5hbENvbG9yPUlhK0lkK0lzO1xcbiAgICAgICAgZmluYWxDb2xvci5hPTEuMDtcXG4gICAgXFxuICAgICAgICBnbF9GcmFnQ29sb3IgPWZpbmFsQ29sb3I7XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG5cXG5cIjtcclxuICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50O1xyXG4gICAgICAgIH0oKSk7XHJcbiAgICAgICAgU2hhZGVycy5GcmFnbWVudCA9IEZyYWdtZW50O1xyXG4gICAgICAgIHZhciBWZXJ0ZXggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBWZXJ0ZXgoKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVmVydGV4Lk1haW4gPSBcImF0dHJpYnV0ZSB2ZWMzIGFfcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzMgYV9ub3JtYWw7XFxuXFxudW5pZm9ybSBtYXQ0IHVNVk1hdHJpeDtcXG51bmlmb3JtIG1hdDQgdVBNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHVOTWF0cml4O1xcblxcbnVuaWZvcm0gYm9vbCB1V2lyZWZyYW1lO1xcblxcbnZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2RXllVmVjO1xcblxcbnZvaWQgbWFpbigpe1xcblxcbiAgICB2ZWM0IHZlcnRleCA9IHVNVk1hdHJpeCAqIHZlYzQoYV9wb3NpdGlvbiwgMS4wKTtcXG4gICAgICBpZiAoIXVXaXJlZnJhbWUpIHtcXG4gICB2Tm9ybWFsID0gdmVjMyh1Tk1hdHJpeCAqIHZlYzQoYV9ub3JtYWwsIDEuMCkpO1xcbiAgIHZFeWVWZWM9LXZlYzModmVydGV4Lnh5eik7ICAgXFxuICAgfVxcbiAgZ2xfUG9zaXRpb24gPXVQTWF0cml4ICogdmVydGV4O1xcblxcbn1cXG5cXG5cXG5cIjtcclxuICAgICAgICAgICAgcmV0dXJuIFZlcnRleDtcclxuICAgICAgICB9KCkpO1xyXG4gICAgICAgIFNoYWRlcnMuVmVydGV4ID0gVmVydGV4O1xyXG4gICAgfSkoU2hhZGVycyA9IEJsYXplLlNoYWRlcnMgfHwgKEJsYXplLlNoYWRlcnMgPSB7fSkpO1xyXG4gICAgdmFyIEFuaW1hdGlvbkVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKEFuaW1hdGlvbkVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBBbmltYXRpb25FbnRpdHkoZ3JhcGhfaWQsIGZyZXF1ZW5jeSwgdGltZXMsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgdGhpcy5fZnJlcXVlbmN5ID0gZnJlcXVlbmN5O1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbF9pZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFuaW1hdGlvbkVudGl0eS5wcm90b3R5cGUub25GcmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgQW5pbWF0aW9uRW50aXR5LkVsYXBzZVRpbWUgPSB1dGlscy5ub3dJbk1pbGxpc2Vjb25kcygpO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uRW50aXR5LkVsYXBzZVRpbWUgPCA1KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgc3RlcHMgPSBNYXRoLmZsb29yKEFuaW1hdGlvbkVudGl0eS5FbGFwc2VUaW1lIC8gdGhpcy5fZnJlcXVlbmN5KTtcclxuICAgICAgICAgICAgd2hpbGUgKChzdGVwcyA+IDApICYmIChBbmltYXRpb25FbnRpdHkuQ291bnQgIT0gdGhpcy5fdGltZXMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgc3RlcHMtLTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbkVudGl0eS5Db3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChBbmltYXRpb25FbnRpdHkuQ291bnQgPT09IHRoaXMuX3RpbWVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5faW50aW1lID0gdXRpbHMubm93SW5NaWxsaXNlY29uZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxfaWQgPSBzZXRJbnRlcnZhbCh0aGlzLm9uRnJhbWUsIHRoaXMuX2ZyZXF1ZW5jeSAvIDEwMDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faW50ZXJ2YWxfaWQpXHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsX2lkKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEFuaW1hdGlvbkVudGl0eS5wcm90b3R5cGUuYmVnaW5EcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LnByb3RvdHlwZS5lbmREcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LkNvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gQW5pbWF0aW9uRW50aXR5O1xyXG4gICAgfShFbnRpdHkpKTtcclxuICAgIEJsYXplLkFuaW1hdGlvbkVudGl0eSA9IEFuaW1hdGlvbkVudGl0eTtcclxuICAgIHZhciBNZXNoRW50aXR5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICBfX2V4dGVuZHMoTWVzaEVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBNZXNoRW50aXR5KGdyYXBoX2lkLCBtZXNoZmlsZSwgbWF0ZXJpYWxmaWxlLCB0ZXh0dXJlZmlsZSkge1xyXG4gICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9tZXNoZmlsZSA9IG1lc2hmaWxlIHx8IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsZmlsZSA9IG1hdGVyaWFsZmlsZSB8fCBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlZmlsZSA9IHRleHR1cmVmaWxlIHx8IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLmxvYWRCdWZmZXJzID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBjYikge1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJzID0gbmV3IFJlc291cmNlcy5NZXNoQnVmZmVycyh0aGlzLmdyYXBoSUQpO1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJzLm9ubG9hZCA9IGNiO1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJzLnNyYyA9IGZpbGVuYW1lO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUubG9hZFRleHR1cmUgPSBmdW5jdGlvbiAoZmlsZW5hbWUsIGNiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmUgPSBuZXcgUmVzb3VyY2VzLk1lc2hUZXh0dXJlKHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmUub25sb2FkID0gY2I7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmUuc3JjID0gZmlsZW5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEVudGl0eS5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwge1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbCA9IHY7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLmxvYWRNYXRlcmlhbCA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgY2IpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBuZXcgUmVzb3VyY2VzLk1lc2hNYXRlcmlhbCh0aGlzLmdyYXBoSUQpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5vbmxvYWQgPSBjYjtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc3JjID0gZmlsZW5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNoRW50aXR5LnByb3RvdHlwZS5sb2FkTWVzaCA9IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIGFzeW5jLndhdGVyZmFsbChbXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5fbWVzaGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkaW5nIEJ1ZmZlcnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnVmZmVycyhzZWxmLl9tZXNoZmlsZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBCdWZmZXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLl90ZXh0dXJlZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRpbmcgVGV4dHVyZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRUZXh0dXJlKHNlbGYuX3RleHR1cmVmaWxlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkIFRleHR1cmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5fbWF0ZXJpYWxmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBNYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNYXRlcmlhbChzZWxmLl9tYXRlcmlhbGZpbGUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgTWF0ZXJpYWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYilcclxuICAgICAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLmxvYWRNZXNoQnlPYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMgPSBuZXcgUmVzb3VyY2VzLk1lc2hCdWZmZXJzKHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMuY3JlYXRlQnVmZmVycyhvYmopO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUubG9hZE1hdGVyaWFsQnlPYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IFJlc291cmNlcy5NZXNoTWF0ZXJpYWwodGhpcy5ncmFwaElEKTtcclxuICAgICAgICAgICAgaWYgKG9iai5hbWJpZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5hbWJpZW50ID0gb2JqLmFtYmllbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iai5zcGVjdWxhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc3BlY3VsYXIgPSBvYmouc3BlY3VsYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iai5kaWZmdXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5kaWZmdXNlID0gb2JqLmRpZmZ1c2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9iai5zaGluaW5lc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLnNoaW5pbmVzcyA9IG9iai5zaGluaW5lc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLnNldFdpcmVGcmFtZSA9IGZ1bmN0aW9uIChpc193aXJlZnJhbWUsIGNvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpcmVmcmFtZSA9IGlzX3dpcmVmcmFtZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3dpcmVmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2lyZWZyYW1lQ29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUuV2lyZUZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB2YXIgdVdpcmVmcmFtZSA9IHRoaXMuZ2V0VW5pZm9ybShcInVXaXJlZnJhbWVcIik7XHJcbiAgICAgICAgICAgIGlmICh1V2lyZWZyYW1lKVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFpKHVXaXJlZnJhbWUsIHRoaXMuX3dpcmVmcmFtZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl93aXJlZnJhbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1V2lyZWZyYW1lQ29sb3IgPSB0aGlzLmdldFVuaWZvcm0oXCJ1V2lyZWZyYW1lQ29sb3JcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodVdpcmVmcmFtZUNvbG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodVdpcmVmcmFtZUNvbG9yLCB0aGlzLl93aXJlZnJhbWVDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLnNldE1hdGVyaWFsVW5pZm9ybXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbC5hbWJpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVNYXRlcmlhbEFtYmllbnQgPSB0aGlzLmdldFVuaWZvcm0oXCJ1TWF0ZXJpYWxBbWJpZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1TWF0ZXJpYWxBbWJpZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGZ2KHVNYXRlcmlhbEFtYmllbnQsIHRoaXMuX21hdGVyaWFsLmFtYmllbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsLmRpZmZ1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdU1hdGVyaWFsRGlmZnVzZSA9IHRoaXMuZ2V0VW5pZm9ybShcInVNYXRlcmlhbERpZmZ1c2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVNYXRlcmlhbERpZmZ1c2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodU1hdGVyaWFsRGlmZnVzZSwgdGhpcy5fbWF0ZXJpYWwuZGlmZnVzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwuc3BlY3VsYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdU1hdGVyaWFsU3BlY3VsYXIgPSB0aGlzLmdldFVuaWZvcm0oXCJ1TWF0ZXJpYWxTcGVjdWxhclwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodU1hdGVyaWFsU3BlY3VsYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodU1hdGVyaWFsU3BlY3VsYXIsIHRoaXMuX21hdGVyaWFsLnNwZWN1bGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbC5zaGluaW5lc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdVNoaW5pbmVzcyA9IHRoaXMuZ2V0VW5pZm9ybShcInVTaGluaW5lc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVTaGluaW5lc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0xZih1U2hpbmluZXNzLCB0aGlzLl9tYXRlcmlhbC5zaGluaW5lc3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNoRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWF0ZXJpYWxVbmlmb3JtcygpO1xyXG4gICAgICAgICAgICB0aGlzLldpcmVGcmFtZSgpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYnVmZmVycy52Ym8pO1xyXG4gICAgICAgICAgICBLZXRjaC5lbmFibGVBdHRyaWIodGhpcy5ncmFwaElELCBcImFfcG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9idWZmZXJzLm5ibyk7XHJcbiAgICAgICAgICAgIEtldGNoLmVuYWJsZUF0dHJpYih0aGlzLmdyYXBoSUQsIFwiYV9ub3JtYWxcIik7XHJcbiAgICAgICAgICAgIHZhciBpdmJvID0gdGhpcy5fYnVmZmVycy5pdmJvO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpdmJvKTtcclxuICAgICAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgaXZiby5udW1JdGVtcywgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgS2V0Y2guZGlzYWJsZUF0dHJpYih0aGlzLmdyYXBoSUQsIFwiYV9wb3NpdGlvblwiKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBNZXNoRW50aXR5O1xyXG4gICAgfShFbnRpdHkpKTtcclxuICAgIEJsYXplLk1lc2hFbnRpdHkgPSBNZXNoRW50aXR5O1xyXG4gICAgdmFyIFRyYW5zZm9ybUVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKFRyYW5zZm9ybUVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBUcmFuc2Zvcm1FbnRpdHkoZ3JhcGhfaWQsIHBvc2l0aW9uLCBzaXplLCByb3RhdGlvbikge1xyXG4gICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb24gfHwgdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2l6ZSA9IHNpemUgfHwgdmVjMy5jcmVhdGUoWzEsIDEsIDFdKTtcclxuICAgICAgICAgICAgdGhpcy5fcm90YXRpb24gPSByb3RhdGlvbiB8fCB7IGFuZ2xlOiAwLCBheGlzOiB2ZWMzLmNyZWF0ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuaWRlbnRpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5fbWF0cml4KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuc2V0TWF0cml4ID0gZnVuY3Rpb24gKG5ld19tYXRyaXgpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF0cml4ID0gbmV3X21hdHJpeDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUudHJhbnNwb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtYXQ0LnRyYW5zcG9zZSh0aGlzLl9tYXRyaXgsIHRoaXMuX21hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRBYnNvbHV0ZVBvc2l0aW9uID0gZnVuY3Rpb24gKHgsIHksIHopIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBbeCwgeSwgel07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh4LCB5LCB6KSB7XHJcbiAgICAgICAgICAgIGlmICh4ID09PSB2b2lkIDApIHsgeCA9IDA7IH1cclxuICAgICAgICAgICAgaWYgKHkgPT09IHZvaWQgMCkgeyB5ID0gMDsgfVxyXG4gICAgICAgICAgICBpZiAoeiA9PT0gdm9pZCAwKSB7IHogPSAwOyB9XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kMSA9IHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZDIgPSB2ZWMzLmNyZWF0ZShbeCwgeSwgel0pO1xyXG4gICAgICAgICAgICB2ZWMzLmFkZChvcGVyYW5kMSwgb3BlcmFuZDIsIHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzaXplKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaXplID0gc2l6ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHgsIHksIHopIHtcclxuICAgICAgICAgICAgdGhpcy5fc2l6ZSA9IFt4LCB5LCB6XTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoeCwgeSwgeikge1xyXG4gICAgICAgICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7IHggPSAwOyB9XHJcbiAgICAgICAgICAgIGlmICh5ID09PSB2b2lkIDApIHsgeSA9IDA7IH1cclxuICAgICAgICAgICAgaWYgKHogPT09IHZvaWQgMCkgeyB6ID0gMDsgfVxyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZDEgPSB0aGlzLl9zaXplO1xyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZDIgPSB2ZWMzLmNyZWF0ZShbeCwgeSwgel0pO1xyXG4gICAgICAgICAgICB2ZWMzLmFkZChvcGVyYW5kMSwgb3BlcmFuZDIsIHRoaXMuX3NpemUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUsIFwicm90YXRpb25cIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yb3RhdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAocm90YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAoYW5nbGUsIGF4aXMpIHtcclxuICAgICAgICAgICAgaWYgKGFuZ2xlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcm90YXRpb24uYW5nbGUgPSBhbmdsZTtcclxuICAgICAgICAgICAgaWYgKGF4aXMpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yb3RhdGlvbi5heGlzID0gYXhpcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuc2V0QW5nbGUgPSBmdW5jdGlvbiAoYW5nbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcm90YXRpb24uYW5nbGUgPSBhbmdsZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuc2V0QXhpcyA9IGZ1bmN0aW9uIChheGlzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JvdGF0aW9uLmF4aXMgPSBheGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5yb3RhdGVBbmdsZSA9IGZ1bmN0aW9uIChhbmdsZSkge1xyXG4gICAgICAgICAgICBpZiAoYW5nbGUgPT09IHZvaWQgMCkgeyBhbmdsZSA9IDA7IH1cclxuICAgICAgICAgICAgdGhpcy5fcm90YXRpb24uYW5nbGUgKz0gYW5nbGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLm1vdmVBeGlzID0gZnVuY3Rpb24gKHgsIHksIHopIHtcclxuICAgICAgICAgICAgaWYgKHggPT09IHZvaWQgMCkgeyB4ID0gMDsgfVxyXG4gICAgICAgICAgICBpZiAoeSA9PT0gdm9pZCAwKSB7IHkgPSAwOyB9XHJcbiAgICAgICAgICAgIGlmICh6ID09PSB2b2lkIDApIHsgeiA9IDA7IH1cclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQxID0gdGhpcy5fcm90YXRpb24uYXhpcztcclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQyID0gdmVjMy5jcmVhdGUoW3gsIHksIHpdKTtcclxuICAgICAgICAgICAgdmVjMy5hZGQob3BlcmFuZDEsIG9wZXJhbmQyLCB0aGlzLl9yb3RhdGlvbi5heGlzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUuYmVnaW5EcmF3ID0gZnVuY3Rpb24gKG1hdHJpeFN0YWNrKSB7XHJcbiAgICAgICAgICAgIG1hdHJpeFN0YWNrLnB1c2goKTtcclxuICAgICAgICAgICAgbWF0cml4U3RhY2suTW9kZWxWaWV3KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdHJpeCA9IG1hdHJpeFN0YWNrLm12TWF0cml4O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcG9zaXRpb24gIT0gdm9pZCAwKVxyXG4gICAgICAgICAgICAgICAgbWF0NC50cmFuc2xhdGUodGhpcy5fbWF0cml4LCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zaXplICE9IHZvaWQgMClcclxuICAgICAgICAgICAgICAgIG1hdDQuc2NhbGUodGhpcy5fbWF0cml4LCB0aGlzLl9zaXplKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3JvdGF0aW9uICE9IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhZCA9IHRoaXMuX3JvdGF0aW9uLmFuZ2xlICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgICAgIG1hdDQucm90YXRlKHRoaXMuX21hdHJpeCwgcmFkLCB0aGlzLl9yb3RhdGlvbi5heGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRyaXhTdGFjay5zZXRVcCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5lbmREcmF3ID0gZnVuY3Rpb24gKG1hdHJpeFN0YWNrKSB7XHJcbiAgICAgICAgICAgIG1hdHJpeFN0YWNrLnBvcCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFRyYW5zZm9ybUVudGl0eTtcclxuICAgIH0oRW50aXR5KSk7XHJcbiAgICBCbGF6ZS5UcmFuc2Zvcm1FbnRpdHkgPSBUcmFuc2Zvcm1FbnRpdHk7XHJcbiAgICB2YXIgTGlnaHRFbnRpdHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhMaWdodEVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBMaWdodEVudGl0eShncmFwaF9pZCwgYW1iaWVudCwgZGlmZnVzZSwgcG9zaXRpb24sIHNwZWN1bGFyLCBkaXJlY3Rpb24sIGN1dG9mZikge1xyXG4gICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FtYmllbnQgPSBhbWJpZW50ID8gdmVjNC5jcmVhdGUoYW1iaWVudCkgOiBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWZmdXNlID0gZGlmZnVzZSA/IHZlYzQuY3JlYXRlKGRpZmZ1c2UpIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbiA/IHZlYzQuY3JlYXRlKHBvc2l0aW9uKSA6IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3NwZWN1bGFyID0gc3BlY3VsYXIgPyB2ZWM0LmNyZWF0ZShzcGVjdWxhcikgOiBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSBkaXJlY3Rpb24gPyB2ZWMzLmNyZWF0ZShkaXJlY3Rpb24pIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fY3V0b2ZmID0gY3V0b2ZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlnaHRFbnRpdHkucHJvdG90eXBlLCBcImFtYmllbnRcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbWJpZW50O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhbWJpZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hbWJpZW50ID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKGFtYmllbnQpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpZ2h0RW50aXR5LnByb3RvdHlwZSwgXCJkaWZmdXNlXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlmZnVzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGlmZnVzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlmZnVzZSA9IHV0aWxzLm5vcm1hbGl6ZU5hTih2ZWM0LmNyZWF0ZShkaWZmdXNlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaWdodEVudGl0eS5wcm90b3R5cGUsIFwic3BlY3VsYXJcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcGVjdWxhcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoc3BlY3VsYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NwZWN1bGFyID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKHNwZWN1bGFyKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaWdodEVudGl0eS5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaWZmdXNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB1dGlscy5ub3JtYWxpemVOYU4odmVjMy5jcmVhdGUocG9zaXRpb24pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpZ2h0RW50aXR5LnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzMuY3JlYXRlKGRpcmVjdGlvbikpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlnaHRFbnRpdHkucHJvdG90eXBlLCBcImN1dE9mZlwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1dG9mZjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY3V0b2ZmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXRvZmYgPSBjdXRvZmY7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIExpZ2h0RW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hbWJpZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdUxpZ2h0QW1iaWVudCA9IHRoaXMuZ2V0VW5pZm9ybShcInVMaWdodEFtYmllbnRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodUxpZ2h0QW1iaWVudClcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGZ2KHVMaWdodEFtYmllbnQsIHRoaXMuX2FtYmllbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaWZmdXNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdUxpZ2h0RGlmZnVzZSA9IHRoaXMuZ2V0VW5pZm9ybShcInVMaWdodERpZmZ1c2VcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodUxpZ2h0RGlmZnVzZSlcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGZ2KHVMaWdodERpZmZ1c2UsIHRoaXMuX2RpZmZ1c2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zcGVjdWxhcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVMaWdodFNwZWN1bGFyID0gdGhpcy5nZXRVbmlmb3JtKFwidUxpZ2h0U3BlY3VsYXJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodUxpZ2h0U3BlY3VsYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih1TGlnaHRTcGVjdWxhciwgdGhpcy5fc3BlY3VsYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVMaWdodFBvc2l0aW9uID0gdGhpcy5nZXRVbmlmb3JtKFwidUxpZ2h0UG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodUxpZ2h0UG9zaXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNmdih1TGlnaHRQb3NpdGlvbiwgdGhpcy5fcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciB1RGlyZWN0aW9uID0gdGhpcy5nZXRVbmlmb3JtKFwidUxpZ2h0RGlyZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVEaXJlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNmdih1RGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlmICh0aGlzLl9jdXRvZmYpIHtcclxuICAgICAgICAgICAgICAgICB2YXIgdUN1dE9mZiA9IHRoaXMuZ2V0VW5pZm9ybShcInVDdXRPZmZcIik7XHJcbiAgICAgICAgICAgICAgICAgaWYgKHVDdXRPZmYpXHJcbiAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0xZih1Q3V0T2ZmLCB0aGlzLl9jdXRvZmYpO1xyXG4gICAgICAgICAgICAgfSovXHJcbiAgICAgICAgfTtcclxuICAgICAgICBMaWdodEVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBMaWdodEVudGl0eTtcclxuICAgIH0oRW50aXR5KSk7XHJcbiAgICBCbGF6ZS5MaWdodEVudGl0eSA9IExpZ2h0RW50aXR5O1xyXG4gICAgdmFyIENhbWVyYUVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKENhbWVyYUVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBDYW1lcmFFbnRpdHkoZ3JhcGhfaWQsIHR5cGUpIHtcclxuICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl90eXBlID0gdHlwZSB8fCBDQU1FUkFfVFlQRS5PUkJJVElORztcclxuICAgICAgICAgICAgdGhpcy5fY21hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5fY21hdHJpeCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fcmlnaHQgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9ub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHZlYzMuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGggPSAwLjA7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZXZhdGlvbiA9IDAuMDtcclxuICAgICAgICAgICAgdGhpcy5fc3RlcHMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FtZXJhRW50aXR5LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHBvcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcImF6aW11dGhcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hemltdXRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChheikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBfYXogPSBheiAtIHRoaXMuX2F6aW11dGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUF6aW11dGgodGVtcF9heik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIENhbWVyYUVudGl0eS5wcm90b3R5cGUuY2hhbmdlQXppbXV0aCA9IGZ1bmN0aW9uIChheikge1xyXG4gICAgICAgICAgICB0aGlzLl9hemltdXRoICs9IGF6O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYXppbXV0aCA+IDM2MCB8fCB0aGlzLl9hemltdXRoIDwgLTM2MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXppbXV0aCA9IHRoaXMuX2F6aW11dGggJSAzNjA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcImVsZXZhdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VsZXZhdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wX2VsID0gZWwgLSB0aGlzLl9lbGV2YXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUVsZXZhdGlvbih0ZW1wX2VsKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgQ2FtZXJhRW50aXR5LnByb3RvdHlwZS5jaGFuZ2VFbGV2YXRpb24gPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fZWxldmF0aW9uICs9IGVsO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZWxldmF0aW9uID4gMzYwIHx8IHRoaXMuX2VsZXZhdGlvbiA8IC0zNjApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZXZhdGlvbiA9IHRoaXMuX2VsZXZhdGlvbiAlIDM2MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbWVyYUVudGl0eS5wcm90b3R5cGUsIFwiem9vbVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0ZXBzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHAgPSB0aGlzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBvZmZzZXQgLSB0aGlzLl9zdGVwcztcclxuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuX25vcm1hbCwgbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3X3Bvc2l0aW9uID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90eXBlID09PSBDQU1FUkFfVFlQRS5UUkFDS0lORykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld19wb3NpdGlvblswXSA9IHBbMF0gLSBzdGVwICogblswXTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdfcG9zaXRpb25bMV0gPSBwWzFdIC0gc3RlcCAqIG5bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Bvc2l0aW9uWzJdID0gcFsyXSAtIHN0ZXAgKiBuWzJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Bvc2l0aW9uWzBdID0gcFswXTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdfcG9zaXRpb25bMV0gPSBwWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld19wb3NpdGlvblsyXSA9IHBbMl0gLSBzdGVwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ld19wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0ZXBzID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBDYW1lcmFFbnRpdHkucHJvdG90eXBlLmNhbGN1bGF0ZU9yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHRoaXMuX2NtYXRyaXg7XHJcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHlWZWM0KG0sIFsxLCAwLCAwLCAwXSwgdGhpcy5fcmlnaHQpO1xyXG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5VmVjNChtLCBbMCwgMSwgMCwgMF0sIHRoaXMuX3VwKTtcclxuICAgICAgICAgICAgbWF0NC5tdWx0aXBseVZlYzQobSwgWzAsIDAsIDEsIDBdLCB0aGlzLl9ub3JtYWwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQ2FtZXJhRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5fY21hdHJpeCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlT3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3R5cGUgPT09IENBTUVSQV9UWVBFLlRSQUNLSU5HKSB7XHJcbiAgICAgICAgICAgICAgICBtYXQ0LnRyYW5zbGF0ZSh0aGlzLl9jbWF0cml4LCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBtYXQ0LnJvdGF0ZVkodGhpcy5fY21hdHJpeCwgdGhpcy5fYXppbXV0aCAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGVYKHRoaXMuX2NtYXRyaXgsIHRoaXMuX2VsZXZhdGlvbiAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGVZKHRoaXMuX2NtYXRyaXgsIHRoaXMuX2F6aW11dGggKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgICAgIG1hdDQucm90YXRlWCh0aGlzLl9jbWF0cml4LCB0aGlzLl9lbGV2YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgICAgIG1hdDQudHJhbnNsYXRlKHRoaXMuX2NtYXRyaXgsIHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90eXBlID09PSBDQU1FUkFfVFlQRS5UUkFDS0lORykge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5tdWx0aXBseVZlYzQobSwgWzAsIDAsIDAsIDFdLCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcIm1vZGVsVmlld1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5pbnZlcnNlKHRoaXMuX2NtYXRyaXgsIG0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIENhbWVyYUVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBDYW1lcmFFbnRpdHk7XHJcbiAgICB9KEVudGl0eSkpO1xyXG4gICAgQmxhemUuQ2FtZXJhRW50aXR5ID0gQ2FtZXJhRW50aXR5O1xyXG4gICAgdmFyIE5vZGVFbGVtZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBOb2RlRWxlbWVudChwYXJlbnQsIHR5cGUsIGVudGl0eSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJlbnROb2RlID0gcGFyZW50O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudE5vZGUuYWRkQ2hpbGROb2RlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLl9vaWQgPSB1dGlscy51dWlkKHRoaXMuX3R5cGUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5fZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZUVsZW1lbnQucHJvdG90eXBlLCBcIm9pZFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29pZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGVFbGVtZW50LnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZUVsZW1lbnQucHJvdG90eXBlLCBcImVudGl0eVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VudGl0eTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlRWxlbWVudC5wcm90b3R5cGUsIFwiY2hpbGROb2Rlc1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkTm9kZXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5hZGRDaGlsZE5vZGUgPSBmdW5jdGlvbiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGROb2Rlcy5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZE5vZGUgPSBmdW5jdGlvbiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKGNoaWxkKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuZ2V0Q2hpbGROb2RlQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGROb2Rlc1tpbmRleF0gfHwgdm9pZCAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmV4aXN0c0NoaWxkTm9kZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGROb2Rlc1tpbmRleF0gIT09IHZvaWQgMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudE5vZGUucmVtb3ZlQ2hpbGROb2RlKHRoaXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUNoaWxkTm9kZSA9IGZ1bmN0aW9uICh0eXBlLCBlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb2RlRWxlbWVudCh0aGlzLCB0eXBlLCBlbnRpdHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmlzUm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudE5vZGUgPT09IHZvaWQgMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGNoaWxkKSB7XHJcbiAgICAgICAgICAgIHZhciBvaWQgPSBjaGlsZC5vaWQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRJbmRleCh0aGlzLl9jaGlsZE5vZGVzLCBmdW5jdGlvbiAocykgeyByZXR1cm4gcy5vaWQgPT09IG9pZDsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuaW5kZXhJblBhcmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvb3QoKSlcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fcGFyZW50Tm9kZS5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuaGFzU2libGluZyA9IGZ1bmN0aW9uIChwcmV2KSB7XHJcbiAgICAgICAgICAgIHZhciBfaGF2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSb290KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX3BhcmVudE5vZGUuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudE5vZGUuZ2V0Q2hpbGROb2RlQnlJbmRleChpbmRleCAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudE5vZGUuZ2V0Q2hpbGROb2RlQnlJbmRleChpbmRleCArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX2hhdmU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUubmV4dFNpYmxpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm9vdCgpICYmIHRoaXMuaGFzU2libGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9wYXJlbnROb2RlLmluZGV4T2YodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBzaWJsaW5nID0gdGhpcy5fcGFyZW50Tm9kZS5nZXRDaGlsZE5vZGVCeUluZGV4KGluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNpYmxpbmc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUucHJldmlvdXNTaWJsaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2libGluZyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvb3QoKSAmJiB0aGlzLmhhc1NpYmxpbmcodHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX3BhcmVudE5vZGUuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgICAgIHNpYmxpbmcgPSB0aGlzLl9wYXJlbnROb2RlLmdldENoaWxkTm9kZUJ5SW5kZXgoaW5kZXggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2libGluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5maXJzdENoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZE5vZGVCeUluZGV4KDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmxhc3RDaGlsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGROb2RlQnlJbmRleCh0aGlzLl9jaGlsZE5vZGVzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkTm9kZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkTm9kZXMgPSBbXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKG1hdHJpeFN0YWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9lbnRpdHkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbnRpdHkuYmVnaW5EcmF3KG1hdHJpeFN0YWNrKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLl9jaGlsZE5vZGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZHJhdyhtYXRyaXhTdGFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2VudGl0eSlcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VudGl0eS5lbmREcmF3KG1hdHJpeFN0YWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBOb2RlRWxlbWVudDtcclxuICAgIH0oKSk7XHJcbiAgICBCbGF6ZS5Ob2RlRWxlbWVudCA9IE5vZGVFbGVtZW50O1xyXG4gICAgdmFyIFNjZW5lR3JhcGggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhTY2VuZUdyYXBoLCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIFNjZW5lR3JhcGgoKSB7XHJcbiAgICAgICAgICAgIHZhciBvaWQgPSB1dGlscy51dWlkKCk7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIG9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29pZCA9IG9pZDtcclxuICAgICAgICAgICAgdGhpcy5fc2NlbmUgPSBuZXcgTm9kZUVsZW1lbnQodm9pZCAwLCBcIlNjZW5lXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXhTdGFjayA9IG5ldyBNYXRyaXhTdGFjayh0aGlzLl9vaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXJCdWZmZXIgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5faXNEcmF3aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEtldGNoLmNyZWF0ZVZpZXcodGhpcy5fb2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjZW5lR3JhcGgucHJvdG90eXBlLCBcInNjZW5lXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2VuZUdyYXBoLnByb3RvdHlwZSwgXCJpc0RyYXdpbmdcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0RyYXdpbmc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLkVudmlyb25tZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XHJcbiAgICAgICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO1xyXG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xyXG4gICAgICAgICAgICBnbC5ibGVuZEZ1bmMoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcclxuICAgICAgICAgICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMSk7XHJcbiAgICAgICAgICAgIGdsLmNsZWFyRGVwdGgoMS4wKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzRHJhd2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLnZpZXdwb3J0V2lkdGgsIGdsLnZpZXdwb3J0SGVpZ2h0KTtcclxuICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5kcmF3KHRoaXMuX21hdHJpeFN0YWNrKTtcclxuICAgICAgICAgICAgdGhpcy5faXNEcmF3aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jcmVhdGVNYWluQ2hpbGROb2RlID0gZnVuY3Rpb24gKHR5cGUsIGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuY3JlYXRlQ2hpbGROb2RlKHR5cGUsIGVudGl0eSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5yZW1vdmVNYWluQ2hpbGROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2NlbmUucmVtb3ZlQ2hpbGROb2RlKG5vZGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjZW5lR3JhcGgucHJvdG90eXBlLCBcIm9pZFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29pZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChjYW52YXMpIHtcclxuICAgICAgICAgICAgS2V0Y2guc2V0Q2FudmFzVG9Db250ZXh0KHRoaXMub2lkLCBjYW52YXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuUHJvZ3JhbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgS2V0Y2guY3JlYXRlUHJvZ3JhbSh0aGlzLl9vaWQsIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50OiBTaGFkZXJzLkZyYWdtZW50Lk1haW4sXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXg6IFNoYWRlcnMuVmVydGV4Lk1haW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jcmVhdGVNZXNoID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICB2YXIgbWVzaEVudGl0eSA9IG5ldyBNZXNoRW50aXR5KHRoaXMub2lkKTtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5tZXNoKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNoRW50aXR5LmxvYWRNZXNoQnlPYmplY3QoY29uZmlnLm1lc2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb25maWcubWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hFbnRpdHkubG9hZE1hdGVyaWFsQnlPYmplY3QoY29uZmlnLm1hdGVyaWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29uZmlnLndpcmVmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpcmVmcmFtZSA9IGNvbmZpZy53aXJlZnJhbWU7XHJcbiAgICAgICAgICAgICAgICBtZXNoRW50aXR5LnNldFdpcmVGcmFtZSh3aXJlZnJhbWUuaXMsIHdpcmVmcmFtZS5jb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1lc2hFbnRpdHk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jcmVhdGVNZXNoQnlMb2FkZXIgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNoID0gbmV3IE1lc2hFbnRpdHkodGhpcy5vaWQsIGNvbmZpZy5tZXNoLCBjb25maWcubWF0ZXJpYWwsIGNvbmZpZy50ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyQnVmZmVyLnB1c2gobWVzaCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuY3JlYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBzaXplLCByb3RhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybUVudGl0eSh0aGlzLm9pZCwgcG9zaXRpb24sIHNpemUsIHJvdGF0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZUxpZ2h0ID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IExpZ2h0RW50aXR5KHRoaXMub2lkLCBjb25maWcuYW1iaWVudCwgY29uZmlnLmRpZmZ1c2UsIGNvbmZpZy5wb3NpdGlvbiwgY29uZmlnLnNwZWN1bGFyLCBjb25maWcuZGlyZWN0aW9uLCBjb25maWcuY3V0b2ZmKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZUNhbWVyYSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FtZXJhRW50aXR5KHRoaXMub2lkLCB0eXBlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2VuZUdyYXBoLnByb3RvdHlwZSwgXCJNYWluQ2FtZXJhXCIsIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRyaXhTdGFjay5NYWluQ2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5zdGFydExvYWRlciA9IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICBhc3luYy5lYWNoU2VyaWVzKHRoaXMuX2xvYWRlckJ1ZmZlciwgZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0ubG9hZE1lc2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCBjYik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc2VsZi5FbnZpcm9ubWVudCgpO1xyXG4gICAgICAgICAgICBzZWxmLlByb2dyYW0oKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0QXR0cmlidXRlTG9jYXRpb25zKHNlbGYuX29pZCwgU2NlbmVHcmFwaC5BVFRSSUJVVEVTKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0VW5pZm9ybUxvY2F0aW9ucyhzZWxmLl9vaWQsIFNjZW5lR3JhcGguVU5JRk9STVMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXhTdGFjay5pbml0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jb25maWd1cmVXaXRoTG9hZGVyID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc2VsZi5jb25maWd1cmUoKTtcclxuICAgICAgICAgICAgc2VsZi5zdGFydExvYWRlcihjYik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLlVOSUZPUk1TID0gW1xyXG4gICAgICAgICAgICAndVBNYXRyaXgnLFxyXG4gICAgICAgICAgICAndU1WTWF0cml4JyxcclxuICAgICAgICAgICAgJ3VOTWF0cml4JyxcclxuICAgICAgICAgICAgJ3VMaWdodERpcmVjdGlvbicsXHJcbiAgICAgICAgICAgICd1TGlnaHRBbWJpZW50JyxcclxuICAgICAgICAgICAgJ3VNYXRlcmlhbEFtYmllbnQnLFxyXG4gICAgICAgICAgICAndUxpZ2h0RGlmZnVzZScsXHJcbiAgICAgICAgICAgICd1TWF0ZXJpYWxEaWZmdXNlJyxcclxuICAgICAgICAgICAgJ3VMaWdodFNwZWN1bGFyJyxcclxuICAgICAgICAgICAgJ3VNYXRlcmlhbFNwZWN1bGFyJyxcclxuICAgICAgICAgICAgJ3VTaGluaW5lc3MnLFxyXG4gICAgICAgICAgICAndVdpcmVmcmFtZScsXHJcbiAgICAgICAgICAgICd1V2lyZWZyYW1lQ29sb3InXHJcbiAgICAgICAgXTtcclxuICAgICAgICBTY2VuZUdyYXBoLkFUVFJJQlVURVMgPSBbJ2FfcG9zaXRpb24nLCAnYV9ub3JtYWwnXTtcclxuICAgICAgICByZXR1cm4gU2NlbmVHcmFwaDtcclxuICAgIH0oUmVuZGVyYWJsZSkpO1xyXG4gICAgQmxhemUuU2NlbmVHcmFwaCA9IFNjZW5lR3JhcGg7XHJcbn0pKEJsYXplIHx8IChCbGF6ZSA9IHt9KSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
