var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Blaze;!function(t){var e;!function(t){function e(t){for(var e=null,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<i.length;++n){try{e=t.getContext(i[n])}catch(r){}if(e)break}return null===e?(alert("Could not initialise WebGL"),null):(e.viewportWidth=t.width,e.viewportHeight=t.height,e)}function i(e,i,n,r){var o=e.createBuffer();switch(e.bindBuffer(e.ARRAY_BUFFER,o),r){case t.BUFFER_DRAW.STATIC:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW);break;case t.BUFFER_DRAW.DYNAMIC:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.DYNAMIC_DRAW);break;case t.BUFFER_DRAW.STREAM:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STREAM_DRAW);break;default:e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)}return e.bindBuffer(e.ARRAY_BUFFER,null),n?(o.itemSize=2,o.numItems=i.length/2):(o.itemSize=3,o.numItems=i.length/3),o}function n(e,i,n){var r=e.createBuffer(e.ELEMENT_ARRAY_BUFFER);switch(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),n){case t.BUFFER_DRAW.STATIC:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW);break;case t.BUFFER_DRAW.DYNAMIC:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.DYNAMIC_DRAW);break;case t.BUFFER_DRAW.STREAM:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STREAM_DRAW);break;default:e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW)}return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),r.itemSize=1,r.numItems=i.length,r}function r(t,e){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),i}function o(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)}function a(t,e){var i=o(t,t.FRAGMENT_SHADER,e.fragment),n=o(t,t.VERTEX_SHADER,e.vertex),r=t.createProgram();return t.attachShader(r,n),t.attachShader(r,i),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||console.log(t.getProgramInfoLog(r)),t.useProgram(r),r}t.getGLContext=e,function(t){t[t.STATIC=0]="STATIC",t[t.STREAM=1]="STREAM",t[t.DYNAMIC=2]="DYNAMIC"}(t.BUFFER_DRAW||(t.BUFFER_DRAW={}));t.BUFFER_DRAW;t.createBuffer=i,t.createIndexBuffer=n,t.createTexture=r,t.createShader=o,t.createProgram=a}(e=t.WebGLUtils||(t.WebGLUtils={}));var i;!function(t){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function i(t){var i=e()+e();return t?t+i:i}function n(t){return t.map(function(t){return Number.isNaN(t)&&(t=0),t})}function r(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.addEventListener("load",function(){e(i.responseText)}),i.send()}function o(t){var e=t.split(".");return e[e.length-1]}function a(){return(new Date).getTime()}function s(t){return t*Math.PI/180}function u(t,e){for(var i=0,n=1,r=2,o=[],a=0;a<t.length;a++)o[a]=0;for(var a=0;a<e.length;a+=3){var s=[],u=[],c=[];s[i]=t[3*e[a+1]+i]-t[3*e[a]+i],s[n]=t[3*e[a+1]+n]-t[3*e[a]+n],s[r]=t[3*e[a+1]+r]-t[3*e[a]+r],u[i]=t[3*e[a+2]+i]-t[3*e[a+1]+i],u[n]=t[3*e[a+2]+n]-t[3*e[a+1]+n],u[r]=t[3*e[a+2]+r]-t[3*e[a+1]+r],c[i]=s[n]*u[r]-s[r]*u[n],c[n]=s[r]*u[i]-s[i]*u[r],c[r]=s[i]*u[n]-s[n]*u[i];for(var f=0;3>f;f++)o[3*e[a+f]+i]=o[3*e[a+f]+i]+c[i],o[3*e[a+f]+n]=o[3*e[a+f]+n]+c[n],o[3*e[a+f]+r]=o[3*e[a+f]+r]+c[r]}for(var a=0;a<t.length;a+=3){var h=[];h[i]=o[a+i],h[n]=o[a+n],h[r]=o[a+r];var l=Math.sqrt(h[i]*h[i]+h[n]*h[n]+h[r]*h[r]);0==l&&(l=1e-5),h[i]=h[i]/l,h[n]=h[n]/l,h[r]=h[r]/l,o[a+i]=h[i],o[a+n]=h[n],o[a+r]=h[r]}return o}t.s4=e,t.uuid=i,t.normalizeNaN=n,t.load=r,t.getExtension=o,t.nowInMilliseconds=a,t.degToRad=s,t.calculateNormals=u}(i=t.utils||(t.utils={})),function(t){t[t.ORBITING=0]="ORBITING",t[t.TRACKING=1]="TRACKING"}(t.CAMERA_TYPE||(t.CAMERA_TYPE={}));var n=t.CAMERA_TYPE,r=function(){function t(){}return t.setCanvasToContext=function(i,n){var r=e.getGLContext(n);t.setContext(i,r)},t.setContext=function(e,i){t._views[e].context=i},t.getContext=function(e){return t._views[e].context},t.createProgram=function(i,n){var r=t.getContext(i),o=e.createProgram(r,n);t.setProgram(i,o)},t.setProgram=function(e,i){t._views[e].program=i},t.getProgram=function(e){return t._views[e].program},t.createView=function(e){t._views[e]={}},t.setAttributeLocations=function(e,i){var n=t._views[e],r=n.context,o=n.program;n.attribs=i.reduce(function(t,e){return t[e]=r.getAttribLocation(o,e),t},{})},t.getAttrib=function(e,i){return t._views[e].attribs[i]},t.getUniform=function(e,i){return t._views[e].uniforms[i]},t.setUniformLocations=function(e,i){var n=t._views[e],r=n.context,o=n.program;n.uniforms=i.reduce(function(t,e){return t[e]=r.getUniformLocation(o,e),t},{})},t.enableAttrib=function(e,i,n){var r=t.getAttrib(e,i),o=t.getContext(e);o.enableVertexAttribArray(r),n?o.vertexAttribPointer(r,n.size||3,o.FLOAT,n.normalized||!1,n.stride||0,n.offset||0):o.vertexAttribPointer(r,3,o.FLOAT,!1,0,0)},t.disableAttrib=function(e,i){var n=t.getAttrib(e,i),r=t.getContext(e);r.disableVertexAttribArray(n)},t.renderLoop=function(t){setInterval(t,30)},t.addTexture=function(e,i){var n=t._views[e];n.textures=n.textures||[],n.textures.push(i)},t.activeTexture=function(e,i,n){var r=t._views[e],o=r.context,a=(r.program,r.textures.indexOf(i));if(a>-1){o.activeTexture(0===a?o.TEXTURE0:o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n);var s=t.getUniform(e,"uSampler");o.uniform1i(s,a)}},t._views={},t}();t.Ketch=r;var o=function(){function t(t){this._graph_id=t}return Object.defineProperty(t.prototype,"graphID",{get:function(){return this._graph_id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gl",{get:function(){return r.getContext(this.graphID)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"program",{get:function(){return r.getProgram(this.graphID)},enumerable:!0,configurable:!0}),t.prototype.getUniform=function(t){return r.getUniform(this.graphID,t)},t}();t.Renderable=o;var a=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype.beginDraw=function(t){},e.prototype.endDraw=function(t){},e}(o);t.Entity=a;var s=function(t){function e(e){t.call(this,e),this._stack=[],this._mvMatrix=mat4.create(),this._pMatrix=mat4.create(),this._nMatrix=mat4.create()}return __extends(e,t),e.prototype.push=function(){var t=mat4.create();mat4.set(this._mvMatrix,t),this._stack.push(t)},e.prototype.pop=function(){if(0==this._stack.length)throw"invalid popMatrix";this._mvMatrix=this._stack.pop()},e.prototype.ModelView=function(){this._camera?this._mvMatrix=this._camera.modelView:mat4.identity(this._mvMatrix)},Object.defineProperty(e.prototype,"mvMatrix",{get:function(){return this._mvMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pMatrix",{get:function(){return this._pMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nMatrix",{get:function(){return this._nMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MainCamera",{set:function(t){this._camera=t},enumerable:!0,configurable:!0}),e.prototype.Perspective=function(){var t=this.gl;mat4.identity(this._pMatrix),mat4.perspective(45,t.viewportWidth/t.viewportHeight,.1,1e3,this._pMatrix)},e.prototype.Normal=function(){mat4.identity(this._nMatrix),mat4.set(this._mvMatrix,this._nMatrix),mat4.inverse(this._nMatrix),mat4.transpose(this._nMatrix)},e.prototype.init=function(){this.ModelView(),this.Perspective(),this.Normal()},e.prototype.setUp=function(){var t=this.gl;this.Normal();var e=this.getUniform("uMVMatrix");e&&t.uniformMatrix4fv(e,!1,this._mvMatrix);var i=this.getUniform("uPMatrix");i&&t.uniformMatrix4fv(i,!1,this._pMatrix);var n=this.getUniform("uNMatrix");n&&t.uniformMatrix4fv(n,!1,this._nMatrix)},e}(o);t.MatrixStack=s;var u;!function(t){var n=function(t){function n(e){t.call(this,e)}return __extends(n,t),Object.defineProperty(n.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"src",{set:function(t){var e=this,n=this,r=i.getExtension(t);i.load(t,function(t){var i;switch(r){case"obj":i=n.parseOBJ(t);break;case"json":i=n.parseJSON(t)}n.createBuffers(i),e._onload&&e._onload()})},enumerable:!0,configurable:!0}),n.prototype.parseJSON=function(t){var e={};try{e=JSON.parse(t)}catch(i){console.log(i)}return e},n.prototype.parseOBJ=function(t){var e={v:[],vn:[],vt:[],iv:[],"in":[],it:[]},i=t.split("\n"),n=i.filter(function(t){return"v"===t[0]}),r=i.filter(function(t){return"f"===t[0]});n.forEach(function(t){var i=t.replace("\r","").split(" "),n=i[0];e[n]=e[n].concat(i.slice(1).filter(function(t){return""!==t}))});var o=[];return r.forEach(function(t){var e=t.replace("\r","").replace("f","").split(" ");o=o.concat(e.slice(1).filter(function(t){return""!==t}))}),o.forEach(function(t){var i=t.split("/");e.iv.push(parseInt(i[0])-1),e["in"].push(parseInt(i[1])-1),e.it.push(parseInt(i[2])-1)}),e},n.prototype.createBuffers=function(t){function n(t){return e.createBuffer(o,t)}function r(t){return e.createIndexBuffer(o,t)}var o=this.gl;_.defaults(t,{v:[],vn:[],vt:[],iv:[],"in":[],it:[]}),t.v.length>0&&(this._vbo=n(t.v)),t.v.length>0&&t.iv.length>0&&(this._nbo=n(i.calculateNormals(t.v,t.iv))),t.vt.length>0&&(this._tbo=e.createBuffer(o,t.vt,!0)),t.iv.length>0&&(this._ivbo=r(t.iv)),t["in"].length>0&&(this._inbo=r(t["in"])),t.it.length>0&&(this._itbo=r(t.it))},Object.defineProperty(n.prototype,"vbo",{get:function(){return this._vbo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nbo",{get:function(){return this._nbo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tbo",{get:function(){return this._tbo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ivbo",{get:function(){return this._ivbo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inbo",{get:function(){return this._inbo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itbo",{get:function(){return this._itbo},enumerable:!0,configurable:!0}),n}(o);t.MeshBuffers=n;var a=function(t){function n(e){t.call(this,e),this._image=new Image,this._oid=i.uuid(this.constructor.name)}return __extends(n,t),Object.defineProperty(n.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"src",{set:function(t){this._image.onload=this.loadTextureImage(this._onload),this._image.src=t},enumerable:!0,configurable:!0}),n.prototype.loadTextureImage=function(t){var i=this,n=this;return function(){i._texture=e.createTexture(n.gl,n._image),r.addTexture(n.graphID,n._oid),t&&t()}},Object.defineProperty(n.prototype,"content",{get:function(){return this._texture},enumerable:!0,configurable:!0}),n}(o);t.MeshTexture=a;var s=function(t){function e(e,i,n,r,o){t.call(this,e),this._ambient=i?vec4.create(i):vec4.create(),this._diffuse=n?vec4.create(n):void 0,this._specular=r?vec4.create(r):vec4.create(),this._shininess=o||200}return __extends(e,t),Object.defineProperty(e.prototype,"onload",{set:function(t){this._onload=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"src",{set:function(t){var e=this,n=this;i.load(t,function(t){var i=n.parse(t);e._ambient=i.Ka,e._diffuse=i.Kd,e._specular=i.Ks,e.shininess=i.Ns,e._onload&&e._onload()})},enumerable:!0,configurable:!0}),e.prototype.parse=function(t){var e={},i=["Ka","Kd","Ks","Ns"],n=t.split("\n");return n.forEach(function(t){var n=t.split(" "),r=n[0];if(i.indexOf(r)>-1)switch(r){case"Ns":e.Ns=Number(n[1]);break;default:var o=n.slice(1).map(function(t){return Number(t)});o.push(1),e[r]=o}}),e},Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){this._ambient=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){this._diffuse=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){this._specular=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shininess",{get:function(){return this._shininess},set:function(t){this._shininess=t},enumerable:!0,configurable:!0}),e}(o);t.MeshMaterial=s}(u=t.Resources||(t.Resources={}));var c;!function(t){var e=function(){function t(){}return t.Particle="#ifdef GL_ES\nprecision mediump float;\n#endif\n\n\n\nvoid main(void) { \n    gl_FragColor = vec4(0,1,0,1);\n}",t.Phong="#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform float uShininess;\nuniform vec3 uLightDirection;\n\nuniform vec4 uLightAmbient;\nuniform vec4 uLightDiffuse;\nuniform vec4 uLightSpecular;\n\nuniform vec4 uMaterialAmbient;\nuniform vec4 uMaterialDiffuse;\nuniform vec4 uMaterialSpecular;\n\nvarying vec3 vNormal;\nvarying vec3 vEyeVec;\n\nvoid main(){\n\n		\n        vec3 L= normalize(uLightDirection);\n        vec3 N= normalize(vNormal);\n        float lambertTerm=dot(N, -L);\n        \n        vec4 Ia= uLightAmbient*uMaterialAmbient;\n        \n        vec4 Id=vec4(0.0,0.0,0.0,1.0);\n        \n        vec4 Is=vec4(0.0,0.0,0.0,1.0);\n        \n        if(lambertTerm>0.0)\n        {\n            Id=uLightDiffuse*uMaterialDiffuse*lambertTerm;\n            \n            vec3 E= normalize(vEyeVec);\n            vec3 R= reflect(L, N);\n            float specular=pow(max(dot(R,E),0.0), uShininess);\n            Is=uLightSpecular*uMaterialSpecular*specular;\n        }\n        \n        vec4 finalColor=Ia+Id+Is;\n        finalColor.a=1.0;\n    \n        gl_FragColor =finalColor;\n        \n}\n\n\n",t}();t.Fragment=e;var i=function(){function t(){}return t.Particle="attribute vec3 a_position;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uPointSize;\n\nvoid main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(a_position.xyz, 1.0);\n    gl_PointSize = uPointSize;\n}",t.Phong="attribute vec3 a_position;\nattribute vec3 a_normal;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uNMatrix;\n\n\nvarying vec3 vNormal;\nvarying vec3 vEyeVec;\n\nvoid main(){\n\n    vec4 vertex = uMVMatrix * vec4(a_position, 1.0);\n	vNormal = vec3(uNMatrix * vec4(a_normal, 1.0));\n	vEyeVec=-vec3(vertex.xyz);   \n	gl_Position =uPMatrix * vertex;\n\n}\n\n\n",t}();t.Vertex=i}(c=t.Shaders||(t.Shaders={}));var f=function(t){function e(e,i,n,r){t.call(this,e),this._frequency=i,this._interval_id=null,this._callback=r}return __extends(e,t),e.prototype.onFrame=function(){if(e.ElapseTime=i.nowInMilliseconds(),!(e.ElapseTime<5)){for(var t=Math.floor(e.ElapseTime/this._frequency);t>0&&e.Count!=this._times;)this._callback(),t--,e.Count++;e.Count===this._times&&this.stop()}},e.prototype.start=function(){this._intime=i.nowInMilliseconds(),this._interval_id=setInterval(this.onFrame,this._frequency/1e3)},e.prototype.stop=function(){this._interval_id&&clearInterval(this._interval_id)},e.prototype.beginDraw=function(){},e.prototype.endDraw=function(){},e.Count=0,e}(a);t.AnimationEntity=f;var h=function(t){function e(e,i,n,r){t.call(this,e),this._material=null,this._texture=null,this._buffers=null,this._meshfile=i||null,this._materialfile=n||null,this._texturefile=r||null}return __extends(e,t),e.prototype.loadBuffers=function(t,e){this._buffers=new u.MeshBuffers(this.graphID),this._buffers.onload=e,this._buffers.src=t},e.prototype.loadTexture=function(t,e){this._texture=new u.MeshTexture(this.graphID),this._texture.onload=e,this._texture.src=t},Object.defineProperty(e.prototype,"material",{set:function(t){this._material=t},enumerable:!0,configurable:!0}),e.prototype.loadMaterial=function(t,e){this._material=new u.MeshMaterial(this.graphID),this._material.onload=e,this._material.src=t},e.prototype.loadMesh=function(t){var e=this,i=this;async.waterfall([function(t){return i._meshfile?(console.log("Loading Buffers"),void i.loadBuffers(i._meshfile,function(){console.log("Loaded Buffers"),t()})):t()},function(t){return e._texturefile?(console.log("Loading Texture"),void i.loadTexture(i._texturefile,function(){console.log("Loaded Texture"),t()})):t()},function(t){return i._materialfile?(console.log("Loading Material"),void i.loadMaterial(i._materialfile,function(){console.log("Loaded Material"),t()})):t()}],function(e){return e?console.log(e):void(t&&t())})},e.prototype.loadMeshByObject=function(t){this._buffers=new u.MeshBuffers(this.graphID),this._buffers.createBuffers(t)},e.prototype.loadMaterialByObject=function(t){this._material=new u.MeshMaterial(this.graphID),t.ambient&&(this._material.ambient=t.ambient),t.specular&&(this._material.specular=t.specular),t.diffuse&&(this._material.diffuse=t.diffuse),t.shininess&&(this._material.shininess=t.shininess)},e.prototype.setMaterialUniforms=function(){if(this._material){var t=this.gl;if(this._material.ambient){var e=this.getUniform("uMaterialAmbient");e&&t.uniform4fv(e,this._material.ambient)}if(this._material.diffuse){var i=this.getUniform("uMaterialDiffuse");i&&t.uniform4fv(i,this._material.diffuse)}if(this._material.specular){var n=this.getUniform("uMaterialSpecular");n&&t.uniform4fv(n,this._material.specular)}if(this._material.shininess){var r=this.getUniform("uShininess");r&&t.uniform1f(r,this._material.shininess)}}},e.prototype.beginDraw=function(){var t=this.gl;this.setMaterialUniforms(),t.bindBuffer(t.ARRAY_BUFFER,this._buffers.vbo),r.enableAttrib(this.graphID,"a_position"),t.bindBuffer(t.ARRAY_BUFFER,this._buffers.nbo),r.enableAttrib(this.graphID,"a_normal");var e=this._buffers.ivbo;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.drawElements(t.TRIANGLES,e.numItems,t.UNSIGNED_SHORT,0)},e.prototype.endDraw=function(){var t=this.gl;r.disableAttrib(this.graphID,"a_position"),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},e}(a);t.MeshEntity=h;var l=function(t){function e(e,i,n,r){t.call(this,e),this._matrix=mat4.create(),this._position=i||vec3.create(),this._size=n||vec3.create([1,1,1]),this._rotation=r||{angle:0,axis:vec3.create()}}return __extends(e,t),e.prototype.identity=function(){mat4.identity(this._matrix)},e.prototype.setMatrix=function(t){this._matrix=t},e.prototype.transpose=function(){mat4.transpose(this._matrix,this._matrix)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),e.prototype.setAbsolutePosition=function(t,e,i){this._position=[t,e,i]},e.prototype.translate=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._position,r=vec3.create([t,e,i]);vec3.add(n,r,this._position)},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e,i){this._size=[t,e,i]},e.prototype.scale=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._size,r=vec3.create([t,e,i]);vec3.add(n,r,this._size)},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!0,configurable:!0}),e.prototype.setRotation=function(t,e){t&&(this._rotation.angle=t),e&&(this._rotation.axis=e)},e.prototype.setAngle=function(t){this._rotation.angle=t},e.prototype.setAxis=function(t){this._rotation.axis=t},e.prototype.rotateAngle=function(t){void 0===t&&(t=0),this._rotation.angle+=t},e.prototype.moveAxis=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._rotation.axis,r=vec3.create([t,e,i]);vec3.add(n,r,this._rotation.axis)},e.prototype.beginDraw=function(t){if(t.push(),t.ModelView(),this._matrix=t.mvMatrix,void 0!=this._position&&mat4.translate(this._matrix,this._position),void 0!=this._size&&mat4.scale(this._matrix,this._size),void 0!=this._rotation){var e=this._rotation.angle*Math.PI/180;mat4.rotate(this._matrix,e,this._rotation.axis)}t.setUp()},e.prototype.endDraw=function(t){t.pop()},e}(a);t.TransformEntity=l;var p=function(t){function e(e,i,n,r,o,a,s){t.call(this,e),this._ambient=i?vec4.create(i):null,this._diffuse=n?vec4.create(n):null,this._position=r?vec4.create(r):null,this._specular=o?vec4.create(o):null,this._direction=a?vec3.create(a):null,this._cutoff=s}return __extends(e,t),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){this._ambient=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){this._diffuse=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){this._specular=i.normalizeNaN(vec4.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._diffuse},set:function(t){this._position=i.normalizeNaN(vec3.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=i.normalizeNaN(vec3.create(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cutOff",{get:function(){return this._cutoff},set:function(t){this._cutoff=t},enumerable:!0,configurable:!0}),e.prototype.beginDraw=function(){var t=this.gl;if(this._ambient){var e=this.getUniform("uLightAmbient");e&&t.uniform4fv(e,this._ambient)}if(this._diffuse){var i=this.getUniform("uLightDiffuse");i&&t.uniform4fv(i,this._diffuse)}if(this._specular){var n=this.getUniform("uLightSpecular");n&&t.uniform4fv(n,this._specular)}if(this._position){var r=this.getUniform("uLightPosition");r&&t.uniform3fv(r,this._position)}if(this._direction){var o=this.getUniform("uLightDirection");o&&t.uniform3fv(o,this._direction)}},e.prototype.endDraw=function(){},e}(a);t.LightEntity=p;var d=function(t){function e(e,i){t.call(this,e),this._value=i}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),e.prototype.beginDraw=function(){var t=this.gl,e=this.getUniform("uMaterialDiffuse");e&&t.uniform4fv(e,this._value)},e.prototype.endDraw=function(){},e}(a);t.DiffuseEntity=d;var v=function(t){function e(e,i){t.call(this,e),this._pointSize=i||1,this._buffer=null}return __extends(e,t),e.prototype.configure=function(t){var e=this.gl;this._buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._numItems=t.length},e.prototype.update=function(t){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this._buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._numItems=t.length},Object.defineProperty(e.prototype,"pointSize",{set:function(t){this._pointSize=t},enumerable:!0,configurable:!0}),e.prototype.beginDraw=function(){var t=this.gl,e=this.getUniform("uPointSize");e&&t.uniform1f(e,this._pointSize),t.bindBuffer(t.ARRAY_BUFFER,this._buffer),r.enableAttrib(this.graphID,"a_position"),t.drawArrays(t.POINTS,0,this._numItems/3)},e.prototype.endDraw=function(){var t=this.gl;r.disableAttrib(this.graphID,"a_position"),t.bindBuffer(t.ARRAY_BUFFER,null)},e}(a);t.ParticleEntity=v;var b=function(t){function e(e,i){t.call(this,e),this._type=i||n.ORBITING,this._cmatrix=mat4.create(),mat4.identity(this._cmatrix),this._up=vec3.create(),this._right=vec3.create(),this._normal=vec3.create(),this._position=vec3.create(),this._azimuth=0,this._elevation=0,this._steps=0}return __extends(e,t),Object.defineProperty(e.prototype,"type",{set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"azimuth",{get:function(){return this._azimuth},set:function(t){var e=t-this._azimuth;this.changeAzimuth(e)},enumerable:!0,configurable:!0}),e.prototype.changeAzimuth=function(t){this._azimuth+=t,(this._azimuth>360||this._azimuth<-360)&&(this._azimuth=this._azimuth%360)},Object.defineProperty(e.prototype,"elevation",{get:function(){return this._elevation},set:function(t){var e=t-this._elevation;this.changeElevation(e)},enumerable:!0,configurable:!0}),e.prototype.changeElevation=function(t){this._elevation+=t,(this._elevation>360||this._elevation<-360)&&(this._elevation=this._elevation%360)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this._steps},set:function(t){var e=vec3.create(),i=vec3.create();e=this.position;var r=t-this._steps;vec3.normalize(this._normal,i);var o=vec3.create();this._type===n.TRACKING?(o[0]=e[0]-r*i[0],o[1]=e[1]-r*i[1],o[2]=e[2]-r*i[2]):(o[0]=e[0],o[1]=e[1],o[2]=e[2]-r),this.position=o,this._steps=t},enumerable:!0,configurable:!0}),e.prototype.calculateOrientation=function(){var t=this._cmatrix;mat4.multiplyVec4(t,[1,0,0,0],this._right),mat4.multiplyVec4(t,[0,1,0,0],this._up),mat4.multiplyVec4(t,[0,0,1,0],this._normal)},e.prototype.beginDraw=function(){mat4.identity(this._cmatrix),this.calculateOrientation(),this._type===n.TRACKING?(mat4.translate(this._cmatrix,this._position),mat4.rotateY(this._cmatrix,this._azimuth*Math.PI/180),mat4.rotateX(this._cmatrix,this._elevation*Math.PI/180)):(mat4.rotateY(this._cmatrix,this._azimuth*Math.PI/180),mat4.rotateX(this._cmatrix,this._elevation*Math.PI/180),mat4.translate(this._cmatrix,this._position)),this.calculateOrientation(),this._type===n.TRACKING&&mat4.multiplyVec4(m,[0,0,0,1],this._position)},Object.defineProperty(e.prototype,"modelView",{get:function(){var t=mat4.create();return mat4.inverse(this._cmatrix,t),t},enumerable:!0,configurable:!0}),e.prototype.endDraw=function(){},e}(a);t.CameraEntity=b;var g=function(){function t(t,e,n){this._parentNode=t,this._parentNode&&this._parentNode.addChildNode(this),this._childNodes=[],this._type=e,this._oid=i.uuid(this._type||this.constructor.name),this._entity=n}return Object.defineProperty(t.prototype,"oid",{get:function(){return this._oid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(t){this._entity=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),t.prototype.addChildNode=function(t){this._childNodes.push(t)},t.prototype.removeChildNode=function(t){var e=this.indexOf(t);e>-1&&this._childNodes.splice(e,1)},t.prototype.getChildNodeByIndex=function(t){return this._childNodes[t]||void 0},t.prototype.existsChildNode=function(t){return void 0!==this._childNodes[t]},t.prototype["delete"]=function(){this._parentNode.removeChildNode(this)},t.prototype.createChildNode=function(e,i){return new t(this,e,i)},t.prototype.isRoot=function(){return void 0===this._parentNode},t.prototype.indexOf=function(t){var e=t.oid;return _.findIndex(this._childNodes,function(t){return t.oid===e})},t.prototype.indexInParent=function(){var t=-1;return this.isRoot()||(t=this._parentNode.indexOf(this)),t},t.prototype.hasSibling=function(t){var e=!1;if(!this.isRoot()){var i=this._parentNode.indexOf(this);i>-1&&(t?this._parentNode.getChildNodeByIndex(i-1)&&(e=!0):this._parentNode.getChildNodeByIndex(i+1)&&(e=!0))}return e},t.prototype.nextSibling=function(){var t=null;if(!this.isRoot()&&this.hasSibling()){var e=this._parentNode.indexOf(this);t=this._parentNode.getChildNodeByIndex(e+1)}return t},t.prototype.previousSibling=function(){var t=null;if(!this.isRoot()&&this.hasSibling(!0)){var e=this._parentNode.indexOf(this);t=this._parentNode.getChildNodeByIndex(e-1)}return t},t.prototype.firstChild=function(){return this.getChildNodeByIndex(0)},t.prototype.lastChild=function(){return this.getChildNodeByIndex(this._childNodes.length-1)},t.prototype.removeChildNodes=function(){this._childNodes=[]},t.prototype.draw=function(t){this._entity&&this._entity.beginDraw(t);for(var e=0;e<this._childNodes.length;e++){var i=this._childNodes[e];i.draw(t)}this._entity&&this._entity.endDraw(t)},t}();t.NodeElement=g;var y=function(t){function e(){var e=i.uuid();t.call(this,e),this._oid=e,this._scene=new g(void 0,"Scene"),this._matrixStack=new s(this._oid),this._loaderBuffer=[],this._isDrawing=!1,r.createView(this._oid)}return __extends(e,t),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDrawing",{get:function(){return this._isDrawing},enumerable:!0,configurable:!0}),e.prototype.Environment=function(){var t=this.gl;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.clearColor(0,0,0,1),t.clearDepth(1)},e.prototype.draw=function(){var t=this.gl;this._isDrawing=!0,t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this._scene.draw(this._matrixStack),this._isDrawing=!1},e.prototype.createMainChildNode=function(t,e){return this._scene.createChildNode(t,e)},e.prototype.removeMainChildNode=function(t){this._scene.removeChildNode(t)},Object.defineProperty(e.prototype,"oid",{get:function(){return this._oid},enumerable:!0,configurable:!0}),e.prototype.setContext=function(t){r.setCanvasToContext(this.oid,t)},e.prototype.Program=function(t){t=t||"Phong",r.createProgram(this._oid,{fragment:c.Fragment[t],vertex:c.Vertex[t]})},e.prototype.createMesh=function(t){var e=new h(this.oid);return t.mesh&&e.loadMeshByObject(t.mesh),t.material&&e.loadMaterialByObject(t.material),e},e.prototype.createDiffuse=function(t){return new d(this.oid,t)},e.prototype.createMeshByLoader=function(t){var e=new h(this.oid,t.mesh,t.material,t.texture);return this._loaderBuffer.push(e),e},e.prototype.createTransform=function(t,e,i){return new l(this.oid,t,e,i)},e.prototype.createLight=function(t){return new p(this.oid,t.ambient,t.diffuse,t.position,t.specular,t.direction,t.cutoff)},e.prototype.createCamera=function(t){return new b(this.oid,t)},e.prototype.createParticle=function(t){return new v(this.oid,t)},Object.defineProperty(e.prototype,"MainCamera",{set:function(t){this._matrixStack.MainCamera=t},enumerable:!0,configurable:!0}),e.prototype.startLoader=function(t){async.eachSeries(this._loaderBuffer,function(t,e){t.loadMesh(function(){console.log(t),e()})},t)},e.prototype.configure=function(t){var i=this;t=t||{},i.Environment(),i.Program(t.typeShader),r.setAttributeLocations(i._oid,e.ATTRIBUTES),r.setUniformLocations(i._oid,e.UNIFORMS),this._matrixStack.init()},e.prototype.configureWithLoader=function(t){var e=this;e.configure(),e.startLoader(t)},e.UNIFORMS=["uPMatrix","uMVMatrix","uNMatrix","uLightDirection","uLightAmbient","uMaterialAmbient","uLightDiffuse","uMaterialDiffuse","uLightSpecular","uMaterialSpecular","uShininess","uPointSize"],e.ATTRIBUTES=["a_position","a_normal"],e}(o);t.SceneGraph=y}(Blaze||(Blaze={}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsYXplLmpzIl0sIm5hbWVzIjpbIl9fZXh0ZW5kcyIsInRoaXMiLCJkIiwiYiIsIl9fIiwiY29uc3RydWN0b3IiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJCbGF6ZSIsIldlYkdMVXRpbHMiLCJnZXRHTENvbnRleHQiLCJjYW52YXMiLCJjdHgiLCJuYW1lcyIsImkiLCJsZW5ndGgiLCJnZXRDb250ZXh0IiwiZSIsImFsZXJ0Iiwidmlld3BvcnRXaWR0aCIsIndpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJoZWlnaHQiLCJjcmVhdGVCdWZmZXIiLCJnbCIsImRhdGEiLCJpczJEIiwidHlwZV9kcmF3IiwiYnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsIkJVRkZFUl9EUkFXIiwiU1RBVElDIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiRFlOQU1JQyIsIkRZTkFNSUNfRFJBVyIsIlNUUkVBTSIsIlNUUkVBTV9EUkFXIiwiaXRlbVNpemUiLCJudW1JdGVtcyIsImNyZWF0ZUluZGV4QnVmZmVyIiwiaW5kZXhCdWZmZXIiLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsIlVpbnQxNkFycmF5IiwiY3JlYXRlVGV4dHVyZSIsInRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiTElORUFSIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTElORUFSX01JUE1BUF9ORUFSRVNUIiwiZ2VuZXJhdGVNaXBtYXAiLCJjcmVhdGVTaGFkZXIiLCJ0eXBlIiwic2hhZGVyU291cmNlIiwic2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiY29uc29sZSIsImxvZyIsImdldFNoYWRlckluZm9Mb2ciLCJjcmVhdGVQcm9ncmFtIiwic2hhZGVycyIsImZyYWdtZW50U2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwiZnJhZ21lbnQiLCJ2ZXJ0ZXhTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwidmVydGV4IiwicHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2VQcm9ncmFtIiwidXRpbHMiLCJzNCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwidXVpZCIsIm5hbWUiLCJpZCIsIm5vcm1hbGl6ZU5hTiIsInZlYyIsIm1hcCIsImEiLCJOdW1iZXIiLCJpc05hTiIsImxvYWQiLCJ1cmwiLCJjYWxsYmFjayIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVzcG9uc2VUZXh0Iiwic2VuZCIsImdldEV4dGVuc2lvbiIsInN0ciIsImVsZW1zIiwic3BsaXQiLCJub3dJbk1pbGxpc2Vjb25kcyIsIkRhdGUiLCJnZXRUaW1lIiwiZGVnVG9SYWQiLCJQSSIsImNhbGN1bGF0ZU5vcm1hbHMiLCJ2cyIsImluZCIsIngiLCJ5IiwieiIsIm5zIiwidjEiLCJ2MiIsIm5vcm1hbCIsImoiLCJubiIsImxlbiIsInNxcnQiLCJDQU1FUkFfVFlQRSIsIktldGNoIiwic2V0Q2FudmFzVG9Db250ZXh0Iiwia2V5IiwiY29udGV4dCIsInNldENvbnRleHQiLCJfdmlld3MiLCJzZXRQcm9ncmFtIiwiZ2V0UHJvZ3JhbSIsImNyZWF0ZVZpZXciLCJzZXRBdHRyaWJ1dGVMb2NhdGlvbnMiLCJhdHRyaWJzX25hbWVzIiwidmlldyIsInByZyIsImF0dHJpYnMiLCJyZWR1Y2UiLCJwcmV2IiwiYXR0ciIsImdldEF0dHJpYkxvY2F0aW9uIiwiZ2V0QXR0cmliIiwidmlld19rZXkiLCJhdHRyX2tleSIsImdldFVuaWZvcm0iLCJ1bmlmb3JtX2tleSIsInVuaWZvcm1zIiwic2V0VW5pZm9ybUxvY2F0aW9ucyIsInVuaWZvcm1fbmFtZXMiLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJlbmFibGVBdHRyaWIiLCJwb2ludGVyIiwiaW5kZXgiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJzaXplIiwiRkxPQVQiLCJub3JtYWxpemVkIiwic3RyaWRlIiwib2Zmc2V0IiwiZGlzYWJsZUF0dHJpYiIsImRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInJlbmRlckxvb3AiLCJjYiIsInNldEludGVydmFsIiwiYWRkVGV4dHVyZSIsInRleHR1cmVfaWQiLCJ0ZXh0dXJlcyIsInB1c2giLCJhY3RpdmVUZXh0dXJlIiwiaW5kZXhPZiIsIlRFWFRVUkUwIiwidVNhbXBsZXIiLCJ1bmlmb3JtMWkiLCJSZW5kZXJhYmxlIiwiZ3JhcGhfaWQiLCJfZ3JhcGhfaWQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJncmFwaElEIiwiRW50aXR5IiwiX3N1cGVyIiwiY2FsbCIsImJlZ2luRHJhdyIsIm1hdHJpeFN0YWNrIiwiZW5kRHJhdyIsIk1hdHJpeFN0YWNrIiwiX3N0YWNrIiwiX212TWF0cml4IiwibWF0NCIsIl9wTWF0cml4IiwiX25NYXRyaXgiLCJjb3B5Iiwic2V0IiwicG9wIiwiTW9kZWxWaWV3IiwiX2NhbWVyYSIsIm1vZGVsVmlldyIsImlkZW50aXR5IiwiY2FtZXJhIiwiUGVyc3BlY3RpdmUiLCJwZXJzcGVjdGl2ZSIsIk5vcm1hbCIsImludmVyc2UiLCJ0cmFuc3Bvc2UiLCJpbml0Iiwic2V0VXAiLCJtdk1hdHJpeCIsInVuaWZvcm1NYXRyaXg0ZnYiLCJwTWF0cml4Iiwibk1hdHJpeCIsIlJlc291cmNlcyIsIk1lc2hCdWZmZXJzIiwiX29ubG9hZCIsInNyYyIsIl90aGlzIiwic2VsZiIsImV4dCIsIm9iaiIsInBhcnNlT0JKIiwicGFyc2VKU09OIiwiY3JlYXRlQnVmZmVycyIsIkpTT04iLCJwYXJzZSIsInYiLCJ2biIsInZ0IiwiaXYiLCJpbiIsIml0IiwibGluZXMiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiaXRlbSIsInJlcGxhY2UiLCJjb25jYXQiLCJzbGljZSIsInRlbXBJbmRleCIsInBhcnNlSW50IiwiXyIsImRlZmF1bHRzIiwiX3ZibyIsIl9uYm8iLCJfdGJvIiwiX2l2Ym8iLCJfaW5ibyIsIl9pdGJvIiwiTWVzaFRleHR1cmUiLCJfaW1hZ2UiLCJJbWFnZSIsIl9vaWQiLCJmaWxlbmFtZSIsIm9ubG9hZCIsImxvYWRUZXh0dXJlSW1hZ2UiLCJfdGV4dHVyZSIsIk1lc2hNYXRlcmlhbCIsImFtYmllbnQiLCJkaWZmdXNlIiwic3BlY3VsYXIiLCJzaGluaW5lc3MiLCJfYW1iaWVudCIsInZlYzQiLCJfZGlmZnVzZSIsIl9zcGVjdWxhciIsIl9zaGluaW5lc3MiLCJ0ZW1wIiwiS2EiLCJLZCIsIktzIiwiTnMiLCJrZXlzIiwibGluZSIsIlNoYWRlcnMiLCJGcmFnbWVudCIsIlBhcnRpY2xlIiwiUGhvbmciLCJWZXJ0ZXgiLCJBbmltYXRpb25FbnRpdHkiLCJmcmVxdWVuY3kiLCJ0aW1lcyIsIl9mcmVxdWVuY3kiLCJfaW50ZXJ2YWxfaWQiLCJfY2FsbGJhY2siLCJvbkZyYW1lIiwiRWxhcHNlVGltZSIsInN0ZXBzIiwiQ291bnQiLCJfdGltZXMiLCJzdG9wIiwic3RhcnQiLCJfaW50aW1lIiwiY2xlYXJJbnRlcnZhbCIsIk1lc2hFbnRpdHkiLCJtZXNoZmlsZSIsIm1hdGVyaWFsZmlsZSIsInRleHR1cmVmaWxlIiwiX21hdGVyaWFsIiwiX2J1ZmZlcnMiLCJfbWVzaGZpbGUiLCJfbWF0ZXJpYWxmaWxlIiwiX3RleHR1cmVmaWxlIiwibG9hZEJ1ZmZlcnMiLCJsb2FkVGV4dHVyZSIsImxvYWRNYXRlcmlhbCIsImxvYWRNZXNoIiwiYXN5bmMiLCJ3YXRlcmZhbGwiLCJuZXh0IiwiZXJyIiwibG9hZE1lc2hCeU9iamVjdCIsImxvYWRNYXRlcmlhbEJ5T2JqZWN0Iiwic2V0TWF0ZXJpYWxVbmlmb3JtcyIsInVNYXRlcmlhbEFtYmllbnQiLCJ1bmlmb3JtNGZ2IiwidU1hdGVyaWFsRGlmZnVzZSIsInVNYXRlcmlhbFNwZWN1bGFyIiwidVNoaW5pbmVzcyIsInVuaWZvcm0xZiIsInZibyIsIm5ibyIsIml2Ym8iLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJVTlNJR05FRF9TSE9SVCIsIlRyYW5zZm9ybUVudGl0eSIsInBvc2l0aW9uIiwicm90YXRpb24iLCJfbWF0cml4IiwiX3Bvc2l0aW9uIiwidmVjMyIsIl9zaXplIiwiX3JvdGF0aW9uIiwiYW5nbGUiLCJheGlzIiwic2V0TWF0cml4IiwibmV3X21hdHJpeCIsInNldEFic29sdXRlUG9zaXRpb24iLCJ0cmFuc2xhdGUiLCJvcGVyYW5kMSIsIm9wZXJhbmQyIiwiYWRkIiwic2V0U2l6ZSIsInNjYWxlIiwic2V0Um90YXRpb24iLCJzZXRBbmdsZSIsInNldEF4aXMiLCJyb3RhdGVBbmdsZSIsIm1vdmVBeGlzIiwicmFkIiwicm90YXRlIiwiTGlnaHRFbnRpdHkiLCJkaXJlY3Rpb24iLCJjdXRvZmYiLCJfZGlyZWN0aW9uIiwiX2N1dG9mZiIsInVMaWdodEFtYmllbnQiLCJ1TGlnaHREaWZmdXNlIiwidUxpZ2h0U3BlY3VsYXIiLCJ1TGlnaHRQb3NpdGlvbiIsInVuaWZvcm0zZnYiLCJ1RGlyZWN0aW9uIiwiRGlmZnVzZUVudGl0eSIsIl92YWx1ZSIsIlBhcnRpY2xlRW50aXR5IiwicG9pbnRTaXplIiwiX3BvaW50U2l6ZSIsIl9idWZmZXIiLCJjb25maWd1cmUiLCJfbnVtSXRlbXMiLCJ1cGRhdGUiLCJ1UG9pbnRTaXplIiwiZHJhd0FycmF5cyIsIlBPSU5UUyIsIkNhbWVyYUVudGl0eSIsIl90eXBlIiwiT1JCSVRJTkciLCJfY21hdHJpeCIsIl91cCIsIl9yaWdodCIsIl9ub3JtYWwiLCJfYXppbXV0aCIsIl9lbGV2YXRpb24iLCJfc3RlcHMiLCJwb3MiLCJheiIsInRlbXBfYXoiLCJjaGFuZ2VBemltdXRoIiwiZWwiLCJ0ZW1wX2VsIiwiY2hhbmdlRWxldmF0aW9uIiwibiIsInN0ZXAiLCJub3JtYWxpemUiLCJuZXdfcG9zaXRpb24iLCJUUkFDS0lORyIsImNhbGN1bGF0ZU9yaWVudGF0aW9uIiwibSIsIm11bHRpcGx5VmVjNCIsInJvdGF0ZVkiLCJyb3RhdGVYIiwiTm9kZUVsZW1lbnQiLCJwYXJlbnQiLCJlbnRpdHkiLCJfcGFyZW50Tm9kZSIsImFkZENoaWxkTm9kZSIsIl9jaGlsZE5vZGVzIiwiX2VudGl0eSIsImNoaWxkIiwicmVtb3ZlQ2hpbGROb2RlIiwic3BsaWNlIiwiZ2V0Q2hpbGROb2RlQnlJbmRleCIsImV4aXN0c0NoaWxkTm9kZSIsImNyZWF0ZUNoaWxkTm9kZSIsImlzUm9vdCIsIm9pZCIsImZpbmRJbmRleCIsInMiLCJpbmRleEluUGFyZW50IiwiaGFzU2libGluZyIsIl9oYXZlIiwibmV4dFNpYmxpbmciLCJzaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIiwiZmlyc3RDaGlsZCIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkTm9kZXMiLCJkcmF3IiwiU2NlbmVHcmFwaCIsIl9zY2VuZSIsIl9tYXRyaXhTdGFjayIsIl9sb2FkZXJCdWZmZXIiLCJfaXNEcmF3aW5nIiwiRW52aXJvbm1lbnQiLCJlbmFibGUiLCJERVBUSF9URVNUIiwiZGVwdGhGdW5jIiwiTEVRVUFMIiwiQkxFTkQiLCJibGVuZEZ1bmMiLCJTUkNfQUxQSEEiLCJPTkVfTUlOVVNfU1JDX0FMUEhBIiwicGl4ZWxTdG9yZWkiLCJVTlBBQ0tfRkxJUF9ZX1dFQkdMIiwiY2xlYXJDb2xvciIsImNsZWFyRGVwdGgiLCJ2aWV3cG9ydCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJjcmVhdGVNYWluQ2hpbGROb2RlIiwicmVtb3ZlTWFpbkNoaWxkTm9kZSIsIm5vZGUiLCJQcm9ncmFtIiwiY3JlYXRlTWVzaCIsImNvbmZpZyIsIm1lc2hFbnRpdHkiLCJtZXNoIiwibWF0ZXJpYWwiLCJjcmVhdGVEaWZmdXNlIiwiY3JlYXRlTWVzaEJ5TG9hZGVyIiwiY3JlYXRlVHJhbnNmb3JtIiwiY3JlYXRlTGlnaHQiLCJjcmVhdGVDYW1lcmEiLCJjcmVhdGVQYXJ0aWNsZSIsIk1haW5DYW1lcmEiLCJzdGFydExvYWRlciIsImVhY2hTZXJpZXMiLCJ0eXBlU2hhZGVyIiwiQVRUUklCVVRFUyIsIlVOSUZPUk1TIiwiY29uZmlndXJlV2l0aExvYWRlciJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsV0FBYUMsTUFBUUEsS0FBS0QsV0FBYyxTQUFVRSxFQUFHQyxHQUVyRCxRQUFTQyxLQUFPSCxLQUFLSSxZQUFjSCxFQURuQyxJQUFLLEdBQUlJLEtBQUtILEdBQU9BLEVBQUVJLGVBQWVELEtBQUlKLEVBQUVJLEdBQUtILEVBQUVHLEdBRW5ESixHQUFFTSxVQUFrQixPQUFOTCxFQUFhTSxPQUFPQyxPQUFPUCxJQUFNQyxFQUFHSSxVQUFZTCxFQUFFSyxVQUFXLEdBQUlKLEtBRS9FTyxPQUNKLFNBQVdBLEdBQ1AsR0FBSUMsSUFDSixTQUFXQSxHQUNQLFFBQVNDLEdBQWFDLEdBR2xCLElBQUssR0FGREMsR0FBTSxLQUNOQyxHQUFTLFFBQVMscUJBQXNCLFlBQWEsYUFDaERDLEVBQUksRUFBR0EsRUFBSUQsRUFBTUUsU0FBVUQsRUFBRyxDQUNuQyxJQUNJRixFQUFNRCxFQUFPSyxXQUFXSCxFQUFNQyxJQUVsQyxNQUFPRyxJQUNQLEdBQUlMLEVBQ0EsTUFHUixNQUFZLFFBQVJBLEdBQ0FNLE1BQU0sOEJBQ0MsT0FHUE4sRUFBSU8sY0FBZ0JSLEVBQU9TLE1BQzNCUixFQUFJUyxlQUFpQlYsRUFBT1csT0FDckJWLEdBVWYsUUFBU1csR0FBYUMsRUFBSUMsRUFBTUMsRUFBTUMsR0FDbEMsR0FBSUMsR0FBU0osRUFBR0QsY0FFaEIsUUFEQUMsRUFBR0ssV0FBV0wsRUFBR00sYUFBY0YsR0FDdkJELEdBQ0osSUFBS2xCLEdBQVdzQixZQUFZQyxPQUN4QlIsRUFBR1MsV0FBV1QsRUFBR00sYUFB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WUFDbEQzVixFQUFNd0Isb0JBQW9CdUUsRUFBS2tDLEtBQU1pTCxFQUFXMEMsVUFDaERuZSxLQUFLMmIsYUFBYWhPLFFBRXRCOE4sRUFBV2xiLFVBQVU2ZCxvQkFBc0IsU0FBVXJULEdBQ2pELEdBQUl1RCxHQUFPdE8sSUFDWHNPLEdBQUt1SixZQUNMdkosRUFBS3lQLFlBQVloVCxJQUVyQjBRLEVBQVcwQyxVQUNQLFdBQ0EsWUFDQSxXQUNBLGtCQUNBLGdCQUNBLG1CQUNBLGdCQUNBLG1CQUNBLGlCQUNBLG9CQUNBLGFBQ0EsY0FFSjFDLEVBQVd5QyxZQUFjLGFBQWMsWUFDaEN6QyxHQUNUL1AsRUFDRmhMLEdBQU0rYSxXQUFhQSxHQUNwQi9hLFFBQVVBIiwiZmlsZSI6ImJsYXplLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxudmFyIEJsYXplO1xyXG4oZnVuY3Rpb24gKEJsYXplKSB7XHJcbiAgICB2YXIgV2ViR0xVdGlscztcclxuICAgIChmdW5jdGlvbiAoV2ViR0xVdGlscykge1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEdMQ29udGV4dChjYW52YXMpIHtcclxuICAgICAgICAgICAgdmFyIGN0eCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IFtcIndlYmdsXCIsIFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsIFwid2Via2l0LTNkXCIsIFwibW96LXdlYmdsXCJdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIGlmIChjdHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3R4ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBpbml0aWFsaXNlIFdlYkdMXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHgudmlld3BvcnRXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGN0eC52aWV3cG9ydEhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFdlYkdMVXRpbHMuZ2V0R0xDb250ZXh0ID0gZ2V0R0xDb250ZXh0O1xyXG4gICAgICAgIChmdW5jdGlvbiAoQlVGRkVSX0RSQVcpIHtcclxuICAgICAgICAgICAgQlVGRkVSX0RSQVdbQlVGRkVSX0RSQVdbXCJTVEFUSUNcIl0gPSAwXSA9IFwiU1RBVElDXCI7XHJcbiAgICAgICAgICAgIEJVRkZFUl9EUkFXW0JVRkZFUl9EUkFXW1wiU1RSRUFNXCJdID0gMV0gPSBcIlNUUkVBTVwiO1xyXG4gICAgICAgICAgICBCVUZGRVJfRFJBV1tCVUZGRVJfRFJBV1tcIkRZTkFNSUNcIl0gPSAyXSA9IFwiRFlOQU1JQ1wiO1xyXG4gICAgICAgIH0pKFdlYkdMVXRpbHMuQlVGRkVSX0RSQVcgfHwgKFdlYkdMVXRpbHMuQlVGRkVSX0RSQVcgPSB7fSkpO1xyXG4gICAgICAgIHZhciBCVUZGRVJfRFJBVyA9IFdlYkdMVXRpbHMuQlVGRkVSX0RSQVc7XHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGdsLCBkYXRhLCBpczJELCB0eXBlX2RyYXcpIHtcclxuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKTtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlX2RyYXcpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgV2ViR0xVdGlscy5CVUZGRVJfRFJBVy5TVEFUSUM6XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2ViR0xVdGlscy5CVUZGRVJfRFJBVy5EWU5BTUlDOlxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KGRhdGEpLCBnbC5EWU5BTUlDX0RSQVcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXZWJHTFV0aWxzLkJVRkZFUl9EUkFXLlNUUkVBTTpcclxuICAgICAgICAgICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuU1RSRUFNX0RSQVcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChpczJEKSB7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIuaXRlbVNpemUgPSAyO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyLm51bUl0ZW1zID0gZGF0YS5sZW5ndGggLyAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyLml0ZW1TaXplID0gMztcclxuICAgICAgICAgICAgICAgIGJ1ZmZlci5udW1JdGVtcyA9IGRhdGEubGVuZ3RoIC8gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBXZWJHTFV0aWxzLmNyZWF0ZUJ1ZmZlciA9IGNyZWF0ZUJ1ZmZlcjtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbmRleEJ1ZmZlcihnbCwgZGF0YSwgdHlwZV9kcmF3KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUik7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGluZGV4QnVmZmVyKTtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlX2RyYXcpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgV2ViR0xVdGlscy5CVUZGRVJfRFJBVy5TVEFUSUM6XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IFVpbnQxNkFycmF5KGRhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdlYkdMVXRpbHMuQlVGRkVSX0RSQVcuRFlOQU1JQzpcclxuICAgICAgICAgICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDE2QXJyYXkoZGF0YSksIGdsLkRZTkFNSUNfRFJBVyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdlYkdMVXRpbHMuQlVGRkVSX0RSQVcuU1RSRUFNOlxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBVaW50MTZBcnJheShkYXRhKSwgZ2wuU1RSRUFNX0RSQVcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IFVpbnQxNkFycmF5KGRhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGluZGV4QnVmZmVyLml0ZW1TaXplID0gMTtcclxuICAgICAgICAgICAgaW5kZXhCdWZmZXIubnVtSXRlbXMgPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4QnVmZmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBXZWJHTFV0aWxzLmNyZWF0ZUluZGV4QnVmZmVyID0gY3JlYXRlSW5kZXhCdWZmZXI7XHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVGV4dHVyZShnbCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XHJcbiAgICAgICAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgZGF0YSk7XHJcbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xyXG4gICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSX01JUE1BUF9ORUFSRVNUKTtcclxuICAgICAgICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgV2ViR0xVdGlscy5jcmVhdGVUZXh0dXJlID0gY3JlYXRlVGV4dHVyZTtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNoYWRlclNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gICAgICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzaGFkZXJTb3VyY2UpO1xyXG4gICAgICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgV2ViR0xVdGlscy5jcmVhdGVTaGFkZXIgPSBjcmVhdGVTaGFkZXI7XHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbCwgc2hhZGVycykge1xyXG4gICAgICAgICAgICB2YXIgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgc2hhZGVycy5mcmFnbWVudCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHNoYWRlcnMudmVydGV4KTtcclxuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgICAgICAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICAgICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcclxuICAgICAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFdlYkdMVXRpbHMuY3JlYXRlUHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW07XHJcbiAgICB9KShXZWJHTFV0aWxzID0gQmxhemUuV2ViR0xVdGlscyB8fCAoQmxhemUuV2ViR0xVdGlscyA9IHt9KSk7XHJcbiAgICB2YXIgdXRpbHM7XHJcbiAgICAoZnVuY3Rpb24gKHV0aWxzKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgICAgICAgICAgICAgLnRvU3RyaW5nKDE2KVxyXG4gICAgICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMuczQgPSBzNDtcclxuICAgICAgICBmdW5jdGlvbiB1dWlkKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gczQoKSArIHM0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lID8gbmFtZSArIGlkIDogaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0aWxzLnV1aWQgPSB1dWlkO1xyXG4gICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hTih2ZWMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZlYy5tYXAoZnVuY3Rpb24gKGEpIHsgaWYgKE51bWJlci5pc05hTihhKSlcclxuICAgICAgICAgICAgICAgIGEgPSAwOyByZXR1cm4gYTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0aWxzLm5vcm1hbGl6ZU5hTiA9IG5vcm1hbGl6ZU5hTjtcclxuICAgICAgICBmdW5jdGlvbiBsb2FkKHVybCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMubG9hZCA9IGxvYWQ7XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKHN0cikge1xyXG4gICAgICAgICAgICB2YXIgZWxlbXMgPSBzdHIuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbXNbZWxlbXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0aWxzLmdldEV4dGVuc2lvbiA9IGdldEV4dGVuc2lvbjtcclxuICAgICAgICBmdW5jdGlvbiBub3dJbk1pbGxpc2Vjb25kcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0aWxzLm5vd0luTWlsbGlzZWNvbmRzID0gbm93SW5NaWxsaXNlY29uZHM7XHJcbiAgICAgICAgZnVuY3Rpb24gZGVnVG9SYWQoZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZCAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0aWxzLmRlZ1RvUmFkID0gZGVnVG9SYWQ7XHJcbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlTm9ybWFscyh2cywgaW5kKSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICAgICAgdmFyIHkgPSAxO1xyXG4gICAgICAgICAgICB2YXIgeiA9IDI7XHJcbiAgICAgICAgICAgIHZhciBucyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBuc1tpXSA9IDAuMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZC5sZW5ndGg7IGkgPSBpICsgMykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYxID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgdjIgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBbXTtcclxuICAgICAgICAgICAgICAgIC8vcDEgLSBwMFxyXG4gICAgICAgICAgICAgICAgdjFbeF0gPSB2c1szICogaW5kW2kgKyAxXSArIHhdIC0gdnNbMyAqIGluZFtpXSArIHhdO1xyXG4gICAgICAgICAgICAgICAgdjFbeV0gPSB2c1szICogaW5kW2kgKyAxXSArIHldIC0gdnNbMyAqIGluZFtpXSArIHldO1xyXG4gICAgICAgICAgICAgICAgdjFbel0gPSB2c1szICogaW5kW2kgKyAxXSArIHpdIC0gdnNbMyAqIGluZFtpXSArIHpdO1xyXG4gICAgICAgICAgICAgICAgLy8gcDAgLSBwMVxyXG4gICAgICAgICAgICAgICAgdjJbeF0gPSB2c1szICogaW5kW2kgKyAyXSArIHhdIC0gdnNbMyAqIGluZFtpICsgMV0gKyB4XTtcclxuICAgICAgICAgICAgICAgIHYyW3ldID0gdnNbMyAqIGluZFtpICsgMl0gKyB5XSAtIHZzWzMgKiBpbmRbaSArIDFdICsgeV07XHJcbiAgICAgICAgICAgICAgICB2Mlt6XSA9IHZzWzMgKiBpbmRbaSArIDJdICsgel0gLSB2c1szICogaW5kW2kgKyAxXSArIHpdO1xyXG4gICAgICAgICAgICAgICAgLy9wMiAtIHAxXHJcbiAgICAgICAgICAgICAgICAvLyB2MVt4XSA9IHZzWzMqaW5kW2krMl0reF0gLSB2c1szKmluZFtpKzFdK3hdO1xyXG4gICAgICAgICAgICAgICAgLy8gdjFbeV0gPSB2c1szKmluZFtpKzJdK3ldIC0gdnNbMyppbmRbaSsxXSt5XTtcclxuICAgICAgICAgICAgICAgIC8vIHYxW3pdID0gdnNbMyppbmRbaSsyXSt6XSAtIHZzWzMqaW5kW2krMV0rel07XHJcbiAgICAgICAgICAgICAgICAvLyBwMCAtIHAxXHJcbiAgICAgICAgICAgICAgICAvLyB2Mlt4XSA9IHZzWzMqaW5kW2ldK3hdIC0gdnNbMyppbmRbaSsxXSt4XTtcclxuICAgICAgICAgICAgICAgIC8vIHYyW3ldID0gdnNbMyppbmRbaV0reV0gLSB2c1szKmluZFtpKzFdK3ldO1xyXG4gICAgICAgICAgICAgICAgLy8gdjJbel0gPSB2c1szKmluZFtpXSt6XSAtIHZzWzMqaW5kW2krMV0rel07XHJcbiAgICAgICAgICAgICAgICAvL2Nyb3NzIHByb2R1Y3QgYnkgU2FycnVzIFJ1bGVcclxuICAgICAgICAgICAgICAgIG5vcm1hbFt4XSA9IHYxW3ldICogdjJbel0gLSB2MVt6XSAqIHYyW3ldO1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsW3ldID0gdjFbel0gKiB2Mlt4XSAtIHYxW3hdICogdjJbel07XHJcbiAgICAgICAgICAgICAgICBub3JtYWxbel0gPSB2MVt4XSAqIHYyW3ldIC0gdjFbeV0gKiB2Mlt4XTtcclxuICAgICAgICAgICAgICAgIC8vIG5zWzMqaW5kW2ldK3hdICs9IG5vcm1hbFt4XTtcclxuICAgICAgICAgICAgICAgIC8vIG5zWzMqaW5kW2ldK3ldICs9IG5vcm1hbFt5XTtcclxuICAgICAgICAgICAgICAgIC8vIG5zWzMqaW5kW2ldK3pdICs9IG5vcm1hbFt6XTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnNbMyAqIGluZFtpICsgal0gKyB4XSA9IG5zWzMgKiBpbmRbaSArIGpdICsgeF0gKyBub3JtYWxbeF07XHJcbiAgICAgICAgICAgICAgICAgICAgbnNbMyAqIGluZFtpICsgal0gKyB5XSA9IG5zWzMgKiBpbmRbaSArIGpdICsgeV0gKyBub3JtYWxbeV07XHJcbiAgICAgICAgICAgICAgICAgICAgbnNbMyAqIGluZFtpICsgal0gKyB6XSA9IG5zWzMgKiBpbmRbaSArIGpdICsgel0gKyBub3JtYWxbel07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9ub3JtYWxpemUgdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZzLmxlbmd0aDsgaSA9IGkgKyAzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm4gPSBbXTtcclxuICAgICAgICAgICAgICAgIG5uW3hdID0gbnNbaSArIHhdO1xyXG4gICAgICAgICAgICAgICAgbm5beV0gPSBuc1tpICsgeV07XHJcbiAgICAgICAgICAgICAgICBublt6XSA9IG5zW2kgKyB6XTtcclxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBNYXRoLnNxcnQoKG5uW3hdICogbm5beF0pICsgKG5uW3ldICogbm5beV0pICsgKG5uW3pdICogbm5bel0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZW4gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBsZW4gPSAwLjAwMDAxO1xyXG4gICAgICAgICAgICAgICAgbm5beF0gPSBublt4XSAvIGxlbjtcclxuICAgICAgICAgICAgICAgIG5uW3ldID0gbm5beV0gLyBsZW47XHJcbiAgICAgICAgICAgICAgICBublt6XSA9IG5uW3pdIC8gbGVuO1xyXG4gICAgICAgICAgICAgICAgbnNbaSArIHhdID0gbm5beF07XHJcbiAgICAgICAgICAgICAgICBuc1tpICsgeV0gPSBublt5XTtcclxuICAgICAgICAgICAgICAgIG5zW2kgKyB6XSA9IG5uW3pdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBucztcclxuICAgICAgICB9XHJcbiAgICAgICAgdXRpbHMuY2FsY3VsYXRlTm9ybWFscyA9IGNhbGN1bGF0ZU5vcm1hbHM7XHJcbiAgICB9KSh1dGlscyA9IEJsYXplLnV0aWxzIHx8IChCbGF6ZS51dGlscyA9IHt9KSk7XHJcbiAgICAoZnVuY3Rpb24gKENBTUVSQV9UWVBFKSB7XHJcbiAgICAgICAgQ0FNRVJBX1RZUEVbQ0FNRVJBX1RZUEVbXCJPUkJJVElOR1wiXSA9IDBdID0gXCJPUkJJVElOR1wiO1xyXG4gICAgICAgIENBTUVSQV9UWVBFW0NBTUVSQV9UWVBFW1wiVFJBQ0tJTkdcIl0gPSAxXSA9IFwiVFJBQ0tJTkdcIjtcclxuICAgIH0pKEJsYXplLkNBTUVSQV9UWVBFIHx8IChCbGF6ZS5DQU1FUkFfVFlQRSA9IHt9KSk7XHJcbiAgICB2YXIgQ0FNRVJBX1RZUEUgPSBCbGF6ZS5DQU1FUkFfVFlQRTtcclxuICAgIHZhciBLZXRjaCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gS2V0Y2goKSB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEtldGNoLnNldENhbnZhc1RvQ29udGV4dCA9IGZ1bmN0aW9uIChrZXksIGNhbnZhcykge1xyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IFdlYkdMVXRpbHMuZ2V0R0xDb250ZXh0KGNhbnZhcyk7XHJcbiAgICAgICAgICAgIEtldGNoLnNldENvbnRleHQoa2V5LCBjb250ZXh0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLnNldENvbnRleHQgPSBmdW5jdGlvbiAoa2V5LCBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIEtldGNoLl92aWV3c1trZXldLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guZ2V0Q29udGV4dCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtldGNoLl92aWV3c1trZXldLmNvbnRleHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5jcmVhdGVQcm9ncmFtID0gZnVuY3Rpb24gKGtleSwgc2hhZGVycykge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSBLZXRjaC5nZXRDb250ZXh0KGtleSk7XHJcbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gV2ViR0xVdGlscy5jcmVhdGVQcm9ncmFtKGdsLCBzaGFkZXJzKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0UHJvZ3JhbShrZXksIHByb2dyYW0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guc2V0UHJvZ3JhbSA9IGZ1bmN0aW9uIChrZXksIHByb2dyYW0pIHtcclxuICAgICAgICAgICAgS2V0Y2guX3ZpZXdzW2tleV0ucHJvZ3JhbSA9IHByb2dyYW07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5nZXRQcm9ncmFtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guX3ZpZXdzW2tleV0ucHJvZ3JhbTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmNyZWF0ZVZpZXcgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIEtldGNoLl92aWV3c1trZXldID0ge307XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5zZXRBdHRyaWJ1dGVMb2NhdGlvbnMgPSBmdW5jdGlvbiAoa2V5LCBhdHRyaWJzX25hbWVzKSB7XHJcbiAgICAgICAgICAgIHZhciB2aWV3ID0gS2V0Y2guX3ZpZXdzW2tleV07XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHZpZXcuY29udGV4dDtcclxuICAgICAgICAgICAgdmFyIHByZyA9IHZpZXcucHJvZ3JhbTtcclxuICAgICAgICAgICAgdmlldy5hdHRyaWJzID0gYXR0cmlic19uYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGF0dHIpIHtcclxuICAgICAgICAgICAgICAgIHByZXZbYXR0cl0gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcmcsIGF0dHIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmdldEF0dHJpYiA9IGZ1bmN0aW9uICh2aWV3X2tleSwgYXR0cl9rZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtldGNoLl92aWV3c1t2aWV3X2tleV0uYXR0cmlic1thdHRyX2tleV07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5nZXRVbmlmb3JtID0gZnVuY3Rpb24gKHZpZXdfa2V5LCB1bmlmb3JtX2tleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guX3ZpZXdzW3ZpZXdfa2V5XS51bmlmb3Jtc1t1bmlmb3JtX2tleV07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5zZXRVbmlmb3JtTG9jYXRpb25zID0gZnVuY3Rpb24gKGtleSwgdW5pZm9ybV9uYW1lcykge1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IEtldGNoLl92aWV3c1trZXldO1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB2aWV3LmNvbnRleHQ7XHJcbiAgICAgICAgICAgIHZhciBwcmcgPSB2aWV3LnByb2dyYW07XHJcbiAgICAgICAgICAgIHZpZXcudW5pZm9ybXMgPSB1bmlmb3JtX25hbWVzLnJlZHVjZShmdW5jdGlvbiAocHJldiwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgcHJldlthdHRyXSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsIGF0dHIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEtldGNoLmVuYWJsZUF0dHJpYiA9IGZ1bmN0aW9uICh2aWV3X2tleSwgYXR0cl9rZXksIHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gS2V0Y2guZ2V0QXR0cmliKHZpZXdfa2V5LCBhdHRyX2tleSk7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IEtldGNoLmdldENvbnRleHQodmlld19rZXkpO1xyXG4gICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChwb2ludGVyKSB7XHJcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGluZGV4LCBwb2ludGVyLnNpemUgfHwgMywgZ2wuRkxPQVQsIHBvaW50ZXIubm9ybWFsaXplZCB8fCBmYWxzZSwgcG9pbnRlci5zdHJpZGUgfHwgMCwgcG9pbnRlci5vZmZzZXQgfHwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGluZGV4LCAzLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5kaXNhYmxlQXR0cmliID0gZnVuY3Rpb24gKHZpZXdfa2V5LCBhdHRyX2tleSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBLZXRjaC5nZXRBdHRyaWIodmlld19rZXksIGF0dHJfa2V5KTtcclxuICAgICAgICAgICAgdmFyIGdsID0gS2V0Y2guZ2V0Q29udGV4dCh2aWV3X2tleSk7XHJcbiAgICAgICAgICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5yZW5kZXJMb29wID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgICAgIHNldEludGVydmFsKGNiLCAzMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBLZXRjaC5hZGRUZXh0dXJlID0gZnVuY3Rpb24gKGtleSwgdGV4dHVyZV9pZCkge1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IEtldGNoLl92aWV3c1trZXldO1xyXG4gICAgICAgICAgICB2aWV3LnRleHR1cmVzID0gdmlldy50ZXh0dXJlcyB8fCBbXTtcclxuICAgICAgICAgICAgdmlldy50ZXh0dXJlcy5wdXNoKHRleHR1cmVfaWQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guYWN0aXZlVGV4dHVyZSA9IGZ1bmN0aW9uIChrZXksIHRleHR1cmVfaWQsIHRleHR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBLZXRjaC5fdmlld3Nba2V5XTtcclxuICAgICAgICAgICAgdmFyIGdsID0gdmlldy5jb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgcHJnID0gdmlldy5wcm9ncmFtO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB2aWV3LnRleHR1cmVzLmluZGV4T2YodGV4dHVyZV9pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGluZGV4ID09PSAwID8gZ2wuVEVYVFVSRTAgOiBnbC5URVhUVVJFMCArIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVTYW1wbGVyID0gS2V0Y2guZ2V0VW5pZm9ybShrZXksIFwidVNhbXBsZXJcIik7XHJcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWkodVNhbXBsZXIsIGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgS2V0Y2guX3ZpZXdzID0ge307XHJcbiAgICAgICAgcmV0dXJuIEtldGNoO1xyXG4gICAgfSgpKTtcclxuICAgIEJsYXplLktldGNoID0gS2V0Y2g7XHJcbiAgICB2YXIgUmVuZGVyYWJsZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyYWJsZShncmFwaF9pZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFwaF9pZCA9IGdyYXBoX2lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVuZGVyYWJsZS5wcm90b3R5cGUsIFwiZ3JhcGhJRFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyYXBoX2lkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVuZGVyYWJsZS5wcm90b3R5cGUsIFwiZ2xcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBLZXRjaC5nZXRDb250ZXh0KHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZW5kZXJhYmxlLnByb3RvdHlwZSwgXCJwcm9ncmFtXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gS2V0Y2guZ2V0UHJvZ3JhbSh0aGlzLmdyYXBoSUQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBSZW5kZXJhYmxlLnByb3RvdHlwZS5nZXRVbmlmb3JtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V0Y2guZ2V0VW5pZm9ybSh0aGlzLmdyYXBoSUQsIGtleSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUmVuZGVyYWJsZTtcclxuICAgIH0oKSk7XHJcbiAgICBCbGF6ZS5SZW5kZXJhYmxlID0gUmVuZGVyYWJsZTtcclxuICAgIHZhciBFbnRpdHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhFbnRpdHksIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gRW50aXR5KGdyYXBoX2lkKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAobWF0cml4U3RhY2spIHtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uIChtYXRyaXhTdGFjaykge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIEVudGl0eTtcclxuICAgIH0oUmVuZGVyYWJsZSkpO1xyXG4gICAgQmxhemUuRW50aXR5ID0gRW50aXR5O1xyXG4gICAgdmFyIE1hdHJpeFN0YWNrID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICBfX2V4dGVuZHMoTWF0cml4U3RhY2ssIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gTWF0cml4U3RhY2soZ3JhcGhfaWQpIHtcclxuICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFjayA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLl9tdk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BNYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9uTWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3B5ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgbWF0NC5zZXQodGhpcy5fbXZNYXRyaXgsIGNvcHkpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFjay5wdXNoKGNvcHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YWNrLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJpbnZhbGlkIHBvcE1hdHJpeFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9tdk1hdHJpeCA9IHRoaXMuX3N0YWNrLnBvcCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLk1vZGVsVmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbXZNYXRyaXggPSB0aGlzLl9jYW1lcmEubW9kZWxWaWV3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLl9tdk1hdHJpeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXhTdGFjay5wcm90b3R5cGUsIFwibXZNYXRyaXhcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tdk1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJwTWF0cml4XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcE1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJuTWF0cml4XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbk1hdHJpeDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFN0YWNrLnByb3RvdHlwZSwgXCJNYWluQ2FtZXJhXCIsIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE1hdHJpeFN0YWNrLnByb3RvdHlwZS5QZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLl9wTWF0cml4KTtcclxuICAgICAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZSg0NSwgZ2wudmlld3BvcnRXaWR0aCAvIGdsLnZpZXdwb3J0SGVpZ2h0LCAwLjEsIDEwMDAuMCwgdGhpcy5fcE1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNYXRyaXhTdGFjay5wcm90b3R5cGUuTm9ybWFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KHRoaXMuX25NYXRyaXgpO1xyXG4gICAgICAgICAgICBtYXQ0LnNldCh0aGlzLl9tdk1hdHJpeCwgdGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgICAgIG1hdDQuaW52ZXJzZSh0aGlzLl9uTWF0cml4KTtcclxuICAgICAgICAgICAgbWF0NC50cmFuc3Bvc2UodGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNYXRyaXhTdGFjay5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5Nb2RlbFZpZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5QZXJzcGVjdGl2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLk5vcm1hbCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWF0cml4U3RhY2sucHJvdG90eXBlLnNldFVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB0aGlzLk5vcm1hbCgpO1xyXG4gICAgICAgICAgICB2YXIgbXZNYXRyaXggPSB0aGlzLmdldFVuaWZvcm0oXCJ1TVZNYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChtdk1hdHJpeClcclxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobXZNYXRyaXgsIGZhbHNlLCB0aGlzLl9tdk1hdHJpeCk7XHJcbiAgICAgICAgICAgIHZhciBwTWF0cml4ID0gdGhpcy5nZXRVbmlmb3JtKFwidVBNYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChwTWF0cml4KVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihwTWF0cml4LCBmYWxzZSwgdGhpcy5fcE1hdHJpeCk7XHJcbiAgICAgICAgICAgIHZhciBuTWF0cml4ID0gdGhpcy5nZXRVbmlmb3JtKFwidU5NYXRyaXhcIik7XHJcbiAgICAgICAgICAgIGlmIChuTWF0cml4KVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihuTWF0cml4LCBmYWxzZSwgdGhpcy5fbk1hdHJpeCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gTWF0cml4U3RhY2s7XHJcbiAgICB9KFJlbmRlcmFibGUpKTtcclxuICAgIEJsYXplLk1hdHJpeFN0YWNrID0gTWF0cml4U3RhY2s7XHJcbiAgICB2YXIgUmVzb3VyY2VzO1xyXG4gICAgKGZ1bmN0aW9uIChSZXNvdXJjZXMpIHtcclxuICAgICAgICB2YXIgTWVzaEJ1ZmZlcnMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgICAgICBfX2V4dGVuZHMoTWVzaEJ1ZmZlcnMsIF9zdXBlcik7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIE1lc2hCdWZmZXJzKGdyYXBoX2lkKSB7XHJcbiAgICAgICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJvbmxvYWRcIiwge1xyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbmxvYWQgPSBjYjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcInNyY1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ID0gdXRpbHMuZ2V0RXh0ZW5zaW9uKHNyYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMubG9hZChzcmMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2JqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5wYXJzZU9CSihkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5wYXJzZUpTT04oZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVCdWZmZXJzKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fb25sb2FkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29ubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE1lc2hCdWZmZXJzLnByb3RvdHlwZS5wYXJzZUpTT04gPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1lc2hCdWZmZXJzLnByb3RvdHlwZS5wYXJzZU9CSiA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZuOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB2dDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpdDogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZXMgPSBkYXRhLnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZlcnRleCA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhWzBdID09PSAndic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhWzBdID09PSAnZic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZlcnRleC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1zID0gaXRlbS5yZXBsYWNlKFwiXFxyXCIsIFwiXCIpLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZWxlbXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5jb25jYXQoZWxlbXMuc2xpY2UoMSkuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICE9PSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBJbmRleCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaW5kZXguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IGl0ZW0ucmVwbGFjZShcIlxcclwiLCBcIlwiKS5yZXBsYWNlKFwiZlwiLCBcIlwiKS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEluZGV4ID0gdGVtcEluZGV4LmNvbmNhdChlbGVtcy5zbGljZSgxKS5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgIT09IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wSW5kZXguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IGl0ZW0uc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdi5wdXNoKHBhcnNlSW50KGVsZW1zWzBdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pbi5wdXNoKHBhcnNlSW50KGVsZW1zWzFdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5pdC5wdXNoKHBhcnNlSW50KGVsZW1zWzJdKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNoQnVmZmVycy5wcm90b3R5cGUuY3JlYXRlQnVmZmVycyA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgICAgICBfLmRlZmF1bHRzKG9iaiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZuOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB2dDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaXY6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpdDogW11cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2ViR0xVdGlscy5jcmVhdGVCdWZmZXIoZ2wsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai52Lmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmJvID0gY3JlYXRlQnVmZmVyKG9iai52KTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoudi5sZW5ndGggPiAwICYmIG9iai5pdi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmJvID0gY3JlYXRlQnVmZmVyKHV0aWxzLmNhbGN1bGF0ZU5vcm1hbHMob2JqLnYsIG9iai5pdikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai52dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGJvID0gV2ViR0xVdGlscy5jcmVhdGVCdWZmZXIoZ2wsIG9iai52dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbmRleEJ1ZmZlcihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdlYkdMVXRpbHMuY3JlYXRlSW5kZXhCdWZmZXIoZ2wsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pdi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l2Ym8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaXYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pbi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luYm8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pdC5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2l0Ym8gPSBjcmVhdGVJbmRleEJ1ZmZlcihvYmouaXQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcInZib1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmJvO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoQnVmZmVycy5wcm90b3R5cGUsIFwibmJvXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9uYm87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJ0Ym9cIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RibztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaEJ1ZmZlcnMucHJvdG90eXBlLCBcIml2Ym9cIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l2Ym87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hCdWZmZXJzLnByb3RvdHlwZSwgXCJpbmJvXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmJvO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoQnVmZmVycy5wcm90b3R5cGUsIFwiaXRib1wiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXRibztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gTWVzaEJ1ZmZlcnM7XHJcbiAgICAgICAgfShSZW5kZXJhYmxlKSk7XHJcbiAgICAgICAgUmVzb3VyY2VzLk1lc2hCdWZmZXJzID0gTWVzaEJ1ZmZlcnM7XHJcbiAgICAgICAgdmFyIE1lc2hUZXh0dXJlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICAgICAgX19leHRlbmRzKE1lc2hUZXh0dXJlLCBfc3VwZXIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBNZXNoVGV4dHVyZShncmFwaF9pZCkge1xyXG4gICAgICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29pZCA9IHV0aWxzLnV1aWQodGhpcy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaFRleHR1cmUucHJvdG90eXBlLCBcIm9ubG9hZFwiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29ubG9hZCA9IGNiO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoVGV4dHVyZS5wcm90b3R5cGUsIFwic3JjXCIsIHtcclxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGZpbGVuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW1hZ2Uub25sb2FkID0gdGhpcy5sb2FkVGV4dHVyZUltYWdlKHRoaXMuX29ubG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gZmlsZW5hbWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgTWVzaFRleHR1cmUucHJvdG90eXBlLmxvYWRUZXh0dXJlSW1hZ2UgPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl90ZXh0dXJlID0gV2ViR0xVdGlscy5jcmVhdGVUZXh0dXJlKHNlbGYuZ2wsIHNlbGYuX2ltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBLZXRjaC5hZGRUZXh0dXJlKHNlbGYuZ3JhcGhJRCwgc2VsZi5fb2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzaFRleHR1cmUucHJvdG90eXBlLCBcImNvbnRlbnRcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIE1lc2hUZXh0dXJlO1xyXG4gICAgICAgIH0oUmVuZGVyYWJsZSkpO1xyXG4gICAgICAgIFJlc291cmNlcy5NZXNoVGV4dHVyZSA9IE1lc2hUZXh0dXJlO1xyXG4gICAgICAgIHZhciBNZXNoTWF0ZXJpYWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgICAgICBfX2V4dGVuZHMoTWVzaE1hdGVyaWFsLCBfc3VwZXIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBNZXNoTWF0ZXJpYWwoZ3JhcGhfaWQsIGFtYmllbnQsIGRpZmZ1c2UsIHNwZWN1bGFyLCBzaGluaW5lc3MpIHtcclxuICAgICAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FtYmllbnQgPSBhbWJpZW50ID8gdmVjNC5jcmVhdGUoYW1iaWVudCkgOiB2ZWM0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlmZnVzZSA9IGRpZmZ1c2UgPyB2ZWM0LmNyZWF0ZShkaWZmdXNlKSA6IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NwZWN1bGFyID0gc3BlY3VsYXIgPyB2ZWM0LmNyZWF0ZShzcGVjdWxhcikgOiB2ZWM0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2hpbmluZXNzID0gc2hpbmluZXNzIHx8IDIwMC4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcIm9ubG9hZFwiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29ubG9hZCA9IGNiO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcInNyY1wiLCB7XHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB1dGlscy5sb2FkKHNyYywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBzZWxmLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYW1iaWVudCA9IHRlbXAuS2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9kaWZmdXNlID0gdGVtcC5LZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3NwZWN1bGFyID0gdGVtcC5LcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hpbmluZXNzID0gdGVtcC5OcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9vbmxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgTWVzaE1hdGVyaWFsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IFtcIkthXCIsIFwiS2RcIiwgXCJLc1wiLCBcIk5zXCJdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVzID0gZGF0YS5zcGxpdChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBsaW5lLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZWxlbXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMuaW5kZXhPZihrZXkpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJOc1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtcIk5zXCJdID0gTnVtYmVyKGVsZW1zWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGVsZW1zLnNsaWNlKDEpLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gTnVtYmVyKGEpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2goMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XSA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcImFtYmllbnRcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FtYmllbnQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYW1iaWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FtYmllbnQgPSB1dGlscy5ub3JtYWxpemVOYU4odmVjNC5jcmVhdGUoYW1iaWVudCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcImRpZmZ1c2VcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RpZmZ1c2U7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGlmZnVzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpZmZ1c2UgPSB1dGlscy5ub3JtYWxpemVOYU4odmVjNC5jcmVhdGUoZGlmZnVzZSkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoTWF0ZXJpYWwucHJvdG90eXBlLCBcInNwZWN1bGFyXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcGVjdWxhcjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzcGVjdWxhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NwZWN1bGFyID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKHNwZWN1bGFyKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc2hNYXRlcmlhbC5wcm90b3R5cGUsIFwic2hpbmluZXNzXCIsIHtcclxuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaGluaW5lc3M7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoaW5pbmVzcyA9IHY7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIE1lc2hNYXRlcmlhbDtcclxuICAgICAgICB9KFJlbmRlcmFibGUpKTtcclxuICAgICAgICBSZXNvdXJjZXMuTWVzaE1hdGVyaWFsID0gTWVzaE1hdGVyaWFsO1xyXG4gICAgfSkoUmVzb3VyY2VzID0gQmxhemUuUmVzb3VyY2VzIHx8IChCbGF6ZS5SZXNvdXJjZXMgPSB7fSkpO1xyXG4gICAgdmFyIFNoYWRlcnM7XHJcbiAgICAoZnVuY3Rpb24gKFNoYWRlcnMpIHtcclxuICAgICAgICB2YXIgRnJhZ21lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBGcmFnbWVudCgpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBGcmFnbWVudC5QYXJ0aWNsZSA9IFwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuI2VuZGlmXFxuXFxuXFxuXFxudm9pZCBtYWluKHZvaWQpIHsgXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMCwxLDAsMSk7XFxufVwiO1xyXG4gICAgICAgICAgICBGcmFnbWVudC5QaG9uZyA9IFwiI2lmZGVmIEdMX0VTXFxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCB1U2hpbmluZXNzO1xcbnVuaWZvcm0gdmVjMyB1TGlnaHREaXJlY3Rpb247XFxuXFxudW5pZm9ybSB2ZWM0IHVMaWdodEFtYmllbnQ7XFxudW5pZm9ybSB2ZWM0IHVMaWdodERpZmZ1c2U7XFxudW5pZm9ybSB2ZWM0IHVMaWdodFNwZWN1bGFyO1xcblxcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxBbWJpZW50O1xcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxEaWZmdXNlO1xcbnVuaWZvcm0gdmVjNCB1TWF0ZXJpYWxTcGVjdWxhcjtcXG5cXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdkV5ZVZlYztcXG5cXG52b2lkIG1haW4oKXtcXG5cXG5cXHRcXHRcXG4gICAgICAgIHZlYzMgTD0gbm9ybWFsaXplKHVMaWdodERpcmVjdGlvbik7XFxuICAgICAgICB2ZWMzIE49IG5vcm1hbGl6ZSh2Tm9ybWFsKTtcXG4gICAgICAgIGZsb2F0IGxhbWJlcnRUZXJtPWRvdChOLCAtTCk7XFxuICAgICAgICBcXG4gICAgICAgIHZlYzQgSWE9IHVMaWdodEFtYmllbnQqdU1hdGVyaWFsQW1iaWVudDtcXG4gICAgICAgIFxcbiAgICAgICAgdmVjNCBJZD12ZWM0KDAuMCwwLjAsMC4wLDEuMCk7XFxuICAgICAgICBcXG4gICAgICAgIHZlYzQgSXM9dmVjNCgwLjAsMC4wLDAuMCwxLjApO1xcbiAgICAgICAgXFxuICAgICAgICBpZihsYW1iZXJ0VGVybT4wLjApXFxuICAgICAgICB7XFxuICAgICAgICAgICAgSWQ9dUxpZ2h0RGlmZnVzZSp1TWF0ZXJpYWxEaWZmdXNlKmxhbWJlcnRUZXJtO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHZlYzMgRT0gbm9ybWFsaXplKHZFeWVWZWMpO1xcbiAgICAgICAgICAgIHZlYzMgUj0gcmVmbGVjdChMLCBOKTtcXG4gICAgICAgICAgICBmbG9hdCBzcGVjdWxhcj1wb3cobWF4KGRvdChSLEUpLDAuMCksIHVTaGluaW5lc3MpO1xcbiAgICAgICAgICAgIElzPXVMaWdodFNwZWN1bGFyKnVNYXRlcmlhbFNwZWN1bGFyKnNwZWN1bGFyO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICB2ZWM0IGZpbmFsQ29sb3I9SWErSWQrSXM7XFxuICAgICAgICBmaW5hbENvbG9yLmE9MS4wO1xcbiAgICBcXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9ZmluYWxDb2xvcjtcXG4gICAgICAgIFxcbn1cXG5cXG5cXG5cIjtcclxuICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50O1xyXG4gICAgICAgIH0oKSk7XHJcbiAgICAgICAgU2hhZGVycy5GcmFnbWVudCA9IEZyYWdtZW50O1xyXG4gICAgICAgIHZhciBWZXJ0ZXggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBWZXJ0ZXgoKSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVmVydGV4LlBhcnRpY2xlID0gXCJhdHRyaWJ1dGUgdmVjMyBhX3Bvc2l0aW9uO1xcblxcbnVuaWZvcm0gbWF0NCB1TVZNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHVQTWF0cml4O1xcbnVuaWZvcm0gZmxvYXQgdVBvaW50U2l6ZTtcXG5cXG52b2lkIG1haW4odm9pZCkge1xcbiAgICBnbF9Qb3NpdGlvbiA9IHVQTWF0cml4ICogdU1WTWF0cml4ICogdmVjNChhX3Bvc2l0aW9uLnh5eiwgMS4wKTtcXG4gICAgZ2xfUG9pbnRTaXplID0gdVBvaW50U2l6ZTtcXG59XCI7XHJcbiAgICAgICAgICAgIFZlcnRleC5QaG9uZyA9IFwiYXR0cmlidXRlIHZlYzMgYV9wb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMyBhX25vcm1hbDtcXG5cXG51bmlmb3JtIG1hdDQgdU1WTWF0cml4O1xcbnVuaWZvcm0gbWF0NCB1UE1hdHJpeDtcXG51bmlmb3JtIG1hdDQgdU5NYXRyaXg7XFxuXFxuXFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxudmFyeWluZyB2ZWMzIHZFeWVWZWM7XFxuXFxudm9pZCBtYWluKCl7XFxuXFxuICAgIHZlYzQgdmVydGV4ID0gdU1WTWF0cml4ICogdmVjNChhX3Bvc2l0aW9uLCAxLjApO1xcblxcdHZOb3JtYWwgPSB2ZWMzKHVOTWF0cml4ICogdmVjNChhX25vcm1hbCwgMS4wKSk7XFxuXFx0dkV5ZVZlYz0tdmVjMyh2ZXJ0ZXgueHl6KTsgICBcXG5cXHRnbF9Qb3NpdGlvbiA9dVBNYXRyaXggKiB2ZXJ0ZXg7XFxuXFxufVxcblxcblxcblwiO1xyXG4gICAgICAgICAgICByZXR1cm4gVmVydGV4O1xyXG4gICAgICAgIH0oKSk7XHJcbiAgICAgICAgU2hhZGVycy5WZXJ0ZXggPSBWZXJ0ZXg7XHJcbiAgICB9KShTaGFkZXJzID0gQmxhemUuU2hhZGVycyB8fCAoQmxhemUuU2hhZGVycyA9IHt9KSk7XHJcbiAgICB2YXIgQW5pbWF0aW9uRW50aXR5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICBfX2V4dGVuZHMoQW5pbWF0aW9uRW50aXR5LCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbkVudGl0eShncmFwaF9pZCwgZnJlcXVlbmN5LCB0aW1lcywgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9mcmVxdWVuY3kgPSBmcmVxdWVuY3k7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVydmFsX2lkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LnByb3RvdHlwZS5vbkZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBBbmltYXRpb25FbnRpdHkuRWxhcHNlVGltZSA9IHV0aWxzLm5vd0luTWlsbGlzZWNvbmRzKCk7XHJcbiAgICAgICAgICAgIGlmIChBbmltYXRpb25FbnRpdHkuRWxhcHNlVGltZSA8IDUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBzdGVwcyA9IE1hdGguZmxvb3IoQW5pbWF0aW9uRW50aXR5LkVsYXBzZVRpbWUgLyB0aGlzLl9mcmVxdWVuY3kpO1xyXG4gICAgICAgICAgICB3aGlsZSAoKHN0ZXBzID4gMCkgJiYgKEFuaW1hdGlvbkVudGl0eS5Db3VudCAhPSB0aGlzLl90aW1lcykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICBzdGVwcy0tO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uRW50aXR5LkNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbkVudGl0eS5Db3VudCA9PT0gdGhpcy5fdGltZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBBbmltYXRpb25FbnRpdHkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRpbWUgPSB1dGlscy5ub3dJbk1pbGxpc2Vjb25kcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbF9pZCA9IHNldEludGVydmFsKHRoaXMub25GcmFtZSwgdGhpcy5fZnJlcXVlbmN5IC8gMTAwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBBbmltYXRpb25FbnRpdHkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pbnRlcnZhbF9pZClcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxfaWQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQW5pbWF0aW9uRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBBbmltYXRpb25FbnRpdHkucHJvdG90eXBlLmVuZERyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBBbmltYXRpb25FbnRpdHkuQ291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiBBbmltYXRpb25FbnRpdHk7XHJcbiAgICB9KEVudGl0eSkpO1xyXG4gICAgQmxhemUuQW5pbWF0aW9uRW50aXR5ID0gQW5pbWF0aW9uRW50aXR5O1xyXG4gICAgdmFyIE1lc2hFbnRpdHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhNZXNoRW50aXR5LCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIE1lc2hFbnRpdHkoZ3JhcGhfaWQsIG1lc2hmaWxlLCBtYXRlcmlhbGZpbGUsIHRleHR1cmVmaWxlKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVycyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX21lc2hmaWxlID0gbWVzaGZpbGUgfHwgbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWxmaWxlID0gbWF0ZXJpYWxmaWxlIHx8IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVmaWxlID0gdGV4dHVyZWZpbGUgfHwgbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUubG9hZEJ1ZmZlcnMgPSBmdW5jdGlvbiAoZmlsZW5hbWUsIGNiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMgPSBuZXcgUmVzb3VyY2VzLk1lc2hCdWZmZXJzKHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMub25sb2FkID0gY2I7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcnMuc3JjID0gZmlsZW5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNoRW50aXR5LnByb3RvdHlwZS5sb2FkVGV4dHVyZSA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgY2IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBSZXNvdXJjZXMuTWVzaFRleHR1cmUodGhpcy5ncmFwaElEKTtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZS5vbmxvYWQgPSBjYjtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZS5zcmMgPSBmaWxlbmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZXNoRW50aXR5LnByb3RvdHlwZSwgXCJtYXRlcmlhbFwiLCB7XHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsID0gdjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUubG9hZE1hdGVyaWFsID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBjYikge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbCA9IG5ldyBSZXNvdXJjZXMuTWVzaE1hdGVyaWFsKHRoaXMuZ3JhcGhJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLm9ubG9hZCA9IGNiO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5zcmMgPSBmaWxlbmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLmxvYWRNZXNoID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgYXN5bmMud2F0ZXJmYWxsKFtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9tZXNoZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRpbmcgQnVmZmVyc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdWZmZXJzKHNlbGYuX21lc2hmaWxlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkIEJ1ZmZlcnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuX3RleHR1cmVmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBUZXh0dXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRleHR1cmUoc2VsZi5fdGV4dHVyZWZpbGUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgVGV4dHVyZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9tYXRlcmlhbGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkaW5nIE1hdGVyaWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZE1hdGVyaWFsKHNlbGYuX21hdGVyaWFsZmlsZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxvYWRlZCBNYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUubG9hZE1lc2hCeU9iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVycyA9IG5ldyBSZXNvdXJjZXMuTWVzaEJ1ZmZlcnModGhpcy5ncmFwaElEKTtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVycy5jcmVhdGVCdWZmZXJzKG9iaik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNoRW50aXR5LnByb3RvdHlwZS5sb2FkTWF0ZXJpYWxCeU9iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwgPSBuZXcgUmVzb3VyY2VzLk1lc2hNYXRlcmlhbCh0aGlzLmdyYXBoSUQpO1xyXG4gICAgICAgICAgICBpZiAob2JqLmFtYmllbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLmFtYmllbnQgPSBvYmouYW1iaWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqLnNwZWN1bGFyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbC5zcGVjdWxhciA9IG9iai5zcGVjdWxhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqLmRpZmZ1c2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsLmRpZmZ1c2UgPSBvYmouZGlmZnVzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqLnNoaW5pbmVzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWwuc2hpbmluZXNzID0gb2JqLnNoaW5pbmVzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzaEVudGl0eS5wcm90b3R5cGUuc2V0TWF0ZXJpYWxVbmlmb3JtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsLmFtYmllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdU1hdGVyaWFsQW1iaWVudCA9IHRoaXMuZ2V0VW5pZm9ybShcInVNYXRlcmlhbEFtYmllbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVNYXRlcmlhbEFtYmllbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodU1hdGVyaWFsQW1iaWVudCwgdGhpcy5fbWF0ZXJpYWwuYW1iaWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWwuZGlmZnVzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1TWF0ZXJpYWxEaWZmdXNlID0gdGhpcy5nZXRVbmlmb3JtKFwidU1hdGVyaWFsRGlmZnVzZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodU1hdGVyaWFsRGlmZnVzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih1TWF0ZXJpYWxEaWZmdXNlLCB0aGlzLl9tYXRlcmlhbC5kaWZmdXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbC5zcGVjdWxhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1TWF0ZXJpYWxTcGVjdWxhciA9IHRoaXMuZ2V0VW5pZm9ybShcInVNYXRlcmlhbFNwZWN1bGFyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1TWF0ZXJpYWxTcGVjdWxhcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih1TWF0ZXJpYWxTcGVjdWxhciwgdGhpcy5fbWF0ZXJpYWwuc3BlY3VsYXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsLnNoaW5pbmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1U2hpbmluZXNzID0gdGhpcy5nZXRVbmlmb3JtKFwidVNoaW5pbmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodVNoaW5pbmVzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFmKHVTaGluaW5lc3MsIHRoaXMuX21hdGVyaWFsLnNoaW5pbmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc2hFbnRpdHkucHJvdG90eXBlLmJlZ2luRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgdGhpcy5zZXRNYXRlcmlhbFVuaWZvcm1zKCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9idWZmZXJzLnZibyk7XHJcbiAgICAgICAgICAgIEtldGNoLmVuYWJsZUF0dHJpYih0aGlzLmdyYXBoSUQsIFwiYV9wb3NpdGlvblwiKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2J1ZmZlcnMubmJvKTtcclxuICAgICAgICAgICAgS2V0Y2guZW5hYmxlQXR0cmliKHRoaXMuZ3JhcGhJRCwgXCJhX25vcm1hbFwiKTtcclxuICAgICAgICAgICAgdmFyIGl2Ym8gPSB0aGlzLl9idWZmZXJzLml2Ym87XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGl2Ym8pO1xyXG4gICAgICAgICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBpdmJvLm51bUl0ZW1zLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNoRW50aXR5LnByb3RvdHlwZS5lbmREcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICBLZXRjaC5kaXNhYmxlQXR0cmliKHRoaXMuZ3JhcGhJRCwgXCJhX3Bvc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIE1lc2hFbnRpdHk7XHJcbiAgICB9KEVudGl0eSkpO1xyXG4gICAgQmxhemUuTWVzaEVudGl0eSA9IE1lc2hFbnRpdHk7XHJcbiAgICB2YXIgVHJhbnNmb3JtRW50aXR5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICAgICBfX2V4dGVuZHMoVHJhbnNmb3JtRW50aXR5LCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zZm9ybUVudGl0eShncmFwaF9pZCwgcG9zaXRpb24sIHNpemUsIHJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgdGhpcy5fbWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbiB8fCB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zaXplID0gc2l6ZSB8fCB2ZWMzLmNyZWF0ZShbMSwgMSwgMV0pO1xyXG4gICAgICAgICAgICB0aGlzLl9yb3RhdGlvbiA9IHJvdGF0aW9uIHx8IHsgYW5nbGU6IDAsIGF4aXM6IHZlYzMuY3JlYXRlKCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5pZGVudGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLl9tYXRyaXgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRNYXRyaXggPSBmdW5jdGlvbiAobmV3X21hdHJpeCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXggPSBuZXdfbWF0cml4O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS50cmFuc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1hdDQudHJhbnNwb3NlKHRoaXMuX21hdHJpeCwgdGhpcy5fbWF0cml4KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLnNldEFic29sdXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgeikge1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IFt4LCB5LCB6XTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gKHgsIHksIHopIHtcclxuICAgICAgICAgICAgaWYgKHggPT09IHZvaWQgMCkgeyB4ID0gMDsgfVxyXG4gICAgICAgICAgICBpZiAoeSA9PT0gdm9pZCAwKSB7IHkgPSAwOyB9XHJcbiAgICAgICAgICAgIGlmICh6ID09PSB2b2lkIDApIHsgeiA9IDA7IH1cclxuICAgICAgICAgICAgdmFyIG9wZXJhbmQxID0gdGhpcy5fcG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kMiA9IHZlYzMuY3JlYXRlKFt4LCB5LCB6XSk7XHJcbiAgICAgICAgICAgIHZlYzMuYWRkKG9wZXJhbmQxLCBvcGVyYW5kMiwgdGhpcy5fcG9zaXRpb24pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NpemUgPSBzaXplO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoeCwgeSwgeikge1xyXG4gICAgICAgICAgICB0aGlzLl9zaXplID0gW3gsIHksIHpdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uICh4LCB5LCB6KSB7XHJcbiAgICAgICAgICAgIGlmICh4ID09PSB2b2lkIDApIHsgeCA9IDA7IH1cclxuICAgICAgICAgICAgaWYgKHkgPT09IHZvaWQgMCkgeyB5ID0gMDsgfVxyXG4gICAgICAgICAgICBpZiAoeiA9PT0gdm9pZCAwKSB7IHogPSAwOyB9XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kMSA9IHRoaXMuX3NpemU7XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kMiA9IHZlYzMuY3JlYXRlKFt4LCB5LCB6XSk7XHJcbiAgICAgICAgICAgIHZlYzMuYWRkKG9wZXJhbmQxLCBvcGVyYW5kMiwgdGhpcy5fc2l6ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZSwgXCJyb3RhdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JvdGF0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChyb3RhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcm90YXRpb24gPSByb3RhdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChhbmdsZSwgYXhpcykge1xyXG4gICAgICAgICAgICBpZiAoYW5nbGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yb3RhdGlvbi5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgICAgICBpZiAoYXhpcylcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JvdGF0aW9uLmF4aXMgPSBheGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRBbmdsZSA9IGZ1bmN0aW9uIChhbmdsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3RhdGlvbi5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5zZXRBeGlzID0gZnVuY3Rpb24gKGF4aXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcm90YXRpb24uYXhpcyA9IGF4aXM7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLnJvdGF0ZUFuZ2xlID0gZnVuY3Rpb24gKGFuZ2xlKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmdsZSA9PT0gdm9pZCAwKSB7IGFuZ2xlID0gMDsgfVxyXG4gICAgICAgICAgICB0aGlzLl9yb3RhdGlvbi5hbmdsZSArPSBhbmdsZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zZm9ybUVudGl0eS5wcm90b3R5cGUubW92ZUF4aXMgPSBmdW5jdGlvbiAoeCwgeSwgeikge1xyXG4gICAgICAgICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7IHggPSAwOyB9XHJcbiAgICAgICAgICAgIGlmICh5ID09PSB2b2lkIDApIHsgeSA9IDA7IH1cclxuICAgICAgICAgICAgaWYgKHogPT09IHZvaWQgMCkgeyB6ID0gMDsgfVxyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZDEgPSB0aGlzLl9yb3RhdGlvbi5heGlzO1xyXG4gICAgICAgICAgICB2YXIgb3BlcmFuZDIgPSB2ZWMzLmNyZWF0ZShbeCwgeSwgel0pO1xyXG4gICAgICAgICAgICB2ZWMzLmFkZChvcGVyYW5kMSwgb3BlcmFuZDIsIHRoaXMuX3JvdGF0aW9uLmF4aXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNmb3JtRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAobWF0cml4U3RhY2spIHtcclxuICAgICAgICAgICAgbWF0cml4U3RhY2sucHVzaCgpO1xyXG4gICAgICAgICAgICBtYXRyaXhTdGFjay5Nb2RlbFZpZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWF0cml4ID0gbWF0cml4U3RhY2subXZNYXRyaXg7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wb3NpdGlvbiAhPSB2b2lkIDApXHJcbiAgICAgICAgICAgICAgICBtYXQ0LnRyYW5zbGF0ZSh0aGlzLl9tYXRyaXgsIHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NpemUgIT0gdm9pZCAwKVxyXG4gICAgICAgICAgICAgICAgbWF0NC5zY2FsZSh0aGlzLl9tYXRyaXgsIHRoaXMuX3NpemUpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcm90YXRpb24gIT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmFkID0gdGhpcy5fcm90YXRpb24uYW5nbGUgKiBNYXRoLlBJIC8gMTgwO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGUodGhpcy5fbWF0cml4LCByYWQsIHRoaXMuX3JvdGF0aW9uLmF4aXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hdHJpeFN0YWNrLnNldFVwKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFuc2Zvcm1FbnRpdHkucHJvdG90eXBlLmVuZERyYXcgPSBmdW5jdGlvbiAobWF0cml4U3RhY2spIHtcclxuICAgICAgICAgICAgbWF0cml4U3RhY2sucG9wKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gVHJhbnNmb3JtRW50aXR5O1xyXG4gICAgfShFbnRpdHkpKTtcclxuICAgIEJsYXplLlRyYW5zZm9ybUVudGl0eSA9IFRyYW5zZm9ybUVudGl0eTtcclxuICAgIHZhciBMaWdodEVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKExpZ2h0RW50aXR5LCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIExpZ2h0RW50aXR5KGdyYXBoX2lkLCBhbWJpZW50LCBkaWZmdXNlLCBwb3NpdGlvbiwgc3BlY3VsYXIsIGRpcmVjdGlvbiwgY3V0b2ZmKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgdGhpcy5fYW1iaWVudCA9IGFtYmllbnQgPyB2ZWM0LmNyZWF0ZShhbWJpZW50KSA6IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpZmZ1c2UgPSBkaWZmdXNlID8gdmVjNC5jcmVhdGUoZGlmZnVzZSkgOiBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uID8gdmVjNC5jcmVhdGUocG9zaXRpb24pIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fc3BlY3VsYXIgPSBzcGVjdWxhciA/IHZlYzQuY3JlYXRlKHNwZWN1bGFyKSA6IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGRpcmVjdGlvbiA/IHZlYzMuY3JlYXRlKGRpcmVjdGlvbikgOiBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXRvZmYgPSBjdXRvZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaWdodEVudGl0eS5wcm90b3R5cGUsIFwiYW1iaWVudFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FtYmllbnQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGFtYmllbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FtYmllbnQgPSB1dGlscy5ub3JtYWxpemVOYU4odmVjNC5jcmVhdGUoYW1iaWVudCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlnaHRFbnRpdHkucHJvdG90eXBlLCBcImRpZmZ1c2VcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaWZmdXNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkaWZmdXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWZmdXNlID0gdXRpbHMubm9ybWFsaXplTmFOKHZlYzQuY3JlYXRlKGRpZmZ1c2UpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpZ2h0RW50aXR5LnByb3RvdHlwZSwgXCJzcGVjdWxhclwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NwZWN1bGFyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzcGVjdWxhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3BlY3VsYXIgPSB1dGlscy5ub3JtYWxpemVOYU4odmVjNC5jcmVhdGUoc3BlY3VsYXIpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpZ2h0RW50aXR5LnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RpZmZ1c2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHV0aWxzLm5vcm1hbGl6ZU5hTih2ZWMzLmNyZWF0ZShwb3NpdGlvbikpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlnaHRFbnRpdHkucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSB1dGlscy5ub3JtYWxpemVOYU4odmVjMy5jcmVhdGUoZGlyZWN0aW9uKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaWdodEVudGl0eS5wcm90b3R5cGUsIFwiY3V0T2ZmXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3V0b2ZmO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjdXRvZmYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1dG9mZiA9IGN1dG9mZjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTGlnaHRFbnRpdHkucHJvdG90eXBlLmJlZ2luRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FtYmllbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1TGlnaHRBbWJpZW50ID0gdGhpcy5nZXRVbmlmb3JtKFwidUxpZ2h0QW1iaWVudFwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh1TGlnaHRBbWJpZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodUxpZ2h0QW1iaWVudCwgdGhpcy5fYW1iaWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RpZmZ1c2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1TGlnaHREaWZmdXNlID0gdGhpcy5nZXRVbmlmb3JtKFwidUxpZ2h0RGlmZnVzZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh1TGlnaHREaWZmdXNlKVxyXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYodUxpZ2h0RGlmZnVzZSwgdGhpcy5fZGlmZnVzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NwZWN1bGFyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdUxpZ2h0U3BlY3VsYXIgPSB0aGlzLmdldFVuaWZvcm0oXCJ1TGlnaHRTcGVjdWxhclwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh1TGlnaHRTcGVjdWxhcilcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGZ2KHVMaWdodFNwZWN1bGFyLCB0aGlzLl9zcGVjdWxhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdUxpZ2h0UG9zaXRpb24gPSB0aGlzLmdldFVuaWZvcm0oXCJ1TGlnaHRQb3NpdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh1TGlnaHRQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2Z2KHVMaWdodFBvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVEaXJlY3Rpb24gPSB0aGlzLmdldFVuaWZvcm0oXCJ1TGlnaHREaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodURpcmVjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2Z2KHVEaXJlY3Rpb24sIHRoaXMuX2RpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogaWYgKHRoaXMuX2N1dG9mZikge1xyXG4gICAgICAgICAgICAgICAgIHZhciB1Q3V0T2ZmID0gdGhpcy5nZXRVbmlmb3JtKFwidUN1dE9mZlwiKTtcclxuICAgICAgICAgICAgICAgICBpZiAodUN1dE9mZilcclxuICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFmKHVDdXRPZmYsIHRoaXMuX2N1dG9mZik7XHJcbiAgICAgICAgICAgICB9Ki9cclxuICAgICAgICB9O1xyXG4gICAgICAgIExpZ2h0RW50aXR5LnByb3RvdHlwZS5lbmREcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIExpZ2h0RW50aXR5O1xyXG4gICAgfShFbnRpdHkpKTtcclxuICAgIEJsYXplLkxpZ2h0RW50aXR5ID0gTGlnaHRFbnRpdHk7XHJcbiAgICB2YXIgRGlmZnVzZUVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKERpZmZ1c2VFbnRpdHksIF9zdXBlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gRGlmZnVzZUVudGl0eShncmFwaF9pZCwgdikge1xyXG4gICAgICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBncmFwaF9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdjtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERpZmZ1c2VFbnRpdHkucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRGlmZnVzZUVudGl0eS5wcm90b3R5cGUuYmVnaW5EcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB2YXIgdU1hdGVyaWFsRGlmZnVzZSA9IHRoaXMuZ2V0VW5pZm9ybShcInVNYXRlcmlhbERpZmZ1c2VcIik7XHJcbiAgICAgICAgICAgIGlmICh1TWF0ZXJpYWxEaWZmdXNlKVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih1TWF0ZXJpYWxEaWZmdXNlLCB0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBEaWZmdXNlRW50aXR5LnByb3RvdHlwZS5lbmREcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIERpZmZ1c2VFbnRpdHk7XHJcbiAgICB9KEVudGl0eSkpO1xyXG4gICAgQmxhemUuRGlmZnVzZUVudGl0eSA9IERpZmZ1c2VFbnRpdHk7XHJcbiAgICB2YXIgUGFydGljbGVFbnRpdHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhQYXJ0aWNsZUVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBQYXJ0aWNsZUVudGl0eShncmFwaF9pZCwgcG9pbnRTaXplKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGdyYXBoX2lkKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9pbnRTaXplID0gcG9pbnRTaXplIHx8IDE7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBhcnRpY2xlRW50aXR5LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2J1ZmZlcik7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KGRhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5fbnVtSXRlbXMgPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFBhcnRpY2xlRW50aXR5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYnVmZmVyKTtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLl9udW1JdGVtcyA9IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBhcnRpY2xlRW50aXR5LnByb3RvdHlwZSwgXCJwb2ludFNpemVcIiwge1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2ludFNpemUgPSB2O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBQYXJ0aWNsZUVudGl0eS5wcm90b3R5cGUuYmVnaW5EcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICB2YXIgdVBvaW50U2l6ZSA9IHRoaXMuZ2V0VW5pZm9ybShcInVQb2ludFNpemVcIik7XHJcbiAgICAgICAgICAgIGlmICh1UG9pbnRTaXplKVxyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFmKHVQb2ludFNpemUsIHRoaXMuX3BvaW50U2l6ZSk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9idWZmZXIpO1xyXG4gICAgICAgICAgICBLZXRjaC5lbmFibGVBdHRyaWIodGhpcy5ncmFwaElELCBcImFfcG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuUE9JTlRTLCAwLCB0aGlzLl9udW1JdGVtcyAvIDMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUGFydGljbGVFbnRpdHkucHJvdG90eXBlLmVuZERyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgIEtldGNoLmRpc2FibGVBdHRyaWIodGhpcy5ncmFwaElELCBcImFfcG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBQYXJ0aWNsZUVudGl0eTtcclxuICAgIH0oRW50aXR5KSk7XHJcbiAgICBCbGF6ZS5QYXJ0aWNsZUVudGl0eSA9IFBhcnRpY2xlRW50aXR5O1xyXG4gICAgdmFyIENhbWVyYUVudGl0eSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICAgICAgX19leHRlbmRzKENhbWVyYUVudGl0eSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBDYW1lcmFFbnRpdHkoZ3JhcGhfaWQsIHR5cGUpIHtcclxuICAgICAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZ3JhcGhfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl90eXBlID0gdHlwZSB8fCBDQU1FUkFfVFlQRS5PUkJJVElORztcclxuICAgICAgICAgICAgdGhpcy5fY21hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5fY21hdHJpeCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fcmlnaHQgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9ub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHZlYzMuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGggPSAwLjA7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZXZhdGlvbiA9IDAuMDtcclxuICAgICAgICAgICAgdGhpcy5fc3RlcHMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FtZXJhRW50aXR5LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHBvcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcImF6aW11dGhcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hemltdXRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChheikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBfYXogPSBheiAtIHRoaXMuX2F6aW11dGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUF6aW11dGgodGVtcF9heik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIENhbWVyYUVudGl0eS5wcm90b3R5cGUuY2hhbmdlQXppbXV0aCA9IGZ1bmN0aW9uIChheikge1xyXG4gICAgICAgICAgICB0aGlzLl9hemltdXRoICs9IGF6O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYXppbXV0aCA+IDM2MCB8fCB0aGlzLl9hemltdXRoIDwgLTM2MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXppbXV0aCA9IHRoaXMuX2F6aW11dGggJSAzNjA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcImVsZXZhdGlvblwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VsZXZhdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wX2VsID0gZWwgLSB0aGlzLl9lbGV2YXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUVsZXZhdGlvbih0ZW1wX2VsKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgQ2FtZXJhRW50aXR5LnByb3RvdHlwZS5jaGFuZ2VFbGV2YXRpb24gPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fZWxldmF0aW9uICs9IGVsO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZWxldmF0aW9uID4gMzYwIHx8IHRoaXMuX2VsZXZhdGlvbiA8IC0zNjApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZXZhdGlvbiA9IHRoaXMuX2VsZXZhdGlvbiAlIDM2MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhbWVyYUVudGl0eS5wcm90b3R5cGUsIFwiem9vbVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0ZXBzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIHAgPSB0aGlzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBvZmZzZXQgLSB0aGlzLl9zdGVwcztcclxuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuX25vcm1hbCwgbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3X3Bvc2l0aW9uID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90eXBlID09PSBDQU1FUkFfVFlQRS5UUkFDS0lORykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld19wb3NpdGlvblswXSA9IHBbMF0gLSBzdGVwICogblswXTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdfcG9zaXRpb25bMV0gPSBwWzFdIC0gc3RlcCAqIG5bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Bvc2l0aW9uWzJdID0gcFsyXSAtIHN0ZXAgKiBuWzJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Bvc2l0aW9uWzBdID0gcFswXTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdfcG9zaXRpb25bMV0gPSBwWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld19wb3NpdGlvblsyXSA9IHBbMl0gLSBzdGVwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ld19wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0ZXBzID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBDYW1lcmFFbnRpdHkucHJvdG90eXBlLmNhbGN1bGF0ZU9yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHRoaXMuX2NtYXRyaXg7XHJcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHlWZWM0KG0sIFsxLCAwLCAwLCAwXSwgdGhpcy5fcmlnaHQpO1xyXG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5VmVjNChtLCBbMCwgMSwgMCwgMF0sIHRoaXMuX3VwKTtcclxuICAgICAgICAgICAgbWF0NC5tdWx0aXBseVZlYzQobSwgWzAsIDAsIDEsIDBdLCB0aGlzLl9ub3JtYWwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQ2FtZXJhRW50aXR5LnByb3RvdHlwZS5iZWdpbkRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5fY21hdHJpeCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlT3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3R5cGUgPT09IENBTUVSQV9UWVBFLlRSQUNLSU5HKSB7XHJcbiAgICAgICAgICAgICAgICBtYXQ0LnRyYW5zbGF0ZSh0aGlzLl9jbWF0cml4LCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBtYXQ0LnJvdGF0ZVkodGhpcy5fY21hdHJpeCwgdGhpcy5fYXppbXV0aCAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGVYKHRoaXMuX2NtYXRyaXgsIHRoaXMuX2VsZXZhdGlvbiAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGVZKHRoaXMuX2NtYXRyaXgsIHRoaXMuX2F6aW11dGggKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgICAgIG1hdDQucm90YXRlWCh0aGlzLl9jbWF0cml4LCB0aGlzLl9lbGV2YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgICAgIG1hdDQudHJhbnNsYXRlKHRoaXMuX2NtYXRyaXgsIHRoaXMuX3Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90eXBlID09PSBDQU1FUkFfVFlQRS5UUkFDS0lORykge1xyXG4gICAgICAgICAgICAgICAgbWF0NC5tdWx0aXBseVZlYzQobSwgWzAsIDAsIDAsIDFdLCB0aGlzLl9wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYW1lcmFFbnRpdHkucHJvdG90eXBlLCBcIm1vZGVsVmlld1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5pbnZlcnNlKHRoaXMuX2NtYXRyaXgsIG0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIENhbWVyYUVudGl0eS5wcm90b3R5cGUuZW5kRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBDYW1lcmFFbnRpdHk7XHJcbiAgICB9KEVudGl0eSkpO1xyXG4gICAgQmxhemUuQ2FtZXJhRW50aXR5ID0gQ2FtZXJhRW50aXR5O1xyXG4gICAgdmFyIE5vZGVFbGVtZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBOb2RlRWxlbWVudChwYXJlbnQsIHR5cGUsIGVudGl0eSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJlbnROb2RlID0gcGFyZW50O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudE5vZGUuYWRkQ2hpbGROb2RlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLl9vaWQgPSB1dGlscy51dWlkKHRoaXMuX3R5cGUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5fZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZUVsZW1lbnQucHJvdG90eXBlLCBcIm9pZFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29pZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGVFbGVtZW50LnByb3RvdHlwZSwgXCJwYXJlbnRcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZUVsZW1lbnQucHJvdG90eXBlLCBcImVudGl0eVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VudGl0eTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb2RlRWxlbWVudC5wcm90b3R5cGUsIFwiY2hpbGROb2Rlc1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkTm9kZXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5hZGRDaGlsZE5vZGUgPSBmdW5jdGlvbiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGROb2Rlcy5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZE5vZGUgPSBmdW5jdGlvbiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKGNoaWxkKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuZ2V0Q2hpbGROb2RlQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGROb2Rlc1tpbmRleF0gfHwgdm9pZCAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmV4aXN0c0NoaWxkTm9kZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGROb2Rlc1tpbmRleF0gIT09IHZvaWQgMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudE5vZGUucmVtb3ZlQ2hpbGROb2RlKHRoaXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUNoaWxkTm9kZSA9IGZ1bmN0aW9uICh0eXBlLCBlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb2RlRWxlbWVudCh0aGlzLCB0eXBlLCBlbnRpdHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmlzUm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudE5vZGUgPT09IHZvaWQgMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGNoaWxkKSB7XHJcbiAgICAgICAgICAgIHZhciBvaWQgPSBjaGlsZC5vaWQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRJbmRleCh0aGlzLl9jaGlsZE5vZGVzLCBmdW5jdGlvbiAocykgeyByZXR1cm4gcy5vaWQgPT09IG9pZDsgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuaW5kZXhJblBhcmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvb3QoKSlcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fcGFyZW50Tm9kZS5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUuaGFzU2libGluZyA9IGZ1bmN0aW9uIChwcmV2KSB7XHJcbiAgICAgICAgICAgIHZhciBfaGF2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSb290KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX3BhcmVudE5vZGUuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudE5vZGUuZ2V0Q2hpbGROb2RlQnlJbmRleChpbmRleCAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudE5vZGUuZ2V0Q2hpbGROb2RlQnlJbmRleChpbmRleCArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX2hhdmU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUubmV4dFNpYmxpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm9vdCgpICYmIHRoaXMuaGFzU2libGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9wYXJlbnROb2RlLmluZGV4T2YodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBzaWJsaW5nID0gdGhpcy5fcGFyZW50Tm9kZS5nZXRDaGlsZE5vZGVCeUluZGV4KGluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNpYmxpbmc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBOb2RlRWxlbWVudC5wcm90b3R5cGUucHJldmlvdXNTaWJsaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2libGluZyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvb3QoKSAmJiB0aGlzLmhhc1NpYmxpbmcodHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX3BhcmVudE5vZGUuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgICAgIHNpYmxpbmcgPSB0aGlzLl9wYXJlbnROb2RlLmdldENoaWxkTm9kZUJ5SW5kZXgoaW5kZXggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc2libGluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5maXJzdENoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZE5vZGVCeUluZGV4KDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLmxhc3RDaGlsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGROb2RlQnlJbmRleCh0aGlzLl9jaGlsZE5vZGVzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTm9kZUVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkTm9kZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkTm9kZXMgPSBbXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5vZGVFbGVtZW50LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKG1hdHJpeFN0YWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9lbnRpdHkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbnRpdHkuYmVnaW5EcmF3KG1hdHJpeFN0YWNrKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLl9jaGlsZE5vZGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZHJhdyhtYXRyaXhTdGFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2VudGl0eSlcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VudGl0eS5lbmREcmF3KG1hdHJpeFN0YWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBOb2RlRWxlbWVudDtcclxuICAgIH0oKSk7XHJcbiAgICBCbGF6ZS5Ob2RlRWxlbWVudCA9IE5vZGVFbGVtZW50O1xyXG4gICAgdmFyIFNjZW5lR3JhcGggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhTY2VuZUdyYXBoLCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIFNjZW5lR3JhcGgoKSB7XHJcbiAgICAgICAgICAgIHZhciBvaWQgPSB1dGlscy51dWlkKCk7XHJcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIG9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29pZCA9IG9pZDtcclxuICAgICAgICAgICAgdGhpcy5fc2NlbmUgPSBuZXcgTm9kZUVsZW1lbnQodm9pZCAwLCBcIlNjZW5lXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXhTdGFjayA9IG5ldyBNYXRyaXhTdGFjayh0aGlzLl9vaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXJCdWZmZXIgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5faXNEcmF3aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEtldGNoLmNyZWF0ZVZpZXcodGhpcy5fb2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjZW5lR3JhcGgucHJvdG90eXBlLCBcInNjZW5lXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2VuZUdyYXBoLnByb3RvdHlwZSwgXCJpc0RyYXdpbmdcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0RyYXdpbmc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLkVudmlyb25tZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XHJcbiAgICAgICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO1xyXG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xyXG4gICAgICAgICAgICBnbC5ibGVuZEZ1bmMoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcclxuICAgICAgICAgICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMSk7XHJcbiAgICAgICAgICAgIGdsLmNsZWFyRGVwdGgoMS4wKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzRHJhd2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLnZpZXdwb3J0V2lkdGgsIGdsLnZpZXdwb3J0SGVpZ2h0KTtcclxuICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5kcmF3KHRoaXMuX21hdHJpeFN0YWNrKTtcclxuICAgICAgICAgICAgdGhpcy5faXNEcmF3aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jcmVhdGVNYWluQ2hpbGROb2RlID0gZnVuY3Rpb24gKHR5cGUsIGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuY3JlYXRlQ2hpbGROb2RlKHR5cGUsIGVudGl0eSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5yZW1vdmVNYWluQ2hpbGROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2NlbmUucmVtb3ZlQ2hpbGROb2RlKG5vZGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjZW5lR3JhcGgucHJvdG90eXBlLCBcIm9pZFwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29pZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChjYW52YXMpIHtcclxuICAgICAgICAgICAgS2V0Y2guc2V0Q2FudmFzVG9Db250ZXh0KHRoaXMub2lkLCBjYW52YXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuUHJvZ3JhbSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiUGhvbmdcIjtcclxuICAgICAgICAgICAgS2V0Y2guY3JlYXRlUHJvZ3JhbSh0aGlzLl9vaWQsIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50OiBTaGFkZXJzLkZyYWdtZW50W3R5cGVdLFxyXG4gICAgICAgICAgICAgICAgdmVydGV4OiBTaGFkZXJzLlZlcnRleFt0eXBlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZU1lc2ggPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNoRW50aXR5ID0gbmV3IE1lc2hFbnRpdHkodGhpcy5vaWQpO1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLm1lc2gpIHtcclxuICAgICAgICAgICAgICAgIG1lc2hFbnRpdHkubG9hZE1lc2hCeU9iamVjdChjb25maWcubWVzaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5tYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgbWVzaEVudGl0eS5sb2FkTWF0ZXJpYWxCeU9iamVjdChjb25maWcubWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNoRW50aXR5O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuY3JlYXRlRGlmZnVzZSA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGlmZnVzZUVudGl0eSh0aGlzLm9pZCwgdik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jcmVhdGVNZXNoQnlMb2FkZXIgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNoID0gbmV3IE1lc2hFbnRpdHkodGhpcy5vaWQsIGNvbmZpZy5tZXNoLCBjb25maWcubWF0ZXJpYWwsIGNvbmZpZy50ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyQnVmZmVyLnB1c2gobWVzaCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU2NlbmVHcmFwaC5wcm90b3R5cGUuY3JlYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBzaXplLCByb3RhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybUVudGl0eSh0aGlzLm9pZCwgcG9zaXRpb24sIHNpemUsIHJvdGF0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZUxpZ2h0ID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IExpZ2h0RW50aXR5KHRoaXMub2lkLCBjb25maWcuYW1iaWVudCwgY29uZmlnLmRpZmZ1c2UsIGNvbmZpZy5wb3NpdGlvbiwgY29uZmlnLnNwZWN1bGFyLCBjb25maWcuZGlyZWN0aW9uLCBjb25maWcuY3V0b2ZmKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZUNhbWVyYSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FtZXJhRW50aXR5KHRoaXMub2lkLCB0eXBlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNyZWF0ZVBhcnRpY2xlID0gZnVuY3Rpb24gKHBvaW50U2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2xlRW50aXR5KHRoaXMub2lkLCBwb2ludFNpemUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNjZW5lR3JhcGgucHJvdG90eXBlLCBcIk1haW5DYW1lcmFcIiwge1xyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYW1lcmEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hdHJpeFN0YWNrLk1haW5DYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLnN0YXJ0TG9hZGVyID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgICAgIGFzeW5jLmVhY2hTZXJpZXModGhpcy5fbG9hZGVyQnVmZmVyLCBmdW5jdGlvbiAoaXRlbSwgbmV4dCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5sb2FkTWVzaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIGNiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNjZW5lR3JhcGgucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcgfHwge307XHJcbiAgICAgICAgICAgIHNlbGYuRW52aXJvbm1lbnQoKTtcclxuICAgICAgICAgICAgc2VsZi5Qcm9ncmFtKGNvbmZpZy50eXBlU2hhZGVyKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0QXR0cmlidXRlTG9jYXRpb25zKHNlbGYuX29pZCwgU2NlbmVHcmFwaC5BVFRSSUJVVEVTKTtcclxuICAgICAgICAgICAgS2V0Y2guc2V0VW5pZm9ybUxvY2F0aW9ucyhzZWxmLl9vaWQsIFNjZW5lR3JhcGguVU5JRk9STVMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXhTdGFjay5pbml0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLnByb3RvdHlwZS5jb25maWd1cmVXaXRoTG9hZGVyID0gZnVuY3Rpb24gKGNiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc2VsZi5jb25maWd1cmUoKTtcclxuICAgICAgICAgICAgc2VsZi5zdGFydExvYWRlcihjYik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTY2VuZUdyYXBoLlVOSUZPUk1TID0gW1xyXG4gICAgICAgICAgICAndVBNYXRyaXgnLFxyXG4gICAgICAgICAgICAndU1WTWF0cml4JyxcclxuICAgICAgICAgICAgJ3VOTWF0cml4JyxcclxuICAgICAgICAgICAgJ3VMaWdodERpcmVjdGlvbicsXHJcbiAgICAgICAgICAgICd1TGlnaHRBbWJpZW50JyxcclxuICAgICAgICAgICAgJ3VNYXRlcmlhbEFtYmllbnQnLFxyXG4gICAgICAgICAgICAndUxpZ2h0RGlmZnVzZScsXHJcbiAgICAgICAgICAgICd1TWF0ZXJpYWxEaWZmdXNlJyxcclxuICAgICAgICAgICAgJ3VMaWdodFNwZWN1bGFyJyxcclxuICAgICAgICAgICAgJ3VNYXRlcmlhbFNwZWN1bGFyJyxcclxuICAgICAgICAgICAgJ3VTaGluaW5lc3MnLFxyXG4gICAgICAgICAgICAndVBvaW50U2l6ZSdcclxuICAgICAgICBdO1xyXG4gICAgICAgIFNjZW5lR3JhcGguQVRUUklCVVRFUyA9IFsnYV9wb3NpdGlvbicsICdhX25vcm1hbCddO1xyXG4gICAgICAgIHJldHVybiBTY2VuZUdyYXBoO1xyXG4gICAgfShSZW5kZXJhYmxlKSk7XHJcbiAgICBCbGF6ZS5TY2VuZUdyYXBoID0gU2NlbmVHcmFwaDtcclxufSkoQmxhemUgfHwgKEJsYXplID0ge30pKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
